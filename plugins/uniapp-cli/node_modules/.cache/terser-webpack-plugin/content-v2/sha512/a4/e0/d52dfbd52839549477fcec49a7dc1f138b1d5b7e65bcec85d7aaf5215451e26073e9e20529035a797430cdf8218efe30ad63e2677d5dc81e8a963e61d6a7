{"map":{"version":3,"sources":["static/js/pages-API-login-login.c48925c7.js"],"names":["window","push","1fb1","module","exports","__webpack_require__","_interopRequireDefault","default","Object","defineProperty","value","_slicedToArray2","_regeneratorRuntime2","_asyncToGenerator2","_objectSpread2","_vuex","univerifyInfoKey","_default","data","title","providerList","phoneNumber","univerifyBtnLoading","computed","mapState","onLoad","_this","this","uni","getProvider","service","success","result","provider","map","providerName","name","id","fail","error","console","log","hasLogin","isUniverifyLogin","getPhoneNumber","getStorageSync","then","methods","mapMutations","mapActions","Toast","duration","arguments","length","undefined","showToast","assign","tologin","_this2","login","_success","mark","_callee","res","wrap","_context","prev","next","stop","_x","apply","err","code","closeAuthView","showModal","showCancel","content","JSON","stringify","univerifyErrorMsg","errMsg","concat","confirmText","cancelText","confirm","setTimeout","plus","runtime","openWeb","complete","loginByUniverify","_this3","setUniverifyLogin","univerifyInfo","authResult","setStorageSync","catch","loginByApple","_callee2","getUserInfoErr","_yield$uni$getUserInf","_yield$uni$getUserInf2","_context2","getUserInfo","sent","indexOf","warn","request","url","method","action","params","userInfo","msg","openid","nickname","e","2328","__webpack_exports__","_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_h5_vue_style_loader_index_js_ref_6_oneOf_1_0_node_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_node_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_4_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_scoped_loader_index_js_login_vue_vue_type_style_index_0_id_38425793_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_h5_vue_style_loader_index_js_ref_6_oneOf_1_0_node_uniapp_cli_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_6_oneOf_1_2_node_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_3_node_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_4_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_scoped_loader_index_js_login_vue_vue_type_style_index_0_id_38425793_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","33ae","___CSS_LOADER_API_IMPORT___","i","3b98","__esModule","locals","add","sourceMap","shadowMode","95ef","r","_login_vue_vue_type_template_id_38425793_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_login_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","renderjs","_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","d692","render","staticRenderFns","components","pageHead","_vm","_h","$createElement","_c","_self","attrs","staticClass","staticStyle","background","padding","_v","font-size","_s","_e","_l","type","loading","on","click","$event","$handleEvent","f6b0","_node_uniapp_cli_node_modules_babel_loader_lib_index_js_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_18_0_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_scoped_loader_index_js_login_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_uniapp_cli_node_modules_babel_loader_lib_index_js_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_13_1_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_18_0_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_using_components_js_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_node_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_scoped_loader_index_js_login_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"CAACA,OAAO,gBAAkBA,OAAO,iBAAmB,IAAIC,KAAK,CAAC,CAAC,yBAAyB,CAElFC,OACA,SAAUC,EAAQC,EAASC,GAEjC,aAGAA,EAAoB,QACpB,IAAIC,EAAyBD,EAAoB,QAAQE,QACzDC,OAAOC,eAAeL,EAAS,aAAc,CAC3CM,OAAO,IAETN,EAAQG,aAAU,EAClBF,EAAoB,QACpBA,EAAoB,QACpBA,EAAoB,QACpBA,EAAoB,QACpB,IAAIM,EAAkBL,EAAuBD,EAAoB,SAC7DO,EAAuBN,EAAuBD,EAAoB,SAClEQ,EAAqBP,EAAuBD,EAAoB,SAChES,EAAiBR,EAAuBD,EAAoB,SAC5DU,EAAQV,EAAoB,QAuC5BW,EAAmB,gBACnBC,EAAW,CACbC,KAAM,WACJ,MAAO,CACLC,MAAO,QACPC,aAAc,GACdC,YAAa,GACbC,qBAAqB,IAGzBC,UAAU,EAAIT,EAAeP,SAAS,IAAI,EAAIQ,EAAMS,UAAU,CAAC,WAAY,mBAAoB,uBAC/FC,OAAQ,WACN,IAAIC,EAAQC,KACZC,IAAIC,YAAY,CACdC,QAAS,QACTC,QAAS,SAAiBC,GACxBN,EAAMN,aAAeY,EAAOC,SAASC,KAAI,SAAUxB,GACjD,IAAIyB,EAAe,GACnB,OAAQzB,GACN,IAAK,SACHyB,EAAe,OACf,MACF,IAAK,KACHA,EAAe,OACf,MACF,IAAK,YACHA,EAAe,SACf,MACF,IAAK,SACHA,EAAe,OACf,MACF,IAAK,SACHA,EAAe,QACf,MACF,IAAK,QACHA,EAAe,OACf,MACF,IAAK,KACHA,EAAe,OACf,MACF,IAAK,UACHA,EAAe,OACf,MACF,IAAK,QACHA,EAAe,OACf,MACF,IAAK,YACHA,EAAe,OACf,MAEJ,MAAO,CACLC,KAAMD,EACNE,GAAI3B,OAIV4B,KAAM,SAAcC,GAClBC,QAAQC,IAAI,WAAYF,MAGxBZ,KAAKe,UAAYf,KAAKgB,kBACxBhB,KAAKiB,eAAehB,IAAIiB,eAAe7B,IAAmB8B,MAAK,SAAUzB,GACvEK,EAAML,YAAcA,MAI1B0B,SAAS,EAAIjC,EAAeP,UAAS,EAAIO,EAAeP,UAAS,EAAIO,EAAeP,SAAS,IAAI,EAAIQ,EAAMiC,cAAc,CAAC,QAAS,wBAAwB,EAAIjC,EAAMkC,YAAY,CAAC,oBAAqB,GAAI,CACzMC,MAAO,SAAehC,GACpB,IAAIiC,EAAWC,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,IACnFxB,IAAI2B,UAAU/C,OAAOgD,OAAO,GAAItC,EAAM,CACpCiC,SAAUA,MAGdM,QAAS,SAAiBxB,GACxB,IAAIyB,EAAS/B,KACO,cAAhBM,EAASI,KACXV,KAAKL,qBAAsB,GAI7BM,IAAI+B,MAAM,CACR1B,SAAUA,EAASI,GACnBN,QAAS,WACP,IAAI6B,GAAW,EAAI/C,EAAmBN,UAAuB,EAAIK,EAAqBL,WAAWsD,MAAK,SAASC,EAAQC,GACrH,OAAO,EAAInD,EAAqBL,WAAWyD,MAAK,SAAkBC,GAChE,MAAO,EACL,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EACH3B,QAAQC,IAAI,iBAAkBsB,GAC9BL,EAAOR,MAAM,CACX/B,MAAO,SAGTuC,EAAOC,MAAM1B,EAASI,IACxB,KAAK,EACL,IAAK,MACH,OAAO4B,EAASG,UAGrBN,OAEL,SAAS/B,EAAQsC,GACf,OAAOT,EAASU,MAAM3C,KAAMyB,WAE9B,OAAOrB,EAtBA,GAwBTO,KAAM,SAAciC,GAIlB,GAHA/B,QAAQC,IAAI,cAAe8B,GAGX,SAAZA,EAAIC,KAKN,OAJA5C,IAAI6C,qBACJf,EAAOR,MAAM,CACX/B,MAAO,WAMK,KAAZoD,EAAIC,KAkBQ,SAAZD,EAAIC,KAUQ,SAAZD,EAAIC,MACN5C,IAAI8C,UAAU,CACZC,YAAY,EACZxD,MAAO,OACPyD,QAASC,KAAKC,UAAUP,KAb1B3C,IAAI8C,UAAU,CACZC,YAAY,EACZxD,MAAO,QACPyD,QAASlB,EAAOqB,mBAAqBR,EAAIS,SArB3CpD,IAAI8C,UAAU,CACZvD,MAAO,OACPyD,QAAS,GAAGK,OAAOV,EAAIS,OAAQ,WAAoCC,OAAOV,EAAIC,MAC9EU,YAAa,OACbC,WAAY,KACZpD,QAAS,SAAiBgC,GACpBA,EAAIqB,SACNC,YAAW,WACTC,KAAKC,QAAQC,QAAQ,6CACpB,SA0BbC,SAAU,WACR/B,EAAOpC,qBAAsB,MAInCoE,iBAAkB,SAA0BzD,EAAU8B,GACpD,IAAI4B,EAAShE,KACbA,KAAKiE,mBAAkB,GACvBhE,IAAI6C,gBACJ,IAAIoB,GAAgB,EAAI/E,EAAeP,SAAS,CAC9C0B,SAAUA,GACT8B,EAAI+B,YACPnE,KAAKiB,eAAeiD,GAAe/C,MAAK,SAAUzB,GAChDsE,EAAOtE,YAAcA,EACrBO,IAAImE,eAAe/E,EAAkB6E,MACpCG,OAAM,SAAUzB,GACjB3C,IAAI8C,UAAU,CACZC,YAAY,EACZxD,MAAO,UACPyD,QAAS,GAAGK,OAAOV,EAAIS,OAAQ,WAAoCC,OAAOV,EAAIC,QAEhFhC,QAAQD,MAAMwB,OAGlBkC,aAAc,SAAsBhE,EAAU8B,GAC5C,OAAO,EAAIlD,EAAmBN,UAAuB,EAAIK,EAAqBL,WAAWsD,MAAK,SAASqC,IACrG,IAAIC,EAAgBnE,EAAQoE,EAAuBC,EAAwBzB,EAC3E,OAAO,EAAIhE,EAAqBL,WAAWyD,MAAK,SAAmBsC,GACjE,MAAO,EACL,OAAQA,EAAUpC,KAAOoC,EAAUnC,MACjC,KAAK,EAEH,OADAmC,EAAUnC,KAAO,EACVvC,IAAI2E,YAAY,CACrBtE,SAAUA,IAEd,KAAK,EACHmE,EAAwBE,EAAUE,KAClCH,GAAyB,EAAI1F,EAAgBJ,SAAS6F,EAAuB,GAC7ED,EAAiBE,EAAuB,GACxCrE,EAASqE,EAAuB,GAC5BF,IACFvB,EAAUuB,EAAenB,QACpBJ,EAAQ6B,QAAQ,eACnB7B,EAAU,gBAEZhD,IAAI8C,UAAU,CACZvD,MAAO,WACPyD,QAAS,OAASA,EAClBD,YAAY,KAIhBnC,QAAQkE,KAAK,uEACb9E,IAAI+E,QAAQ,CACVC,IAAK,2EACLC,OAAQ,OACR3F,KAAM,CACJ4F,OAAQ,eACRC,OAAQ/E,EAAOgF,UAEjBjF,QAAS,SAAiBgC,GACxBvB,QAAQC,IAAI,sBAAuBsB,GACb,IAAlBA,EAAI7C,KAAKsD,KACX5C,IAAI8C,UAAU,CACZC,YAAY,EACZC,QAAS,WAAyCK,OAAOJ,KAAKC,UAAUf,EAAI7C,KAAK+F,SAGnFrF,IAAImE,eAAe,SAAUhC,EAAI7C,KAAKgG,QACtCtF,IAAImE,eAAe,iBAAkBhC,EAAI7C,KAAK8F,SAASG,YAG3D7E,KAAM,SAAc8E,GAClBxF,IAAI8C,UAAU,CACZE,QAAS,WAAyCK,OAAOJ,KAAKC,UAAUsC,IACxEzC,YAAY,OAIpB,KAAK,EACL,IAAK,MACH,OAAO2B,EAAUlC,UAGtB8B,MA3DE,OAgEb9F,EAAQG,QAAUU,GAIZoG,KACA,SAAUlH,EAAQmH,EAAqBjH,GAE7C,aACqB,IAAIkH,EAAu1BlH,EAAoB,QAC32BmH,EAA42BnH,EAAoBoH,EAAEF,GAEh1BC,EAA81B,GAIn6BE,OACA,SAAUvH,EAAQC,EAASC,GAGjC,IAAIsH,EAA8BtH,EAAoB,QACtDD,EAAUuH,GAA4B,GAEtCvH,EAAQH,KAAK,CAACE,EAAOyH,EAAG,mEAAoE,KAE5FzH,EAAOC,QAAUA,GAKXyH,OACA,SAAU1H,EAAQC,EAASC,GAKjC,IAAIuE,EAAUvE,EAAoB,QAC/BuE,EAAQkD,aAAYlD,EAAUA,EAAQrE,SACnB,kBAAZqE,IAAsBA,EAAU,CAAC,CAACzE,EAAOyH,EAAGhD,EAAS,MAC5DA,EAAQmD,SAAQ5H,EAAOC,QAAUwE,EAAQmD,QAE5C,IAAIC,EAAM3H,EAAoB,QAAQE,QACzByH,EAAI,WAAYpD,GAAS,EAAM,CAACqD,WAAY,EAAMC,YAAa,KAItEC,OACA,SAAUhI,EAAQmH,EAAqBjH,GAE7C,aACAA,EAAoB+H,EAAEd,GACD,IAAIe,EAAqFhI,EAAoB,QACzGiI,EAAmEjI,EAAoB,QAC/E,IAAI,IAAIkI,KAA0BD,EAAqE,CAAC,WAAW7B,QAAQ8B,GAA0B,GAAI,SAASC,GAAOnI,EAAoBoI,EAAEnB,EAAqBkB,GAAK,WAAa,OAAOF,EAAiEE,MAAtJ,CAAiKD,GAC9NlI,EAAoB,QAA3H,IAGjBqI,EAFqBC,EAAgJtI,EAAoB,QAUzLuI,EAAYpI,OAAOmI,EAA4J,KAAnKnI,CACd8H,EAAiE,WACjED,EAAgG,KAChGA,EAAyG,MACzG,EACA,KACA,WACA,MACA,EACAA,EAAoG,KACpGK,GAG2BpB,EAAoB,WAAcsB,EAAiB,SAI1EC,KACA,SAAU1I,EAAQmH,EAAqBjH,GAE7C,aAGAA,EAAoBoI,EAAEnB,EAAqB,KAAK,WAAa,OAAsBwB,KACnFzI,EAAoBoI,EAAEnB,EAAqB,KAAK,WAAa,OAAsByB,KACnF1I,EAAoBoI,EAAEnB,EAAqB,KAAK,WAAa,OAAsB0B,KAKnF,IAAIA,EAAa,CAACC,SAAY5I,EAAoB,QAAQE,SACtDuI,EAAS,WAAa,IAAII,EAAIvH,KAASwH,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,aAAa,CAACA,EAAG,YAAY,CAACE,MAAM,CAACpI,MAAQ+H,EAAI/H,SAASkI,EAAG,aAAa,CAACG,YAAY,oBAAoB,CAACH,EAAG,aAAa,CAACI,YAAY,CAACC,WAAa,OAAOC,QAAU,UAAU,EAAmB,IAAjBT,EAAIxG,SAAmB,CAAC2G,EAAG,aAAa,CAACG,YAAY,mCAAmC,CAACN,EAAIU,GAAG,OAAQV,EAAoB,iBAAEG,EAAG,aAAa,CAACI,YAAY,CAACI,YAAY,UAAU,CAAGX,EAAI7H,YAAYgC,OAA2DgG,EAAG,IAAI,CAACH,EAAIU,GAAG,IAAIV,EAAIY,GAAGZ,EAAI7H,aAAa,OAA9FgI,EAAG,IAAI,CAACG,YAAY,iCAAmFN,EAAIa,MAAM,GAAGV,EAAG,aAAa,CAACG,YAAY,6BAA6B,CAACH,EAAG,aAAa,CAACH,EAAIU,GAAG,0CAA0C,IAAIV,EAAIa,MAAuB,IAAjBb,EAAIxG,SAAoB,CAAC2G,EAAG,aAAa,CAACG,YAAY,mCAAmC,CAACN,EAAIU,GAAG,SAASP,EAAG,aAAa,CAACG,YAAY,6BAA6B,CAACN,EAAIU,GAAG,cAAcV,EAAIa,MAAM,GAAGV,EAAG,aAAa,CAACG,YAAY,gCAAgCN,EAAIc,GAAId,EAAgB,cAAE,SAASxI,EAAM8H,GAAK,OAAOa,EAAG,eAAe,CAACb,IAAIA,EAAIgB,YAAY,mBAAmBD,MAAM,CAACU,KAAO,UAAUC,QAAuB,cAAbxJ,EAAM2B,IAAqB6G,EAAI5H,qBAA6B6I,GAAG,CAACC,MAAQ,SAASC,GACzsCjH,UAAU,GAAKiH,EAASnB,EAAIoB,aAAaD,GACzCnB,EAAIzF,QAAQ/C,MACR,CAACwI,EAAIU,GAAGV,EAAIY,GAAGpJ,EAAM0B,YAAW,IAAI,IAAI,IAExC2G,EAAkB,IAQhBwB,KACA,SAAUpK,EAAQmH,EAAqBjH,GAE7C,aACAA,EAAoB+H,EAAEd,GACD,IAAIkD,EAAipBnK,EAAoB,QACrqBoK,EAAsqBpK,EAAoBoH,EAAE+C,GACprB,IAAI,IAAIjC,KAA0BiC,EAAmpB,CAAC,WAAW/D,QAAQ8B,GAA0B,GAAI,SAASC,GAAOnI,EAAoBoI,EAAEnB,EAAqBkB,GAAK,WAAa,OAAOgC,EAA+oBhC,MAApuB,CAA+uBD,GACx9CjB,EAAoB,WAAcmD,EAAwpB"},"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"pages-API-login-login\"],{\"1fb1\":function(n,e,t){\"use strict\";t(\"6a54\");var i=t(\"f5bd\").default;Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0,t(\"fd3c\"),t(\"c223\"),t(\"d4b5\"),t(\"5ef2\");var o=i(t(\"5de6\")),a=i(t(\"2634\")),u=i(t(\"2fdc\")),c=i(t(\"9b1b\")),r=t(\"8f59\"),s=\"univerifyInfo\",l={data:function(){return{title:\"login\",providerList:[],phoneNumber:\"\",univerifyBtnLoading:!1}},computed:(0,c.default)({},(0,r.mapState)([\"hasLogin\",\"isUniverifyLogin\",\"univerifyErrorMsg\"])),onLoad:function(){var n=this;uni.getProvider({service:\"oauth\",success:function(e){n.providerList=e.provider.map((function(n){var e=\"\";switch(n){case\"weixin\":e=\"微信登录\";break;case\"qq\":e=\"QQ登录\";break;case\"sinaweibo\":e=\"新浪微博登录\";break;case\"xiaomi\":e=\"小米登录\";break;case\"alipay\":e=\"支付宝登录\";break;case\"baidu\":e=\"百度登录\";break;case\"jd\":e=\"京东登录\";break;case\"toutiao\":e=\"头条登录\";break;case\"apple\":e=\"苹果登录\";break;case\"univerify\":e=\"一键登录\";break}return{name:e,id:n}}))},fail:function(n){console.log(\"获取登录通道失败\",n)}}),this.hasLogin&&this.isUniverifyLogin&&this.getPhoneNumber(uni.getStorageSync(s)).then((function(e){n.phoneNumber=e}))},methods:(0,c.default)((0,c.default)((0,c.default)({},(0,r.mapMutations)([\"login\",\"setUniverifyLogin\"])),(0,r.mapActions)([\"getPhoneNumber\"])),{},{Toast:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;uni.showToast(Object.assign({},n,{duration:e}))},tologin:function(n){var e=this;\"univerify\"===n.id&&(this.univerifyBtnLoading=!0),uni.login({provider:n.id,success:function(){var t=(0,u.default)((0,a.default)().mark((function t(i){return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(\"login success:\",i),e.Toast({title:\"登录成功\"}),e.login(n.id);case 3:case\"end\":return t.stop()}}),t)})));function i(n){return t.apply(this,arguments)}return i}(),fail:function(n){if(console.log(\"login fail:\",n),\"30002\"==n.code)return uni.closeAuthView(),void e.Toast({title:\"其他登录方式\"});1e3!=n.code?\"30005\"!=n.code?\"30003\"!=n.code&&uni.showModal({showCancel:!1,title:\"登录失败\",content:JSON.stringify(n)}):uni.showModal({showCancel:!1,title:\"预登录失败\",content:e.univerifyErrorMsg||n.errMsg}):uni.showModal({title:\"登录失败\",content:\"\".concat(n.errMsg,\"\\n，错误码：\").concat(n.code),confirmText:\"开通指南\",cancelText:\"确定\",success:function(n){n.confirm&&setTimeout((function(){plus.runtime.openWeb(\"https://ask.dcloud.net.cn/article/37965\")}),500)}})},complete:function(){e.univerifyBtnLoading=!1}})},loginByUniverify:function(n,e){var t=this;this.setUniverifyLogin(!0),uni.closeAuthView();var i=(0,c.default)({provider:n},e.authResult);this.getPhoneNumber(i).then((function(n){t.phoneNumber=n,uni.setStorageSync(s,i)})).catch((function(n){uni.showModal({showCancel:!1,title:\"手机号获取失败\",content:\"\".concat(n.errMsg,\"\\n，错误码：\").concat(n.code)}),console.error(e)}))},loginByApple:function(n,e){return(0,u.default)((0,a.default)().mark((function e(){var t,i,u,c,r;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,uni.getUserInfo({provider:n});case 2:u=e.sent,c=(0,o.default)(u,2),t=c[0],i=c[1],t&&(r=t.errMsg,~r.indexOf(\"uni.login\")&&(r=\"请在登录页面完成登录操作\"),uni.showModal({title:\"获取用户信息失败\",content:\"错误原因\"+r,showCancel:!1})),console.warn(\"此处使用uni-id处理苹果登录，详情参考: https://uniapp.dcloud.net.cn/uniCloud/uni-id\"),uni.request({url:\"https://97fca9f2-41f6-449f-a35e-3f135d4c3875.bspapp.com/http/user-center\",method:\"POST\",data:{action:\"loginByApple\",params:i.userInfo},success:function(n){console.log(\"uniId login success\",n),0!==n.data.code?uni.showModal({showCancel:!1,content:\"苹果登录失败: \".concat(JSON.stringify(n.data.msg))}):(uni.setStorageSync(\"openid\",n.data.openid),uni.setStorageSync(\"apple_nickname\",n.data.userInfo.nickname))},fail:function(n){uni.showModal({content:\"苹果登录失败: \".concat(JSON.stringify(n)),showCancel:!1})}});case 9:case\"end\":return e.stop()}}),e)})))()}})};e.default=l},2328:function(n,e,t){\"use strict\";var i=t(\"3b98\"),o=t.n(i);o.a},\"33ae\":function(n,e,t){var i=t(\"c86c\");e=i(!1),e.push([n.i,\"uni-button[data-v-38425793]{background-color:#007aff;color:#fff}\",\"\"]),n.exports=e},\"3b98\":function(n,e,t){var i=t(\"33ae\");i.__esModule&&(i=i.default),\"string\"===typeof i&&(i=[[n.i,i,\"\"]]),i.locals&&(n.exports=i.locals);var o=t(\"967d\").default;o(\"d2328fb8\",i,!0,{sourceMap:!1,shadowMode:!1})},\"95ef\":function(n,e,t){\"use strict\";t.r(e);var i=t(\"d692\"),o=t(\"f6b0\");for(var a in o)[\"default\"].indexOf(a)<0&&function(n){t.d(e,n,(function(){return o[n]}))}(a);t(\"2328\");var u,c=t(\"828b\"),r=Object(c[\"a\"])(o[\"default\"],i[\"b\"],i[\"c\"],!1,null,\"38425793\",null,!1,i[\"a\"],u);e[\"default\"]=r.exports},d692:function(n,e,t){\"use strict\";t.d(e,\"b\",(function(){return o})),t.d(e,\"c\",(function(){return a})),t.d(e,\"a\",(function(){return i}));var i={pageHead:t(\"5476\").default},o=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t(\"v-uni-view\",[t(\"page-head\",{attrs:{title:n.title}}),t(\"v-uni-view\",{staticClass:\"uni-padding-wrap\"},[t(\"v-uni-view\",{staticStyle:{background:\"#FFF\",padding:\"40rpx\"}},[!0===n.hasLogin?[t(\"v-uni-view\",{staticClass:\"uni-h3 uni-center uni-common-mt\"},[n._v(\"已登录\"),n.isUniverifyLogin?t(\"v-uni-text\",{staticStyle:{\"font-size\":\"0.8em\"}},[n.phoneNumber.length?t(\"i\",[n._v(\"（\"+n._s(n.phoneNumber)+\"）\")]):t(\"i\",{staticClass:\"uni-icon_toast uni-loading\"})]):n._e()],1),t(\"v-uni-view\",{staticClass:\"uni-hello-text uni-center\"},[t(\"v-uni-text\",[n._v(\"每个账号仅需登录 1 次，\\\\n后续每次进入页面即可自动拉取用户信息。\")])],1)]:n._e(),!1===n.hasLogin?[t(\"v-uni-view\",{staticClass:\"uni-h3 uni-center uni-common-mt\"},[n._v(\"未登录\")]),t(\"v-uni-view\",{staticClass:\"uni-hello-text uni-center\"},[n._v(\"请点击按钮登录\")])]:n._e()],2),t(\"v-uni-view\",{staticClass:\"uni-btn-v uni- uni-common-mt\"},n._l(n.providerList,(function(e,i){return t(\"v-uni-button\",{key:i,staticClass:\"page-body-button\",attrs:{type:\"primary\",loading:\"univerify\"===e.id&&n.univerifyBtnLoading},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.tologin(e)}}},[n._v(n._s(e.name))])})),1)],1)],1)},a=[]},f6b0:function(n,e,t){\"use strict\";t.r(e);var i=t(\"1fb1\"),o=t.n(i);for(var a in i)[\"default\"].indexOf(a)<0&&function(n){t.d(e,n,(function(){return i[n]}))}(a);e[\"default\"]=o.a}}]);","extractedComments":[]}