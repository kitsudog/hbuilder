"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const vscode_languageserver_protocol_1=require("vscode-languageserver-protocol"),core_1=require("../../../../core"),htmlDataUtils_1=require("../../tool/htmlDataUtils"),BaseHandler_1=require("./BaseHandler"),dataProvider=(0,htmlDataUtils_1.htmlDataProvider)(),attrsCache=[];function getDistinctAttrs(){if(attrsCache.length>0)return attrsCache;let e=new Set,t=dataProvider.provideTags();for(let r of t){let t=dataProvider.provideAttributes(r.name);for(let r of t)e.has(r.name)||(e.add(r.name),attrsCache.push(r))}return attrsCache}class HtmlAttributeHandler extends BaseHandler_1.BaseHandler{async doCompleteAsync(e,t,r,a,o){dataProvider.provideTags();let s=getDistinctAttrs();const l=r.range;return s.map((e=>({label:e.name,kind:vscode_languageserver_protocol_1.CompletionItemKind.Value,textEdit:l?vscode_languageserver_protocol_1.TextEdit.replace(l,e.name):void 0,data:{hxKind:core_1.HxIconKind.ATTRIBUTE}})))}}exports.default=HtmlAttributeHandler;