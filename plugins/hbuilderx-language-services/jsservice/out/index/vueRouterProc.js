"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getVueRouterIndexProc=void 0;const core_1=require("./../../../core"),utils_1=require("./utils");function getVueRouterIndexProc(e){let t=new Set;return{support:(e,t)=>e.getText().indexOf("vue-router")>0,onImportDeclaration(e,r){var o,s,i;if("vue-router"===(0,utils_1.removeQuot)(r.moduleSpecifier.getText())){let e=null!==(i=null===(s=null===(o=r.importClause)||void 0===o?void 0:o.name)||void 0===s?void 0:s.getText())&&void 0!==i?i:"";e&&t.add(e)}return null},onNewExpression(e,r,o){var s,i;if(!o||!r.arguments||0===r.arguments.length)return null;let n=o.getText();if(t.has(n)){let l=r.arguments[0],u=[];function a(t){t.properties.some((t=>{let r=utils_1.tsConvert.asTsPropertyAssignment(t);if(r&&/^['\"]?path['\"]?$/.test(r.name.getText())){let t=utils_1.tsConvert.asTsStringLiteral(r.initializer),o=null==t?void 0:t.text;if(o&&o.length<2048){let r=o[0];"'"!=r&&'"'!=r||(o=o.slice(1));let s=o[o.length-1];"'"!=s&&'"'!=s||(o=o.slice(0,-1)),u.push({label:"router-path",position:e.positionAt(t.getStart()),data:o})}return!0}return!1}))}let p=null!==(i=null===(s=utils_1.tsConvert.asTsObjectLiteralExpression(l))||void 0===s?void 0:s.properties)&&void 0!==i?i:[];for(let g=0;g<p.length;g++){let d=utils_1.tsConvert.asTsPropertyAssignment(p[g]);if(d&&/^['\"]?routes['\"]?$/.test(d.name.getText())){let v=utils_1.tsConvert.asTsArrayLiteralExpression(d.initializer);null==v||v.elements.forEach((e=>{let t=utils_1.tsConvert.asTsObjectLiteralExpression(e);t&&a(t)}))}}if(u.length>0){let c=new core_1.IndexData;return c.categories.push("router-path"),c["router-path"]=u,c}}return null}}}exports.getVueRouterIndexProc=getVueRouterIndexProc;