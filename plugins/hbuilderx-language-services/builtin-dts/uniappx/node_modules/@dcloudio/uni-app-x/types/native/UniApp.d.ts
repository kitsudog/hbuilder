import { UniPageManager } from "./UniPageManager"
import { UniCallbackWrapper } from "./UniCallbackWrapper"
import { NativeLoadFontFaceOptions } from "./NativeLoadFontFaceOptions"
import { UniKeyEvent } from "./UniEvent"

/**
 * @package io.dcloud.uniapp.runtime
 * @autodoc false
 */
export interface UniApp {
  /**
   * 应用id
   */
  readonly appid: string

  /**
   * 页面管理
   */
  readonly pageManager: UniPageManager

  /**
   * 接收框架触发的event
   * @autodoc false
   */
  onEvent(event: string): void

  /**
   * 监听app事件
   */
  addEventListener<T>(event: "onShow" | "onHide" | "onExit", callback: (event: T) => void): UniCallbackWrapper

  /**
   * 注销app监听
   */
  removeEventListener(event: string, callbackWrapper: UniCallbackWrapper): void

  /**
   * 监听app按键监听
   */
  addKeyEventListener(event: "onBackButton", callback: (event: UniKeyEvent) => boolean): void

  /**
   * 退出app
   * @uniPlatform {
   *    "app": {
   *        "android": {
   *            "osVer": "5.0",
   *            "uniVer": "x",
   *            "unixVer": "4.0"
   *        },
   *        "ios": {
   *            "osVer": "x",
   *            "uniVer": "x",
   *            "unixVer": "x"
   *   	  }
   *    }
   * }
   */
  quit(): void

  /**
   * 获取原生app启动耗时，不包含uniapp启动时间
   * @autodoc false
   */
  getAppStartDuration(): number

  /**
   * 加载自定义字体
   */
  loadFontFace(options: NativeLoadFontFaceOptions): void

  /**
   * 获取直达相关信息
   * @autodoc false
   */
  getRedirectInfo(): Map<string, any | null>
}

export type IApp = UniApp
