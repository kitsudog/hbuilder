export interface Uni {
	/**
	  * @description 获取一键登录管理对象
	  * @tutorial https://uniapp.dcloud.net.cn/univerify.html#univerifymanager
	  * @uniPlatform {
	  *   "app": {
	  * 	  "android": {
	  *     	  "osVer": "4.4",
	  *  		  "uniVer": "√",
	  * 		  "unixVer": "3.99"
	  *  	  },
	  *       "ios": {
	  *           "osVer": "9.0",
	  *  		  "uniVer": "√",
	  * 		  "unixVer": "x"
	  *       }
	  *   }
	  * }
	  */
	getUniverifyManager : GetUniverifyManager
}

export type GetUniverifyManager = () => UniverifyManager

export interface UniverifyManager {
	/**
	  * @description 预登录
	  * @uniPlatform {
	  *   "app": {
	  * 	  "android": {
	  *     	  "osVer": "4.4",
	  *  		  "uniVer": "√",
	  * 		  "unixVer": "3.99"
	  *  	  },
	  *       "ios": {
	  *           "osVer": "9.0",
	  *  		  "uniVer": "√",
	  * 		  "unixVer": "x"
	  *       }
	  *   }
	  * }
	  */
	preLogin(options : PreLoginOptions) : void
	/**
	  * @description 登录
	  * @uniPlatform {
	  *   "app": {
	  * 	  "android": {
	  *     	  "osVer": "4.4",
	  *  		  "uniVer": "√",
	  * 		  "unixVer": "3.99"
	  *  	  },
	  *       "ios": {
	  *           "osVer": "9.0",
	  *  		  "uniVer": "√",
	  * 		  "unixVer": "x"
	  *       }
	  *   }
	  * }
	  */
	login(options : LoginOptions) : void
	/**
	  * @description 关闭登录页
	  * @uniPlatform {
	  *   "app": {
	  * 	  "android": {
	  *     	  "osVer": "4.4",
	  *  		  "uniVer": "√",
	  * 		  "unixVer": "3.99"
	  *  	  },
	  *       "ios": {
	  *           "osVer": "9.0",
	  *  		  "uniVer": "√",
	  * 		  "unixVer": "x"
	  *       }
	  *   }
	  * }
	  */
	close() : void
	/**
	  * @description 预登录是否有效
	  * @uniPlatform {
	  *   "app": {
	  * 	  "android": {
	  *     	  "osVer": "4.4",
	  *  		  "uniVer": "√",
	  * 		  "unixVer": "3.99"
	  *  	  },
	  *       "ios": {
	  *           "osVer": "9.0",
	  *  		  "uniVer": "√",
	  * 		  "unixVer": "x"
	  *       }
	  *   }
	  * }
	  */
	isPreLoginValid() : boolean
}

/**
 * 预登录参数
 */
export type PreLoginOptions = {
	success ?: PreLoginSuccessCallback,
	fail ?: PreLoginFailCallback,
	complete ?: PreLoginCompleteCallback
}

/**
 * 登录参数
 */
export type LoginOptions = {
	univerifyStyle ?: UniverifyStyle,
	success ?: LoginSuccessCallback,
	fail ?: LoginFailCallback,
	complete ?: LoginCompleteCallback
}

/**
 * 登录页样式
 */
export type UniverifyStyle = {
	/**
	 * 是否全屏
	 */
	fullScreen ?: boolean,
	/**
	 * logo路径
	 */
	logoPath ?: string,
	/**
	 * 登录页背景色
	 */
	backgroundColor ?: string,
	/**
	 * 登录按钮文字
	 */
	loginBtnText ?: string
}

export type PreLoginSuccessCallback = () => void
export interface PreLoginFail extends IUniError {
	errCode : UniverifyErrorCode
}
export type PreLoginFailCallback = (err : PreLoginFail) => void
export type PreLoginComplete = any;
export type PreLoginCompleteCallback = (res : PreLoginComplete) => void

export type LoginSuccess = {
	/**
	 * 登录授权唯一标识
	 */
	openId : string,
	/**
	 * token
	 */
	accessToken : string
}
export type LoginSuccessCallback = (res : LoginSuccess) => void
export interface LoginFail extends IUniError {
	errCode : UniverifyErrorCode
}
export type LoginFailCallback = (err : LoginFail) => void
export type LoginComplete = any;
export type LoginCompleteCallback = (res : LoginComplete) => void

/**
 * 1000 当前应用appid尚未开通uni一键登录
 * 1001 应用所有者账号信息异常，请检查账号一键登录服务是否正常
 * 1002 应用所有者账号信息异常，请检查账号余额是否充足
 * 1004 uni一键登录应用不存在
 * 4001 参数异常
 * 30004 其他错误
 * 30005 预登录失败
 * 30006 一键登录失败
 */
// export type UniverifyErrorCode = 1000 | 1001 | 1002 | 1004 | 4001 | 30002 | 30003 | 30004 | 30005 | 30006;
export type UniverifyErrorCode = 1000 | 1001 | 1002 | 1004 | 4001 | 30004 | 30005 | 30006;

/**
 * SDK响应数据结构
 */
export type InternalResponse = {
	/**
	 * 个验用户唯一标识
	 */
	gyuid : string,
	/**
	 * code 返回结果，30000为成功
	 */
	code : number,
	/**
	 * msg 返回结果详情，为json格式，包含errorCode、errorDesc、metadata、及其他业务自定义的字段
	 */
	msg : string,
	/**
	 * 请求的运营商，CM 移动、CT 电信、CU 联通
	 */
	operator : string,
	/**
	 * 接口请求是否成功
	 */
	isSuccess : boolean
}