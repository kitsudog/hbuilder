declare namespace UniCloudNamespace {
  interface SocketTaskCloseEvent {
    /**
     * 一个数字值表示关闭连接的状态号，表示连接被关闭的原因
     */
    code?: number;
    /**
     * 一个可读的字符串，表示连接被关闭的原因
     */
    reason?: string;
  }
  interface SocketTask {
    /**
     * 监听 WebSocket 连接打开事件
     */
    onOpen(callback: () => any): any;
    /**
     * 接受到服务器的消息事件的回调函数
     */
    onMessage(callback: ({ data }) => any): any;
    /**
     * 监听 WebSocket 连接关闭事件
     */
    onClose(callback: (options: SocketTaskCloseEvent) => any): any;
    /**
     * 监听 WebSocket 错误事件
     */
    onError(callback: ({ errMsg }: { errMsg: string }) => any): any;
    /**
     * 通过 WebSocket 连接发送数据
     */
    send({ data }): any;
    /**
     * 关闭 WebSocket 连接
     */
    close(options?: SocketTaskCloseEvent): any;
  }
  interface UniCloudConnectSocketOptions {
    /**
     * 服务器接口地址
     */
    url: string;
    /**
     * 请求头
     */
    header?: Record<string, any>;
    /**
     * 子协议数组
     */
    protocols?: string[];
  }

  interface UniCloud {
    /**
     * 连接websocket服务
     *
     * 文档: [https://uniapp.dcloud.io/uniCloud/cf-functions?id=websocket-client](https://uniapp.dcloud.io/uniCloud/cf-functions?id=websocket-client)
     */
    connectSocket(options: UniCloudConnectSocketOptions): SocketTask;
  }
}
