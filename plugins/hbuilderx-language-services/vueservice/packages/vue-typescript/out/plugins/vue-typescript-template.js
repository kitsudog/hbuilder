"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var _=Object.getOwnPropertyDescriptor(t,n);_&&!("get"in _?!t.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,_)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0});const code_gen_1=require("../../../code-gen"),SourceMaps=__importStar(require("../../../source-map")),vue_code_gen_1=require("../../../vue-code-gen"),transform_1=require("../../../vue-code-gen/out/transform"),path=__importStar(require("path")),core_1=require("../../../../../core");function default_1(e,t,n,o,_,a,s,r,i,p,d,c){return{getEmbeddedFilesCount:(e,t)=>3,getEmbeddedFile(d,l,u){var y,S,f,g,m,V,L;const v=path.basename(d);if(!(0!==u&&2!==u||p)){let x=[];if(null===(y=i.experimentalUseScriptLeadingCommentInTemplate)||void 0===y||y)for(const R of[l.script,l.scriptSetup])if(R){const k=e.getLeadingCommentRanges(R.content,0);k&&(x=k.map((e=>R.content.substring(e.pos,e.end))))}const T=x.join("\n"),b=new code_gen_1.CodeGen;let P="js"===r.value||"jsx"===r.value?i.enableJavaScriptValidation:i.enableTypeScriptValidation;P||b.addText("// @ts-nocheck\n"),b.addText(T+"\n"),b.addText("import * as __VLS_types from './__VLS_types';\n"),l.script||l.scriptSetup?(b.addText(`import { __VLS_options, __VLS_name } from './${v}.__VLS_script';\n`),b.addText(`import __VLS_component from './${v}.__VLS_script';\n`)):(b.addText("var __VLS_name = undefined;\n"),b.addText("var __VLS_options = {};\n"),b.addText(`var __VLS_component = (await import('${(0,vue_code_gen_1.getVueLibraryName)(null!==(S=i.target)&&void 0!==S?S:3)}')).defineComponent({});\n`)),w(),b.addText(`\n\t\t\t\t\timport ${i.target>2.7?"{ComponentPublicInstance}":"__VLS_Vue"} from 'vue';\n\t\t\t\t\tlet __VLS_vueInstance ${i.target>2.7?":ComponentPublicInstance":"= new __VLS_Vue()"};\n\t\t\t\t\tlet __VLS_vuePrototype = __VLS_types.vuePrototype;\n\t\t\t\t\tlet __VLS_uvueCurrent = {}\n`),0!==u&&(null===(g=null===(f=a.value)||void 0===f?void 0:f.exportDefault)||void 0===g?void 0:g.args)?c&&(0,core_1.isUniAppXProject)(c)?b.addText("type __VLS_ctx_type = {} & __VLS_types.PickNotAny<typeof __VLS_vuePrototype, new () => {}>\n"):b.addText("type __VLS_ctx_type = {}\n\t\t\t\t\t\t& __VLS_types.PickNotAny<typeof __VLS_options.methods, new () => {}>\n\t\t\t\t\t\t& __VLS_types.PickNotAny<__VLS_types.ExtractPropTypes<typeof __VLS_options.props>,new () => {}>\n\t\t\t\t\t\t& __VLS_types.PickNotAny<__VLS_types.ExtractComputedReturns<typeof __VLS_options.computed>, new () => {}>\n\t\t\t\t\t\t& __VLS_types.PickNotAny<__VLS_types.UnwrapNestedRefs<ReturnType<typeof __VLS_options.data>>, new () => {}>\n\t\t\t\t\t\t& __VLS_types.PickNotAny<__VLS_types.ShallowUnwrapRef<ReturnType<typeof __VLS_options.setup>>, new () => {}>\n\t\t\t\t\t\t& __VLS_types.PickNotAny<typeof __VLS_vuePrototype, new () => {}>\n"):c&&(0,core_1.isUniAppXProject)(c)?b.addText("type __VLS_ctx_type = {} & __VLS_types.PickNotAny<typeof __VLS_vuePrototype, new () => {}>\n"):b.addText("type __VLS_ctx_type = InstanceType<__VLS_types.PickNotAny<typeof __VLS_component, new () => {}>>\n\t\t\t\t\t\t& __VLS_types.PickNotAny<__VLS_types.ExtractPropTypes<__VLS_types.PickNotAny<typeof __VLS_options.props,new () => {}>>,new () => {}>\n\t\t\t\t\t\t& __VLS_types.PickNotAny<typeof __VLS_vuePrototype, new () => {}>\n"),b.addText("declare var __VLS_ctx: __VLS_types.__VLS_CurrentPageType & __VLS_types.PickNotAny<typeof __VLS_vueInstance, new () => {}> & __VLS_ctx_type & typeof __VLS_uvueCurrent & {\n");for(const A of t.value){b.addText(`${A.style.module}: Record<string, string>`);for(const M of A.classNameRanges)N(A.index,A.style.content.substring(M.start+1,M.end),M,"string",!1);b.addText(";\n")}i.target&&i.target;b.addText("};\n"),b.addText("declare var __VLS_vmUnwrap: typeof __VLS_options & { components: { } };\n"),b.addText("/* Components */\n"),b.addText(`declare var __VLS_selfComponent: __VLS_types.SelfComponent<typeof __VLS_name, typeof __VLS_component & (new () => { ${(0,vue_code_gen_1.getSlotsPropertyName)(null!==(m=i.target)&&void 0!==m?m:3)}: typeof __VLS_slots })>;\n`),b.addText("/* Style Scoped */\n"),b.addText("type __VLS_StyleScopedClasses = {}");for(const j of n.value)for(const $ of j.classNameRanges)N(j.index,j.style.content.substring($.start+1,$.end),$,"boolean",!0);b.addText(";\n"),b.addText("declare var __VLS_styleScopedClasses: __VLS_StyleScopedClasses | keyof __VLS_StyleScopedClasses | (keyof __VLS_StyleScopedClasses)[];\n"),b.addText("/* CSS variable injection */\n"),h(),o.value&&(0,code_gen_1.mergeCodeGen)(b,o.value.codeGen),b.addText("export default __VLS_slots;\n");const C="js"===r.value?"jsx":"ts"===r.value?"tsx":r.value;return{parentFileName:d+"."+(null===(V=l.template)||void 0===V?void 0:V.lang),fileName:d+(0===u?"":".1")+".__VLS_template."+C,content:b.getText(),capabilities:{diagnostics:0===u&&!!P,foldingRanges:!1,formatting:!1,documentSymbol:!1,codeActions:!1,inlayHints:0===u,completions:0!==u&&void 0},isTsHostFile:!0,mappings:b.getMappings()};function w(){const e=[];s.value&&l.scriptSetup&&e.push({typeBindings:s.value.typeBindings,content:l.scriptSetup.content}),a.value&&l.script&&e.push({typeBindings:a.value.typeBindings,content:l.script.content}),b.addText("import {\n");for(const t of e)for(const e of t.typeBindings){const n=t.content.substring(e.start,e.end);b.addText(`__VLS_types_${n} as ${n},\n`)}b.addText(`} from './${v}.__VLS_script';\n`)}function N(e,t,n,o,_){b.addText("\n & { "),b.addMapping2({mappedRange:{start:b.getText().length,end:b.getText().length+t.length+2},sourceRange:n,mode:SourceMaps.Mode.Totally,additional:[{mappedRange:{start:b.getText().length+1,end:b.getText().length+1+t.length},sourceRange:n,mode:SourceMaps.Mode.Offset}],data:{vueTag:"style",vueTagIndex:e,capabilities:{references:!0,rename:!0,referencesCodeLens:!0},normalizeNewName:beforeCssRename,applyNewName:doCssRename}}),b.addText(`'${t}'${_?"?":""}: ${o}`),b.addText(" }")}function h(){const t={},n=new Set;for(const o of _.value)for(const _ of o.ranges)(0,transform_1.walkInterpolationFragment)(e,o.style.content.substring(_.start,_.end),((e,t,n)=>{void 0===t?b.addText(e):b.addCode(e,{start:_.start+t,end:_.start+t+e.length},SourceMaps.Mode.Offset,{vueTag:"style",vueTagIndex:o.styleIndex,capabilities:n?{diagnostic:!0}:{basic:!0,references:!0,definitions:!0,diagnostic:!0,rename:!0,completion:!0,semanticTokens:!0}})}),t,n),b.addText(";\n")}}if(1===u&&o.value){return{parentFileName:d+"."+(null===(L=l.template)||void 0===L?void 0:L.lang),fileName:d+".template.css",content:o.value.cssCodeGen.getText(),capabilities:{diagnostics:!0,foldingRanges:!1,formatting:!1,codeActions:!1,documentSymbol:!1,inlayHints:!1},isTsHostFile:!1,mappings:o.value.cssCodeGen.getMappings()}}}}}function beforeCssRename(e){return e.startsWith(".")?e.slice(1):e}function doCssRename(e,t){return"."+t}exports.default=default_1;