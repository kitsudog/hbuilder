"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSelectionRanges=void 0;const jsonLanguageTypes_1=require("../jsonLanguageTypes"),jsonc_parser_1=require("jsonc-parser");function getSelectionRanges(e,t,n){function s(t,n){return jsonLanguageTypes_1.Range.create(e.positionAt(t),e.positionAt(n))}const o=(0,jsonc_parser_1.createScanner)(e.getText(),!0);function a(e,t){return o.setPosition(e),o.scan()===t?o.getTokenOffset()+o.getTokenLength():-1}return t.map((function(t){let o=e.offsetAt(t),r=n.getNodeFromOffset(o,!0);const c=[];for(;r;){switch(r.type){case"string":case"object":case"array":const e=r.offset+1,t=r.offset+r.length-1;e<t&&o>=e&&o<=t&&c.push(s(e,t)),c.push(s(r.offset,r.offset+r.length));break;case"number":case"boolean":case"null":case"property":c.push(s(r.offset,r.offset+r.length))}if("property"===r.type||r.parent&&"array"===r.parent.type){const e=a(r.offset+r.length,5);-1!==e&&c.push(s(r.offset,e))}r=r.parent}let g;for(let e=c.length-1;e>=0;e--)g=jsonLanguageTypes_1.SelectionRange.create(c[e],g);return g||(g=jsonLanguageTypes_1.SelectionRange.create(jsonLanguageTypes_1.Range.create(t,t))),g}))}exports.getSelectionRanges=getSelectionRanges;