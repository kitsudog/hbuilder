"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.findDocumentSymbols2=exports.findDocumentSymbols=void 0;const htmlLanguageTypes_1=require("../htmlLanguageTypes");function findDocumentSymbols(e,n){const o=[],t=findDocumentSymbols2(e,n);for(const e of t)i(e,void 0);return o;function i(n,t){var r;const l=htmlLanguageTypes_1.SymbolInformation.create(n.name,n.kind,n.range,e.uri,null==t?void 0:t.name);if(null!==(r=l.containerName)&&void 0!==r||(l.containerName=""),o.push(l),n.children)for(const e of n.children)i(e,n)}}function findDocumentSymbols2(e,n){const o=[];return n.roots.forEach((n=>{provideFileSymbolsInternal(e,n,o)})),o}function provideFileSymbolsInternal(e,n,o){const t=nodeToName(n),i=htmlLanguageTypes_1.Range.create(e.positionAt(n.start),e.positionAt(n.end)),r=htmlLanguageTypes_1.DocumentSymbol.create(t,void 0,htmlLanguageTypes_1.SymbolKind.Field,i,i);o.push(r),n.children.forEach((n=>{var o;null!==(o=r.children)&&void 0!==o||(r.children=[]),provideFileSymbolsInternal(e,n,r.children)}))}function nodeToName(e){let n=e.tag;if(e.attributes){const o=e.attributes.id,t=e.attributes.class;o&&(n+=`#${o.replace(/[\"\']/g,"")}`),t&&(n+=t.replace(/[\"\']/g,"").split(/\s+/).map((e=>`.${e}`)).join(""))}return n||"?"}exports.findDocumentSymbols=findDocumentSymbols,exports.findDocumentSymbols2=findDocumentSymbols2;