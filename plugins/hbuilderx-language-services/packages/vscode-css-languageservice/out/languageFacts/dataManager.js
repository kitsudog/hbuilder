"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,s,r){void 0===r&&(r=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,r,i)}:function(e,t,s,r){void 0===r&&(r=s),e[r]=t[s]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&__createBinding(t,e,s);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CSSDataManager=void 0;const objects=__importStar(require("../utils/objects")),webCustomData_1=require("../data/webCustomData"),dataProvider_1=require("./dataProvider"),colors_1=require("./colors"),core_1=require("../../../../core");class CSSDataManager{constructor(e){this.dataProviders=[],this._propertySet={},this._atDirectiveSet={},this._pseudoClassSet={},this._pseudoElementSet={},this._properties=[],this._atDirectives=[],this._pseudoClasses=[],this._pseudoElements=[],this.attributeExpectedMap=new Map,this.setDataProviders(!1!==(null==e?void 0:e.useDefaultDataProvider),(null==e?void 0:e.customDataProviders)||[])}setDataProviders(e,t){this.dataProviders=[],e&&this.dataProviders.push(new dataProvider_1.CSSDataProvider(webCustomData_1.cssData)),this.dataProviders.push(...t),this.collectData()}collectData(){this._propertySet={},this._atDirectiveSet={},this._pseudoClassSet={},this._pseudoElementSet={},this.dataProviders.forEach((e=>{e.provideProperties().forEach((e=>{this._propertySet[e.name]||(this._propertySet[e.name]=e)})),e.provideAtDirectives().forEach((e=>{this._atDirectiveSet[e.name]||(this._atDirectiveSet[e.name]=e)})),e.providePseudoClasses().forEach((e=>{this._pseudoClassSet[e.name]||(this._pseudoClassSet[e.name]=e)})),e.providePseudoElements().forEach((e=>{this._pseudoElementSet[e.name]||(this._pseudoElementSet[e.name]=e)}))})),this._properties=objects.values(this._propertySet),this._atDirectives=objects.values(this._atDirectiveSet),this._pseudoClasses=objects.values(this._pseudoClassSet),this._pseudoElements=objects.values(this._pseudoElementSet)}getProperty(e){return this._propertySet[e]}getAtDirective(e){return this._atDirectiveSet[e]}getPseudoClass(e){return this._pseudoClassSet[e]}getPseudoElement(e){return this._pseudoElementSet[e]}getProperties(){return this._properties}getAtDirectives(){return this._atDirectives}getPseudoClasses(){return this._pseudoClasses}getPseudoElements(){return this._pseudoElements}isKnownProperty(e){return e.toLowerCase()in this._propertySet}isStandardProperty(e){return this.isKnownProperty(e)&&(!this._propertySet[e.toLowerCase()].status||"standard"===this._propertySet[e.toLowerCase()].status)}isPropertyPlatformSupport(e){let t=core_1.SyntacticDiagnosticsTool.getInstance(),s=this.getProperty(e);return!s||t.uniPlatformCompletionSupport(null==s?void 0:s.uniPlatform)}checkInputIsInExpectedLists(e,t){let s=!1,r=null,{datas:i,syntaxCombination:o}=this.attributeExpectedMap.get(e);if(o.includes("color")){if(Object.keys(colors_1.colors).includes(t))return s=!0,{isConstColor:s,valueData:r};if(colors_1.colorKeywords[t])return r=colors_1.colorKeywords[t],{isConstColor:s,valueData:r}}return r=i.find((e=>e.name===t)),{isConstColor:s,valueData:r}}generateAListOfAttributeExpectedMap(){this.attributeExpectedMap.size||this._properties&&this._properties.forEach((e=>{var t;let s=[],r=[],i={syntaxCombination:s,datas:r};this.attributeExpectedMap.set(e.name,i),null===(t=e.restrictions)||void 0===t||t.map((e=>s.push(e))),e.values&&e.values.forEach((e=>r.push(e)))}))}}exports.CSSDataManager=CSSDataManager;