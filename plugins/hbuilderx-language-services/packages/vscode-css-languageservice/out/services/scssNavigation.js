"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,i,r)}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&__createBinding(t,e,s);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SCSSNavigation=void 0;const cssNavigation_1=require("./cssNavigation"),nodes=__importStar(require("../parser/cssNodes")),vscode_uri_1=require("vscode-uri"),strings_1=require("../utils/strings"),resources_1=require("../utils/resources");class SCSSNavigation extends cssNavigation_1.CSSNavigation{constructor(e){super(e)}isRawStringDocumentLinkNode(e){return super.isRawStringDocumentLinkNode(e)||e.type===nodes.NodeType.Use||e.type===nodes.NodeType.Forward}async resolveRelativeReference(e,t,s){if((0,strings_1.startsWith)(e,"sass:"))return;const i=await super.resolveRelativeReference(e,t,s);if(this.fileSystemProvider&&i&&0===(0,resources_1.extname)(i).length)try{const e=function(e){if(""===e.path)return;if(e.path.endsWith(".scss")||e.path.endsWith(".css"))return;if(e.path.endsWith("/"))return[e.with({path:e.path+"index.scss"}).toString(),e.with({path:e.path+"_index.scss"}).toString()];const t=e.path.split("/"),s=t[t.length-1],i=e.path.slice(0,-s.length);if(s.startsWith("_"))return e.path.endsWith(".scss")?void 0:[e.with({path:e.path+".scss"}).toString()];const r=s+".scss",n=t=>e.with({path:i+t}).toString(),a=n(r),o=n("_"+r),c=n(r.slice(0,-5)+"/index.scss"),u=n(r.slice(0,-5)+"/_index.scss"),d=n(r.slice(0,-5)+".css");return[a,o,c,u,d]}(vscode_uri_1.URI.parse(i));if(e)for(let t=0;t<e.length;t++)if(await this.fileExists(e[t]))return e[t];return}catch(e){}return i}}exports.SCSSNavigation=SCSSNavigation;