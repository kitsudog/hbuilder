"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Element=void 0;const arrays_1=require("../utils/arrays");class Element{constructor(e){this.fullPropertyName=e.getFullPropertyName().toLowerCase(),this.node=e}}function setSide(e,t,i,o){const a=e[t];a.value=i,i&&((0,arrays_1.includes)(a.properties,o)||a.properties.push(o))}function setAllSides(e,t,i){setSide(e,"top",t,i),setSide(e,"right",t,i),setSide(e,"bottom",t,i),setSide(e,"left",t,i)}function updateModelWithValue(e,t,i,o){"top"===t||"right"===t||"bottom"===t||"left"===t?setSide(e,t,i,o):setAllSides(e,i,o)}function updateModelWithList(e,t,i){switch(t.length){case 1:updateModelWithValue(e,void 0,t[0],i);break;case 2:updateModelWithValue(e,"top",t[0],i),updateModelWithValue(e,"bottom",t[0],i),updateModelWithValue(e,"right",t[1],i),updateModelWithValue(e,"left",t[1],i);break;case 3:updateModelWithValue(e,"top",t[0],i),updateModelWithValue(e,"right",t[1],i),updateModelWithValue(e,"left",t[1],i),updateModelWithValue(e,"bottom",t[2],i);break;case 4:updateModelWithValue(e,"top",t[0],i),updateModelWithValue(e,"right",t[1],i),updateModelWithValue(e,"bottom",t[2],i),updateModelWithValue(e,"left",t[3],i)}}function matches(e,t){for(let i of t)if(e.matches(i))return!0;return!1}function checkLineWidth(e,t=!0){return(!t||!matches(e,["initial","unset"]))&&0!==parseFloat(e.getText())}function checkLineWidthList(e,t=!0){return e.map((e=>checkLineWidth(e,t)))}function checkLineStyle(e,t=!0){return!matches(e,["none","hidden"])&&(!t||!matches(e,["initial","unset"]))}function checkLineStyleList(e,t=!0){return e.map((e=>checkLineStyle(e,t)))}function checkBorderShorthand(e){const t=e.getChildren();if(1===t.length){const e=t[0];return checkLineWidth(e)&&checkLineStyle(e)}for(const e of t){const t=e;if(!checkLineWidth(t,!1)||!checkLineStyle(t,!1))return!1}return!0}function calculateBoxModel(e){const t={top:{value:!1,properties:[]},right:{value:!1,properties:[]},bottom:{value:!1,properties:[]},left:{value:!1,properties:[]}};for(const i of e){const e=i.node.value;if(void 0!==e)switch(i.fullPropertyName){case"box-sizing":return{top:{value:!1,properties:[]},right:{value:!1,properties:[]},bottom:{value:!1,properties:[]},left:{value:!1,properties:[]}};case"width":t.width=i;break;case"height":t.height=i;break;default:const o=i.fullPropertyName.split("-");switch(o[0]){case"border":switch(o[1]){case void 0:case"top":case"right":case"bottom":case"left":switch(o[2]){case void 0:updateModelWithValue(t,o[1],checkBorderShorthand(e),i);break;case"width":updateModelWithValue(t,o[1],checkLineWidth(e,!1),i);break;case"style":updateModelWithValue(t,o[1],checkLineStyle(e,!0),i)}break;case"width":updateModelWithList(t,checkLineWidthList(e.getChildren(),!1),i);break;case"style":updateModelWithList(t,checkLineStyleList(e.getChildren(),!0),i)}break;case"padding":1===o.length?updateModelWithList(t,checkLineWidthList(e.getChildren(),!0),i):updateModelWithValue(t,o[1],checkLineWidth(e,!0),i)}}}return t}exports.Element=Element,exports.default=calculateBoxModel;