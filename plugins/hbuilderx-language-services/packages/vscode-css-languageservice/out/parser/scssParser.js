"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,s,r,t){void 0===t&&(t=r);var i=Object.getOwnPropertyDescriptor(s,r);i&&!("get"in i?!s.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return s[r]}}),Object.defineProperty(e,t,i)}:function(e,s,r,t){void 0===t&&(t=r),e[t]=s[r]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,s){Object.defineProperty(e,"default",{enumerable:!0,value:s})}:function(e,s){e.default=s}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(s,e,r);return __setModuleDefault(s,e),s};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SCSSParser=void 0;const scssScanner=__importStar(require("./scssScanner")),cssScanner_1=require("./cssScanner"),cssParser=__importStar(require("./cssParser")),nodes=__importStar(require("./cssNodes")),scssErrors_1=require("./scssErrors"),cssErrors_1=require("./cssErrors");class SCSSParser extends cssParser.Parser{constructor(){super(new scssScanner.SCSSScanner)}_parseStylesheetStatement(e=!1){return this.peek(cssScanner_1.TokenType.AtKeyword)?this._parseWarnAndDebug()||this._parseControlStatement()||this._parseMixinDeclaration()||this._parseMixinContent()||this._parseMixinReference()||this._parseFunctionDeclaration()||this._parseForward()||this._parseUse()||this._parseRuleset(e)||super._parseStylesheetAtStatement(e):this._parseRuleset(!0)||this._parseVariableDeclaration()}_parseImport(){if(!this.peekKeyword("@import"))return null;const e=this.create(nodes.Import);if(this.consumeToken(),!e.addChild(this._parseURILiteral())&&!e.addChild(this._parseStringLiteral()))return this.finish(e,cssErrors_1.ParseError.URIOrStringExpected);for(;this.accept(cssScanner_1.TokenType.Comma);)if(!e.addChild(this._parseURILiteral())&&!e.addChild(this._parseStringLiteral()))return this.finish(e,cssErrors_1.ParseError.URIOrStringExpected);return this.peek(cssScanner_1.TokenType.SemiColon)||this.peek(cssScanner_1.TokenType.EOF)||e.setMedialist(this._parseMediaQueryList()),this.finish(e)}_parseVariableDeclaration(e=[]){if(!this.peek(scssScanner.VariableName))return null;const s=this.create(nodes.VariableDeclaration);if(!s.setVariable(this._parseVariable()))return null;if(!this.accept(cssScanner_1.TokenType.Colon))return this.finish(s,cssErrors_1.ParseError.ColonExpected);if(this.prevToken&&(s.colonPosition=this.prevToken.offset),!s.setValue(this._parseExpr()))return this.finish(s,cssErrors_1.ParseError.VariableValueExpected,[],e);for(;this.peek(cssScanner_1.TokenType.Exclamation);)if(s.addChild(this._tryParsePrio()));else{if(this.consumeToken(),!this.peekRegExp(cssScanner_1.TokenType.Ident,/^(default|global)$/))return this.finish(s,cssErrors_1.ParseError.UnknownKeyword);this.consumeToken()}return this.peek(cssScanner_1.TokenType.SemiColon)&&(s.semicolonPosition=this.token.offset),this.finish(s)}_parseMediaContentStart(){return this._parseInterpolation()}_parseMediaFeatureName(){return this._parseModuleMember()||this._parseFunction()||this._parseIdent()||this._parseVariable()}_parseKeyframeSelector(){return this._tryParseKeyframeSelector()||this._parseControlStatement(this._parseKeyframeSelector.bind(this))||this._parseVariableDeclaration()||this._parseMixinContent()}_parseVariable(){if(!this.peek(scssScanner.VariableName))return null;const e=this.create(nodes.Variable);return this.consumeToken(),e}_parseModuleMember(){const e=this.mark(),s=this.create(nodes.Module);return s.setIdentifier(this._parseIdent([nodes.ReferenceType.Module]))?this.hasWhitespace()||!this.acceptDelim(".")||this.hasWhitespace()?(this.restoreAtMark(e),null):s.addChild(this._parseVariable()||this._parseFunction())?s:this.finish(s,cssErrors_1.ParseError.IdentifierOrVariableExpected):null}_parseIdent(e){if(!this.peek(cssScanner_1.TokenType.Ident)&&!this.peek(scssScanner.InterpolationFunction)&&!this.peekDelim("-"))return null;const s=this.create(nodes.Identifier);s.referenceTypes=e,s.isCustomProperty=this.peekRegExp(cssScanner_1.TokenType.Ident,/^--/);let r=!1;const t=()=>{const e=this.mark();return this.acceptDelim("-")&&(this.hasWhitespace()||this.acceptDelim("-"),this.hasWhitespace())?(this.restoreAtMark(e),null):this._parseInterpolation()};for(;(this.accept(cssScanner_1.TokenType.Ident)||s.addChild(t())||r&&this.acceptRegexp(/^[\w-]/))&&(r=!0,!this.hasWhitespace()););return r?this.finish(s):null}_parseTermExpression(){return this._parseModuleMember()||this._parseVariable()||this._parseSelectorCombinator()||super._parseTermExpression()}_parseInterpolation(){if(this.peek(scssScanner.InterpolationFunction)){const e=this.create(nodes.Interpolation);return this.consumeToken(),e.addChild(this._parseExpr())||this._parseSelectorCombinator()?this.accept(cssScanner_1.TokenType.CurlyR)?this.finish(e):this.finish(e,cssErrors_1.ParseError.RightCurlyExpected):this.accept(cssScanner_1.TokenType.CurlyR)?this.finish(e):this.finish(e,cssErrors_1.ParseError.ExpressionExpected)}return null}_parseOperator(){if(this.peek(scssScanner.EqualsOperator)||this.peek(scssScanner.NotEqualsOperator)||this.peek(scssScanner.GreaterEqualsOperator)||this.peek(scssScanner.SmallerEqualsOperator)||this.peekDelim(">")||this.peekDelim("<")||this.peekIdent("and")||this.peekIdent("or")||this.peekDelim("%")){const e=this.createNode(nodes.NodeType.Operator);return this.consumeToken(),this.finish(e)}return super._parseOperator()}_parseUnaryOperator(){if(this.peekIdent("not")){const e=this.create(nodes.Node);return this.consumeToken(),this.finish(e)}return super._parseUnaryOperator()}_parseRuleSetDeclaration(){return this.peek(cssScanner_1.TokenType.AtKeyword)?this._parseKeyframe()||this._parseImport()||this._parseMedia(!0)||this._parseFontFace()||this._parseWarnAndDebug()||this._parseControlStatement()||this._parseFunctionDeclaration()||this._parseExtends()||this._parseMixinReference()||this._parseMixinContent()||this._parseMixinDeclaration()||this._parseRuleset(!0)||this._parseSupports(!0)||super._parseRuleSetDeclarationAtStatement():this._parseVariableDeclaration()||this._tryParseRuleset(!0)||super._parseRuleSetDeclaration()}_parseDeclaration(e){const s=this._tryParseCustomPropertyDeclaration(e);if(s)return s;const r=this.create(nodes.Declaration);if(!r.setProperty(this._parseProperty()))return null;if(!this.accept(cssScanner_1.TokenType.Colon))return this.finish(r,cssErrors_1.ParseError.ColonExpected,[cssScanner_1.TokenType.Colon],e||[cssScanner_1.TokenType.SemiColon]);this.prevToken&&(r.colonPosition=this.prevToken.offset);let t=!1;if(r.setValue(this._parseExpr())&&(t=!0,r.addChild(this._parsePrio())),this.peek(cssScanner_1.TokenType.CurlyL))r.setNestedProperties(this._parseNestedProperties());else if(!t)return this.finish(r,cssErrors_1.ParseError.PropertyValueExpected);return this.peek(cssScanner_1.TokenType.SemiColon)&&(r.semicolonPosition=this.token.offset),this.finish(r)}_parseNestedProperties(){const e=this.create(nodes.NestedProperties);return this._parseBody(e,this._parseDeclaration.bind(this))}_parseExtends(){if(this.peekKeyword("@extend")){const e=this.create(nodes.ExtendsReference);if(this.consumeToken(),!e.getSelectors().addChild(this._parseSimpleSelector()))return this.finish(e,cssErrors_1.ParseError.SelectorExpected);for(;this.accept(cssScanner_1.TokenType.Comma);)e.getSelectors().addChild(this._parseSimpleSelector());return this.accept(cssScanner_1.TokenType.Exclamation)&&!this.acceptIdent("optional")?this.finish(e,cssErrors_1.ParseError.UnknownKeyword):this.finish(e)}return null}_parseSimpleSelectorBody(){return this._parseSelectorCombinator()||this._parseSelectorPlaceholder()||super._parseSimpleSelectorBody()}_parseSelectorCombinator(){if(this.peekDelim("&")){const e=this.createNode(nodes.NodeType.SelectorCombinator);for(this.consumeToken();!this.hasWhitespace()&&(this.acceptDelim("-")||this.accept(cssScanner_1.TokenType.Num)||this.accept(cssScanner_1.TokenType.Dimension)||e.addChild(this._parseIdent())||this.acceptDelim("&")););return this.finish(e)}return null}_parseSelectorPlaceholder(){if(this.peekDelim("%")){const e=this.createNode(nodes.NodeType.SelectorPlaceholder);return this.consumeToken(),this._parseIdent(),this.finish(e)}if(this.peekKeyword("@at-root")){const e=this.createNode(nodes.NodeType.SelectorPlaceholder);return this.consumeToken(),this.finish(e)}return null}_parseElementName(){const e=this.mark(),s=super._parseElementName();return s&&!this.hasWhitespace()&&this.peek(cssScanner_1.TokenType.ParenthesisL)?(this.restoreAtMark(e),null):s}_tryParsePseudoIdentifier(){return this._parseInterpolation()||super._tryParsePseudoIdentifier()}_parseWarnAndDebug(){if(!this.peekKeyword("@debug")&&!this.peekKeyword("@warn")&&!this.peekKeyword("@error"))return null;const e=this.createNode(nodes.NodeType.Debug);return this.consumeToken(),e.addChild(this._parseExpr()),this.finish(e)}_parseControlStatement(e=this._parseRuleSetDeclaration.bind(this)){return this.peek(cssScanner_1.TokenType.AtKeyword)?this._parseIfStatement(e)||this._parseForStatement(e)||this._parseEachStatement(e)||this._parseWhileStatement(e):null}_parseIfStatement(e){return this.peekKeyword("@if")?this._internalParseIfStatement(e):null}_internalParseIfStatement(e){const s=this.create(nodes.IfStatement);if(this.consumeToken(),!s.setExpression(this._parseExpr(!0)))return this.finish(s,cssErrors_1.ParseError.ExpressionExpected);if(this._parseBody(s,e),this.acceptKeyword("@else"))if(this.peekIdent("if"))s.setElseClause(this._internalParseIfStatement(e));else if(this.peek(cssScanner_1.TokenType.CurlyL)){const r=this.create(nodes.ElseStatement);this._parseBody(r,e),s.setElseClause(r)}return this.finish(s)}_parseForStatement(e){if(!this.peekKeyword("@for"))return null;const s=this.create(nodes.ForStatement);return this.consumeToken(),s.setVariable(this._parseVariable())?this.acceptIdent("from")?s.addChild(this._parseBinaryExpr())?this.acceptIdent("to")||this.acceptIdent("through")?s.addChild(this._parseBinaryExpr())?this._parseBody(s,e):this.finish(s,cssErrors_1.ParseError.ExpressionExpected,[cssScanner_1.TokenType.CurlyR]):this.finish(s,scssErrors_1.SCSSParseError.ThroughOrToExpected,[cssScanner_1.TokenType.CurlyR]):this.finish(s,cssErrors_1.ParseError.ExpressionExpected,[cssScanner_1.TokenType.CurlyR]):this.finish(s,scssErrors_1.SCSSParseError.FromExpected,[cssScanner_1.TokenType.CurlyR]):this.finish(s,cssErrors_1.ParseError.VariableNameExpected,[cssScanner_1.TokenType.CurlyR])}_parseEachStatement(e){if(!this.peekKeyword("@each"))return null;const s=this.create(nodes.EachStatement);this.consumeToken();const r=s.getVariables();if(!r.addChild(this._parseVariable()))return this.finish(s,cssErrors_1.ParseError.VariableNameExpected,[cssScanner_1.TokenType.CurlyR]);for(;this.accept(cssScanner_1.TokenType.Comma);)if(!r.addChild(this._parseVariable()))return this.finish(s,cssErrors_1.ParseError.VariableNameExpected,[cssScanner_1.TokenType.CurlyR]);return this.finish(r),this.acceptIdent("in")?s.addChild(this._parseExpr())?this._parseBody(s,e):this.finish(s,cssErrors_1.ParseError.ExpressionExpected,[cssScanner_1.TokenType.CurlyR]):this.finish(s,scssErrors_1.SCSSParseError.InExpected,[cssScanner_1.TokenType.CurlyR])}_parseWhileStatement(e){if(!this.peekKeyword("@while"))return null;const s=this.create(nodes.WhileStatement);return this.consumeToken(),s.addChild(this._parseBinaryExpr())?this._parseBody(s,e):this.finish(s,cssErrors_1.ParseError.ExpressionExpected,[cssScanner_1.TokenType.CurlyR])}_parseFunctionBodyDeclaration(){return this._parseVariableDeclaration()||this._parseReturnStatement()||this._parseWarnAndDebug()||this._parseControlStatement(this._parseFunctionBodyDeclaration.bind(this))}_parseFunctionDeclaration(){if(!this.peekKeyword("@function"))return null;const e=this.create(nodes.FunctionDeclaration);if(this.consumeToken(),!e.setIdentifier(this._parseIdent([nodes.ReferenceType.Function])))return this.finish(e,cssErrors_1.ParseError.IdentifierExpected,[cssScanner_1.TokenType.CurlyR]);if(!this.accept(cssScanner_1.TokenType.ParenthesisL))return this.finish(e,cssErrors_1.ParseError.LeftParenthesisExpected,[cssScanner_1.TokenType.CurlyR]);if(e.getParameters().addChild(this._parseParameterDeclaration()))for(;this.accept(cssScanner_1.TokenType.Comma)&&!this.peek(cssScanner_1.TokenType.ParenthesisR);)if(!e.getParameters().addChild(this._parseParameterDeclaration()))return this.finish(e,cssErrors_1.ParseError.VariableNameExpected);return this.accept(cssScanner_1.TokenType.ParenthesisR)?this._parseBody(e,this._parseFunctionBodyDeclaration.bind(this)):this.finish(e,cssErrors_1.ParseError.RightParenthesisExpected,[cssScanner_1.TokenType.CurlyR])}_parseReturnStatement(){if(!this.peekKeyword("@return"))return null;const e=this.createNode(nodes.NodeType.ReturnStatement);return this.consumeToken(),e.addChild(this._parseExpr())?this.finish(e):this.finish(e,cssErrors_1.ParseError.ExpressionExpected)}_parseMixinDeclaration(){if(!this.peekKeyword("@mixin"))return null;const e=this.create(nodes.MixinDeclaration);if(this.consumeToken(),!e.setIdentifier(this._parseIdent([nodes.ReferenceType.Mixin])))return this.finish(e,cssErrors_1.ParseError.IdentifierExpected,[cssScanner_1.TokenType.CurlyR]);if(this.accept(cssScanner_1.TokenType.ParenthesisL)){if(e.getParameters().addChild(this._parseParameterDeclaration()))for(;this.accept(cssScanner_1.TokenType.Comma)&&!this.peek(cssScanner_1.TokenType.ParenthesisR);)if(!e.getParameters().addChild(this._parseParameterDeclaration()))return this.finish(e,cssErrors_1.ParseError.VariableNameExpected);if(!this.accept(cssScanner_1.TokenType.ParenthesisR))return this.finish(e,cssErrors_1.ParseError.RightParenthesisExpected,[cssScanner_1.TokenType.CurlyR])}return this._parseBody(e,this._parseRuleSetDeclaration.bind(this))}_parseParameterDeclaration(){const e=this.create(nodes.FunctionParameter);return e.setIdentifier(this._parseVariable())?(this.accept(scssScanner.Ellipsis),this.accept(cssScanner_1.TokenType.Colon)&&!e.setDefaultValue(this._parseExpr(!0))?this.finish(e,cssErrors_1.ParseError.VariableValueExpected,[],[cssScanner_1.TokenType.Comma,cssScanner_1.TokenType.ParenthesisR]):this.finish(e)):null}_parseMixinContent(){if(!this.peekKeyword("@content"))return null;const e=this.create(nodes.MixinContentReference);if(this.consumeToken(),this.accept(cssScanner_1.TokenType.ParenthesisL)){if(e.getArguments().addChild(this._parseFunctionArgument()))for(;this.accept(cssScanner_1.TokenType.Comma)&&!this.peek(cssScanner_1.TokenType.ParenthesisR);)if(!e.getArguments().addChild(this._parseFunctionArgument()))return this.finish(e,cssErrors_1.ParseError.ExpressionExpected);if(!this.accept(cssScanner_1.TokenType.ParenthesisR))return this.finish(e,cssErrors_1.ParseError.RightParenthesisExpected)}return this.finish(e)}_parseMixinReference(){if(!this.peekKeyword("@include"))return null;const e=this.create(nodes.MixinReference);this.consumeToken();const s=this._parseIdent([nodes.ReferenceType.Mixin]);if(!e.setIdentifier(s))return this.finish(e,cssErrors_1.ParseError.IdentifierExpected,[cssScanner_1.TokenType.CurlyR]);if(!this.hasWhitespace()&&this.acceptDelim(".")&&!this.hasWhitespace()){const r=this._parseIdent([nodes.ReferenceType.Mixin]);if(!r)return this.finish(e,cssErrors_1.ParseError.IdentifierExpected,[cssScanner_1.TokenType.CurlyR]);const t=this.create(nodes.Module);s.referenceTypes=[nodes.ReferenceType.Module],t.setIdentifier(s),e.setIdentifier(r),e.addChild(t)}if(this.accept(cssScanner_1.TokenType.ParenthesisL)){if(e.getArguments().addChild(this._parseFunctionArgument()))for(;this.accept(cssScanner_1.TokenType.Comma)&&!this.peek(cssScanner_1.TokenType.ParenthesisR);)if(!e.getArguments().addChild(this._parseFunctionArgument()))return this.finish(e,cssErrors_1.ParseError.ExpressionExpected);if(!this.accept(cssScanner_1.TokenType.ParenthesisR))return this.finish(e,cssErrors_1.ParseError.RightParenthesisExpected)}return(this.peekIdent("using")||this.peek(cssScanner_1.TokenType.CurlyL))&&e.setContent(this._parseMixinContentDeclaration()),this.finish(e)}_parseMixinContentDeclaration(){const e=this.create(nodes.MixinContentDeclaration);if(this.acceptIdent("using")){if(!this.accept(cssScanner_1.TokenType.ParenthesisL))return this.finish(e,cssErrors_1.ParseError.LeftParenthesisExpected,[cssScanner_1.TokenType.CurlyL]);if(e.getParameters().addChild(this._parseParameterDeclaration()))for(;this.accept(cssScanner_1.TokenType.Comma)&&!this.peek(cssScanner_1.TokenType.ParenthesisR);)if(!e.getParameters().addChild(this._parseParameterDeclaration()))return this.finish(e,cssErrors_1.ParseError.VariableNameExpected);if(!this.accept(cssScanner_1.TokenType.ParenthesisR))return this.finish(e,cssErrors_1.ParseError.RightParenthesisExpected,[cssScanner_1.TokenType.CurlyL])}return this.peek(cssScanner_1.TokenType.CurlyL)&&this._parseBody(e,this._parseMixinReferenceBodyStatement.bind(this)),this.finish(e)}_parseMixinReferenceBodyStatement(){return this._tryParseKeyframeSelector()||this._parseRuleSetDeclaration()}_parseFunctionArgument(){const e=this.create(nodes.FunctionArgument),s=this.mark(),r=this._parseVariable();if(r)if(this.accept(cssScanner_1.TokenType.Colon))e.setIdentifier(r);else{if(this.accept(scssScanner.Ellipsis))return e.setValue(r),this.finish(e);this.restoreAtMark(s)}return e.setValue(this._parseExpr(!0))?(this.accept(scssScanner.Ellipsis),e.addChild(this._parsePrio()),this.finish(e)):e.setValue(this._tryParsePrio())?this.finish(e):null}_parseURLArgument(){const e=this.mark(),s=super._parseURLArgument();if(!s||!this.peek(cssScanner_1.TokenType.ParenthesisR)){this.restoreAtMark(e);const s=this.create(nodes.Node);return s.addChild(this._parseBinaryExpr()),this.finish(s)}return s}_parseOperation(){if(!this.peek(cssScanner_1.TokenType.ParenthesisL))return null;const e=this.create(nodes.Node);for(this.consumeToken();e.addChild(this._parseListElement());)this.accept(cssScanner_1.TokenType.Comma);return this.accept(cssScanner_1.TokenType.ParenthesisR)?this.finish(e):this.finish(e,cssErrors_1.ParseError.RightParenthesisExpected)}_parseListElement(){const e=this.create(nodes.ListEntry),s=this._parseBinaryExpr();if(!s)return null;if(this.accept(cssScanner_1.TokenType.Colon)){if(e.setKey(s),!e.setValue(this._parseBinaryExpr()))return this.finish(e,cssErrors_1.ParseError.ExpressionExpected)}else e.setValue(s);return this.finish(e)}_parseUse(){if(!this.peekKeyword("@use"))return null;const e=this.create(nodes.Use);if(this.consumeToken(),!e.addChild(this._parseStringLiteral()))return this.finish(e,cssErrors_1.ParseError.StringLiteralExpected);if(!this.peek(cssScanner_1.TokenType.SemiColon)&&!this.peek(cssScanner_1.TokenType.EOF)){if(!this.peekRegExp(cssScanner_1.TokenType.Ident,/as|with/))return this.finish(e,cssErrors_1.ParseError.UnknownKeyword);if(this.acceptIdent("as")&&!e.setIdentifier(this._parseIdent([nodes.ReferenceType.Module]))&&!this.acceptDelim("*"))return this.finish(e,cssErrors_1.ParseError.IdentifierOrWildcardExpected);if(this.acceptIdent("with")){if(!this.accept(cssScanner_1.TokenType.ParenthesisL))return this.finish(e,cssErrors_1.ParseError.LeftParenthesisExpected,[cssScanner_1.TokenType.ParenthesisR]);if(!e.getParameters().addChild(this._parseModuleConfigDeclaration()))return this.finish(e,cssErrors_1.ParseError.VariableNameExpected);for(;this.accept(cssScanner_1.TokenType.Comma)&&!this.peek(cssScanner_1.TokenType.ParenthesisR);)if(!e.getParameters().addChild(this._parseModuleConfigDeclaration()))return this.finish(e,cssErrors_1.ParseError.VariableNameExpected);if(!this.accept(cssScanner_1.TokenType.ParenthesisR))return this.finish(e,cssErrors_1.ParseError.RightParenthesisExpected)}}return this.accept(cssScanner_1.TokenType.SemiColon)||this.accept(cssScanner_1.TokenType.EOF)?this.finish(e):this.finish(e,cssErrors_1.ParseError.SemiColonExpected)}_parseModuleConfigDeclaration(){const e=this.create(nodes.ModuleConfiguration);return e.setIdentifier(this._parseVariable())?this.accept(cssScanner_1.TokenType.Colon)&&e.setValue(this._parseExpr(!0))?!this.accept(cssScanner_1.TokenType.Exclamation)||!this.hasWhitespace()&&this.acceptIdent("default")?this.finish(e):this.finish(e,cssErrors_1.ParseError.UnknownKeyword):this.finish(e,cssErrors_1.ParseError.VariableValueExpected,[],[cssScanner_1.TokenType.Comma,cssScanner_1.TokenType.ParenthesisR]):null}_parseForward(){if(!this.peekKeyword("@forward"))return null;const e=this.create(nodes.Forward);if(this.consumeToken(),!e.addChild(this._parseStringLiteral()))return this.finish(e,cssErrors_1.ParseError.StringLiteralExpected);if(this.acceptIdent("with")){if(!this.accept(cssScanner_1.TokenType.ParenthesisL))return this.finish(e,cssErrors_1.ParseError.LeftParenthesisExpected,[cssScanner_1.TokenType.ParenthesisR]);if(!e.getParameters().addChild(this._parseModuleConfigDeclaration()))return this.finish(e,cssErrors_1.ParseError.VariableNameExpected);for(;this.accept(cssScanner_1.TokenType.Comma)&&!this.peek(cssScanner_1.TokenType.ParenthesisR);)if(!e.getParameters().addChild(this._parseModuleConfigDeclaration()))return this.finish(e,cssErrors_1.ParseError.VariableNameExpected);if(!this.accept(cssScanner_1.TokenType.ParenthesisR))return this.finish(e,cssErrors_1.ParseError.RightParenthesisExpected)}if(!this.peek(cssScanner_1.TokenType.SemiColon)&&!this.peek(cssScanner_1.TokenType.EOF)){if(!this.peekRegExp(cssScanner_1.TokenType.Ident,/as|hide|show/))return this.finish(e,cssErrors_1.ParseError.UnknownKeyword);if(this.acceptIdent("as")){const s=this._parseIdent([nodes.ReferenceType.Forward]);if(!e.setIdentifier(s))return this.finish(e,cssErrors_1.ParseError.IdentifierExpected);if(this.hasWhitespace()||!this.acceptDelim("*"))return this.finish(e,cssErrors_1.ParseError.WildcardExpected)}if((this.peekIdent("hide")||this.peekIdent("show"))&&!e.addChild(this._parseForwardVisibility()))return this.finish(e,cssErrors_1.ParseError.IdentifierOrVariableExpected)}return this.accept(cssScanner_1.TokenType.SemiColon)||this.accept(cssScanner_1.TokenType.EOF)?this.finish(e):this.finish(e,cssErrors_1.ParseError.SemiColonExpected)}_parseForwardVisibility(){const e=this.create(nodes.ForwardVisibility);for(e.setIdentifier(this._parseIdent());e.addChild(this._parseVariable()||this._parseIdent());)this.accept(cssScanner_1.TokenType.Comma);return e.getChildren().length>1?e:null}_parseSupportsCondition(){return this._parseInterpolation()||super._parseSupportsCondition()}}exports.SCSSParser=SCSSParser;