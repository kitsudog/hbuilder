"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Expression=exports.PageBoxMarginBox=exports.Page=exports.SupportsCondition=exports.MediaQuery=exports.Medialist=exports.Document=exports.Supports=exports.Media=exports.Namespace=exports.ForwardVisibility=exports.Forward=exports.ModuleConfiguration=exports.Use=exports.Import=exports.KeyframeSelector=exports.Keyframe=exports.NestedProperties=exports.FontFace=exports.ViewPort=exports.FunctionDeclaration=exports.ElseStatement=exports.WhileStatement=exports.EachStatement=exports.ForStatement=exports.IfStatement=exports.FunctionArgument=exports.FunctionParameter=exports.Function=exports.Invocation=exports.Property=exports.CustomPropertyDeclaration=exports.Declaration=exports.CustomPropertySet=exports.AbstractDeclaration=exports.AtApplyRule=exports.SimpleSelector=exports.Selector=exports.RuleSet=exports.BodyDeclaration=exports.Declarations=exports.Stylesheet=exports.Identifier=exports.Nodelist=exports.Node=exports.getParentDeclaration=exports.getNodePath=exports.getNodeAtOffset=exports.ReferenceType=exports.NodeType=void 0,exports.ParseErrorCollector=exports.Marker=exports.Level=exports.Module=exports.GuardCondition=exports.LessGuard=exports.ListEntry=exports.UnknownAtRule=exports.MixinDeclaration=exports.MixinReference=exports.MixinContentDeclaration=exports.MixinContentReference=exports.ExtendsReference=exports.Variable=exports.Interpolation=exports.VariableDeclaration=exports.NumericValue=exports.HexColorValue=exports.Operator=exports.AttributeSelector=exports.Term=exports.BinaryExpression=void 0;const strings_1=require("../utils/strings");var NodeType,ReferenceType;function getNodeAtOffset(e,t){let r=null;return!e||t<e.offset||t>e.end?null:(e.accept((e=>-1===e.offset&&-1===e.length||e.offset<=t&&e.end>=t&&(r?e.length<=r.length&&(r=e):r=e,!0))),r)}function getNodePath(e,t){let r=getNodeAtOffset(e,t);const s=[];for(;r;)s.unshift(r),r=r.parent;return s}function getParentDeclaration(e){const t=e.findParent(NodeType.Declaration),r=t&&t.getValue();return r&&r.encloses(e)?t:null}!function(e){e[e.Undefined=0]="Undefined",e[e.Identifier=1]="Identifier",e[e.Stylesheet=2]="Stylesheet",e[e.Ruleset=3]="Ruleset",e[e.Selector=4]="Selector",e[e.SimpleSelector=5]="SimpleSelector",e[e.SelectorInterpolation=6]="SelectorInterpolation",e[e.SelectorCombinator=7]="SelectorCombinator",e[e.SelectorCombinatorParent=8]="SelectorCombinatorParent",e[e.SelectorCombinatorSibling=9]="SelectorCombinatorSibling",e[e.SelectorCombinatorAllSiblings=10]="SelectorCombinatorAllSiblings",e[e.SelectorCombinatorShadowPiercingDescendant=11]="SelectorCombinatorShadowPiercingDescendant",e[e.Page=12]="Page",e[e.PageBoxMarginBox=13]="PageBoxMarginBox",e[e.ClassSelector=14]="ClassSelector",e[e.IdentifierSelector=15]="IdentifierSelector",e[e.ElementNameSelector=16]="ElementNameSelector",e[e.PseudoSelector=17]="PseudoSelector",e[e.AttributeSelector=18]="AttributeSelector",e[e.Declaration=19]="Declaration",e[e.Declarations=20]="Declarations",e[e.Property=21]="Property",e[e.Expression=22]="Expression",e[e.BinaryExpression=23]="BinaryExpression",e[e.Term=24]="Term",e[e.Operator=25]="Operator",e[e.Value=26]="Value",e[e.StringLiteral=27]="StringLiteral",e[e.URILiteral=28]="URILiteral",e[e.EscapedValue=29]="EscapedValue",e[e.Function=30]="Function",e[e.NumericValue=31]="NumericValue",e[e.HexColorValue=32]="HexColorValue",e[e.MixinDeclaration=33]="MixinDeclaration",e[e.MixinReference=34]="MixinReference",e[e.VariableName=35]="VariableName",e[e.VariableDeclaration=36]="VariableDeclaration",e[e.Prio=37]="Prio",e[e.Interpolation=38]="Interpolation",e[e.NestedProperties=39]="NestedProperties",e[e.ExtendsReference=40]="ExtendsReference",e[e.SelectorPlaceholder=41]="SelectorPlaceholder",e[e.Debug=42]="Debug",e[e.If=43]="If",e[e.Else=44]="Else",e[e.For=45]="For",e[e.Each=46]="Each",e[e.While=47]="While",e[e.MixinContentReference=48]="MixinContentReference",e[e.MixinContentDeclaration=49]="MixinContentDeclaration",e[e.Media=50]="Media",e[e.Keyframe=51]="Keyframe",e[e.FontFace=52]="FontFace",e[e.Import=53]="Import",e[e.Namespace=54]="Namespace",e[e.Invocation=55]="Invocation",e[e.FunctionDeclaration=56]="FunctionDeclaration",e[e.ReturnStatement=57]="ReturnStatement",e[e.MediaQuery=58]="MediaQuery",e[e.FunctionParameter=59]="FunctionParameter",e[e.FunctionArgument=60]="FunctionArgument",e[e.KeyframeSelector=61]="KeyframeSelector",e[e.ViewPort=62]="ViewPort",e[e.Document=63]="Document",e[e.AtApplyRule=64]="AtApplyRule",e[e.CustomPropertyDeclaration=65]="CustomPropertyDeclaration",e[e.CustomPropertySet=66]="CustomPropertySet",e[e.ListEntry=67]="ListEntry",e[e.Supports=68]="Supports",e[e.SupportsCondition=69]="SupportsCondition",e[e.NamespacePrefix=70]="NamespacePrefix",e[e.GridLine=71]="GridLine",e[e.Plugin=72]="Plugin",e[e.UnknownAtRule=73]="UnknownAtRule",e[e.Use=74]="Use",e[e.ModuleConfiguration=75]="ModuleConfiguration",e[e.Forward=76]="Forward",e[e.ForwardVisibility=77]="ForwardVisibility",e[e.Module=78]="Module"}(NodeType||(exports.NodeType=NodeType={})),function(e){e[e.Mixin=0]="Mixin",e[e.Rule=1]="Rule",e[e.Variable=2]="Variable",e[e.Function=3]="Function",e[e.Keyframe=4]="Keyframe",e[e.Unknown=5]="Unknown",e[e.Module=6]="Module",e[e.Forward=7]="Forward",e[e.ForwardVisibility=8]="ForwardVisibility"}(ReferenceType||(exports.ReferenceType=ReferenceType={})),exports.getNodeAtOffset=getNodeAtOffset,exports.getNodePath=getNodePath,exports.getParentDeclaration=getParentDeclaration;class Node{get end(){return this.offset+this.length}constructor(e=-1,t=-1,r){this.parent=null,this.offset=e,this.length=t,r&&(this.nodeType=r)}set type(e){this.nodeType=e}get type(){return this.nodeType||NodeType.Undefined}getTextProvider(){let e=this;for(;e&&!e.textProvider;)e=e.parent;return e?e.textProvider:()=>"unknown"}getText(){return this.getTextProvider()(this.offset,this.length)}matches(e){return this.length===e.length&&this.getTextProvider()(this.offset,this.length)===e}startsWith(e){return this.length>=e.length&&this.getTextProvider()(this.offset,e.length)===e}endsWith(e){return this.length>=e.length&&this.getTextProvider()(this.end-e.length,e.length)===e}accept(e){if(e(this)&&this.children)for(const t of this.children)t.accept(e)}acceptVisitor(e){this.accept(e.visitNode.bind(e))}adoptChild(e,t=-1){if(e.parent&&e.parent.children){const t=e.parent.children.indexOf(e);t>=0&&e.parent.children.splice(t,1)}e.parent=this;let r=this.children;return r||(r=this.children=[]),-1!==t?r.splice(t,0,e):r.push(e),e}attachTo(e,t=-1){return e&&e.adoptChild(this,t),this}collectIssues(e){this.issues&&e.push.apply(e,this.issues)}addIssue(e){this.issues||(this.issues=[]),this.issues.push(e)}hasIssue(e){return Array.isArray(this.issues)&&this.issues.some((t=>t.getRule()===e))}isErroneous(e=!1){return!!(this.issues&&this.issues.length>0)||e&&Array.isArray(this.children)&&this.children.some((e=>e.isErroneous(!0)))}setNode(e,t,r=-1){return!!t&&(t.attachTo(this,r),this[e]=t,!0)}addChild(e){return!!e&&(this.children||(this.children=[]),e.attachTo(this),this.updateOffsetAndLength(e),!0)}updateOffsetAndLength(e){(e.offset<this.offset||-1===this.offset)&&(this.offset=e.offset);const t=e.end;(t>this.end||-1===this.length)&&(this.length=t-this.offset)}hasChildren(){return!!this.children&&this.children.length>0}getChildren(){return this.children?this.children.slice(0):[]}getChild(e){return this.children&&e<this.children.length?this.children[e]:null}addChildren(e){for(const t of e)this.addChild(t)}findFirstChildBeforeOffset(e){if(this.children){let t=null;for(let r=this.children.length-1;r>=0;r--)if(t=this.children[r],t.offset<=e)return t}return null}findChildAtOffset(e,t){const r=this.findFirstChildBeforeOffset(e);return r&&r.end>=e?t&&r.findChildAtOffset(e,!0)||r:null}encloses(e){return this.offset<=e.offset&&this.offset+this.length>=e.offset+e.length}getParent(){let e=this.parent;for(;e instanceof Nodelist;)e=e.parent;return e}findParent(e){let t=this;for(;t&&t.type!==e;)t=t.parent;return t}findAParent(...e){let t=this;for(;t&&!e.some((e=>t.type===e));)t=t.parent;return t}setData(e,t){this.options||(this.options={}),this.options[e]=t}getData(e){return this.options&&this.options.hasOwnProperty(e)?this.options[e]:null}}exports.Node=Node;class Nodelist extends Node{constructor(e,t=-1){super(-1,-1),this.attachTo(e,t),this.offset=-1,this.length=-1}}exports.Nodelist=Nodelist;class Identifier extends Node{constructor(e,t){super(e,t),this.isCustomProperty=!1}get type(){return NodeType.Identifier}containsInterpolation(){return this.hasChildren()}}exports.Identifier=Identifier;class Stylesheet extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.Stylesheet}}exports.Stylesheet=Stylesheet;class Declarations extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.Declarations}}exports.Declarations=Declarations;class BodyDeclaration extends Node{constructor(e,t){super(e,t)}getDeclarations(){return this.declarations}setDeclarations(e){return this.setNode("declarations",e)}}exports.BodyDeclaration=BodyDeclaration;class RuleSet extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.Ruleset}getSelectors(){return this.selectors||(this.selectors=new Nodelist(this)),this.selectors}isNested(){return!!this.parent&&null!==this.parent.findParent(NodeType.Declarations)}}exports.RuleSet=RuleSet;class Selector extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.Selector}}exports.Selector=Selector;class SimpleSelector extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.SimpleSelector}}exports.SimpleSelector=SimpleSelector;class AtApplyRule extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.AtApplyRule}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}getName(){return this.identifier?this.identifier.getText():""}}exports.AtApplyRule=AtApplyRule;class AbstractDeclaration extends Node{constructor(e,t){super(e,t)}}exports.AbstractDeclaration=AbstractDeclaration;class CustomPropertySet extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.CustomPropertySet}}exports.CustomPropertySet=CustomPropertySet;class Declaration extends AbstractDeclaration{constructor(e,t){super(e,t),this.property=null}get type(){return NodeType.Declaration}setProperty(e){return this.setNode("property",e)}getProperty(){return this.property}getFullPropertyName(){const e=this.property?this.property.getName():"unknown";if(this.parent instanceof Declarations&&this.parent.getParent()instanceof NestedProperties){const t=this.parent.getParent().getParent();if(t instanceof Declaration)return t.getFullPropertyName()+e}return e}getNonPrefixedPropertyName(){const e=this.getFullPropertyName();if(e&&"-"===e.charAt(0)){const t=e.indexOf("-",1);if(-1!==t)return e.substring(t+1)}return e}setValue(e){return this.setNode("value",e)}getValue(){return this.value}setNestedProperties(e){return this.setNode("nestedProperties",e)}getNestedProperties(){return this.nestedProperties}}exports.Declaration=Declaration;class CustomPropertyDeclaration extends Declaration{constructor(e,t){super(e,t)}get type(){return NodeType.CustomPropertyDeclaration}setPropertySet(e){return this.setNode("propertySet",e)}getPropertySet(){return this.propertySet}}exports.CustomPropertyDeclaration=CustomPropertyDeclaration;class Property extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.Property}setIdentifier(e){return this.setNode("identifier",e)}getIdentifier(){return this.identifier}getName(){return(0,strings_1.trim)(this.getText(),/[_\+]+$/)}isCustomProperty(){return!!this.identifier&&this.identifier.isCustomProperty}}exports.Property=Property;class Invocation extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.Invocation}getArguments(){return this.arguments||(this.arguments=new Nodelist(this)),this.arguments}}exports.Invocation=Invocation;class Function extends Invocation{constructor(e,t){super(e,t)}get type(){return NodeType.Function}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}getName(){return this.identifier?this.identifier.getText():""}}exports.Function=Function;class FunctionParameter extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.FunctionParameter}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}getName(){return this.identifier?this.identifier.getText():""}setDefaultValue(e){return this.setNode("defaultValue",e,0)}getDefaultValue(){return this.defaultValue}}exports.FunctionParameter=FunctionParameter;class FunctionArgument extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.FunctionArgument}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}getName(){return this.identifier?this.identifier.getText():""}setValue(e){return this.setNode("value",e,0)}getValue(){return this.value}}exports.FunctionArgument=FunctionArgument;class IfStatement extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.If}setExpression(e){return this.setNode("expression",e,0)}setElseClause(e){return this.setNode("elseClause",e)}}exports.IfStatement=IfStatement;class ForStatement extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.For}setVariable(e){return this.setNode("variable",e,0)}}exports.ForStatement=ForStatement;class EachStatement extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.Each}getVariables(){return this.variables||(this.variables=new Nodelist(this)),this.variables}}exports.EachStatement=EachStatement;class WhileStatement extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.While}}exports.WhileStatement=WhileStatement;class ElseStatement extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.Else}}exports.ElseStatement=ElseStatement;class FunctionDeclaration extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.FunctionDeclaration}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}getName(){return this.identifier?this.identifier.getText():""}getParameters(){return this.parameters||(this.parameters=new Nodelist(this)),this.parameters}}exports.FunctionDeclaration=FunctionDeclaration;class ViewPort extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.ViewPort}}exports.ViewPort=ViewPort;class FontFace extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.FontFace}}exports.FontFace=FontFace;class NestedProperties extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.NestedProperties}}exports.NestedProperties=NestedProperties;class Keyframe extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.Keyframe}setKeyword(e){return this.setNode("keyword",e,0)}getKeyword(){return this.keyword}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}getName(){return this.identifier?this.identifier.getText():""}}exports.Keyframe=Keyframe;class KeyframeSelector extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.KeyframeSelector}}exports.KeyframeSelector=KeyframeSelector;class Import extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.Import}setMedialist(e){return!!e&&(e.attachTo(this),!0)}}exports.Import=Import;class Use extends Node{get type(){return NodeType.Use}getParameters(){return this.parameters||(this.parameters=new Nodelist(this)),this.parameters}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}}exports.Use=Use;class ModuleConfiguration extends Node{get type(){return NodeType.ModuleConfiguration}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}getName(){return this.identifier?this.identifier.getText():""}setValue(e){return this.setNode("value",e,0)}getValue(){return this.value}}exports.ModuleConfiguration=ModuleConfiguration;class Forward extends Node{get type(){return NodeType.Forward}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}getMembers(){return this.members||(this.members=new Nodelist(this)),this.members}getParameters(){return this.parameters||(this.parameters=new Nodelist(this)),this.parameters}}exports.Forward=Forward;class ForwardVisibility extends Node{get type(){return NodeType.ForwardVisibility}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}}exports.ForwardVisibility=ForwardVisibility;class Namespace extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.Namespace}}exports.Namespace=Namespace;class Media extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.Media}}exports.Media=Media;class Supports extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.Supports}}exports.Supports=Supports;class Document extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.Document}}exports.Document=Document;class Medialist extends Node{constructor(e,t){super(e,t)}getMediums(){return this.mediums||(this.mediums=new Nodelist(this)),this.mediums}}exports.Medialist=Medialist;class MediaQuery extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.MediaQuery}}exports.MediaQuery=MediaQuery;class SupportsCondition extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.SupportsCondition}}exports.SupportsCondition=SupportsCondition;class Page extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.Page}}exports.Page=Page;class PageBoxMarginBox extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.PageBoxMarginBox}}exports.PageBoxMarginBox=PageBoxMarginBox;class Expression extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.Expression}}exports.Expression=Expression;class BinaryExpression extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.BinaryExpression}setLeft(e){return this.setNode("left",e)}getLeft(){return this.left}setRight(e){return this.setNode("right",e)}getRight(){return this.right}setOperator(e){return this.setNode("operator",e)}getOperator(){return this.operator}}exports.BinaryExpression=BinaryExpression;class Term extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.Term}setOperator(e){return this.setNode("operator",e)}getOperator(){return this.operator}setExpression(e){return this.setNode("expression",e)}getExpression(){return this.expression}}exports.Term=Term;class AttributeSelector extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.AttributeSelector}setNamespacePrefix(e){return this.setNode("namespacePrefix",e)}getNamespacePrefix(){return this.namespacePrefix}setIdentifier(e){return this.setNode("identifier",e)}getIdentifier(){return this.identifier}setOperator(e){return this.setNode("operator",e)}getOperator(){return this.operator}setValue(e){return this.setNode("value",e)}getValue(){return this.value}}exports.AttributeSelector=AttributeSelector;class Operator extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.Operator}}exports.Operator=Operator;class HexColorValue extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.HexColorValue}}exports.HexColorValue=HexColorValue;const _dot=".".charCodeAt(0),_0="0".charCodeAt(0),_9="9".charCodeAt(0);class NumericValue extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.NumericValue}getValue(){const e=this.getText();let t,r=0;for(let s=0,o=e.length;s<o&&(t=e.charCodeAt(s),_0<=t&&t<=_9||t===_dot);s++)r+=1;return{value:e.substring(0,r),unit:r<e.length?e.substring(r):void 0}}}exports.NumericValue=NumericValue;class VariableDeclaration extends AbstractDeclaration{constructor(e,t){super(e,t),this.variable=null,this.value=null,this.needsSemicolon=!0}get type(){return NodeType.VariableDeclaration}setVariable(e){return!!e&&(e.attachTo(this),this.variable=e,!0)}getVariable(){return this.variable}getName(){return this.variable?this.variable.getName():""}setValue(e){return!!e&&(e.attachTo(this),this.value=e,!0)}getValue(){return this.value}}exports.VariableDeclaration=VariableDeclaration;class Interpolation extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.Interpolation}}exports.Interpolation=Interpolation;class Variable extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.VariableName}getName(){return this.getText()}}exports.Variable=Variable;class ExtendsReference extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.ExtendsReference}getSelectors(){return this.selectors||(this.selectors=new Nodelist(this)),this.selectors}}exports.ExtendsReference=ExtendsReference;class MixinContentReference extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.MixinContentReference}getArguments(){return this.arguments||(this.arguments=new Nodelist(this)),this.arguments}}exports.MixinContentReference=MixinContentReference;class MixinContentDeclaration extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.MixinContentReference}getParameters(){return this.parameters||(this.parameters=new Nodelist(this)),this.parameters}}exports.MixinContentDeclaration=MixinContentDeclaration;class MixinReference extends Node{constructor(e,t){super(e,t)}get type(){return NodeType.MixinReference}getNamespaces(){return this.namespaces||(this.namespaces=new Nodelist(this)),this.namespaces}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}getName(){return this.identifier?this.identifier.getText():""}getArguments(){return this.arguments||(this.arguments=new Nodelist(this)),this.arguments}setContent(e){return this.setNode("content",e)}getContent(){return this.content}}exports.MixinReference=MixinReference;class MixinDeclaration extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.MixinDeclaration}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}getName(){return this.identifier?this.identifier.getText():""}getParameters(){return this.parameters||(this.parameters=new Nodelist(this)),this.parameters}setGuard(e){return e&&(e.attachTo(this),this.guard=e),!1}}exports.MixinDeclaration=MixinDeclaration;class UnknownAtRule extends BodyDeclaration{constructor(e,t){super(e,t)}get type(){return NodeType.UnknownAtRule}setAtRuleName(e){this.atRuleName=e}getAtRuleName(){return this.atRuleName}}exports.UnknownAtRule=UnknownAtRule;class ListEntry extends Node{get type(){return NodeType.ListEntry}setKey(e){return this.setNode("key",e,0)}setValue(e){return this.setNode("value",e,1)}}exports.ListEntry=ListEntry;class LessGuard extends Node{getConditions(){return this.conditions||(this.conditions=new Nodelist(this)),this.conditions}}exports.LessGuard=LessGuard;class GuardCondition extends Node{setVariable(e){return this.setNode("variable",e)}}exports.GuardCondition=GuardCondition;class Module extends Node{get type(){return NodeType.Module}setIdentifier(e){return this.setNode("identifier",e,0)}getIdentifier(){return this.identifier}}var Level;exports.Module=Module,function(e){e[e.Ignore=1]="Ignore",e[e.Warning=2]="Warning",e[e.Error=4]="Error"}(Level||(exports.Level=Level={}));class Marker{constructor(e,t,r,s,o=e.offset,i=e.length){this.node=e,this.rule=t,this.level=r,this.message=s||t.message,this.offset=o,this.length=i}getRule(){return this.rule}getLevel(){return this.level}getOffset(){return this.offset}getLength(){return this.length}getNode(){return this.node}getMessage(){return this.message}}exports.Marker=Marker;class ParseErrorCollector{static entries(e){const t=new ParseErrorCollector;return e.acceptVisitor(t),t.entries}constructor(){this.entries=[]}visitNode(e){return e.isErroneous()&&e.collectIssues(this.entries),!0}}exports.ParseErrorCollector=ParseErrorCollector;