"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseResolveProcessor=void 0;const core_1=require("../../../../../../core"),serviceTypes_1=require("../../../../serviceTypes"),contextCompletionProcessor_1=require("../context/contextCompletionProcessor"),util_1=require("../utils/util");class BaseResolveProcessor{constructor(){this._tokenList=[]}doExtraResolve(e,t,o,r,s){this._tokenList=(0,contextCompletionProcessor_1.getTokenList)(t);const i=(0,contextCompletionProcessor_1.getCompletionTypeFromScanner)(t,o,this._tokenList);return r=this.getCompatibilityItem(e,i,r,s)}getData(e,t,o=!1,r){const s=t.provideProperties().find((t=>o?t.name===r.context:t.name===e.label));if(s){if(o){if(!s.values)return;const t=s.values.find((t=>t.name===e.label));if(!t)return;return t.uniPlatform}return s.uniPlatform}}getJsDoc(e){e.type="style";let t=[];try{t.push({name:"uniPlatform",text:[{kind:"text",text:JSON.stringify(e)}]})}catch(e){console.error(e)}return t}getCompatibilityItem(e,t,o,r){if(!t)return o;if(!(0,core_1.isUniAppXProject)(e)||!o.data)return o;const s=(0,util_1.styleIsRightCompletionType)(t,void 0,void 0,serviceTypes_1.NodeType.Value),i=(0,util_1.styleIsRightCompletionType)(t,void 0,void 0,serviceTypes_1.NodeType.Property),n="isExtStyle"===t.context;if(!s&&!i&&!n)return o;for(let e=0;e<r.length;e++){const i=r[e],n=this.getData(o,i,s,t);n&&(o.data.jsDoc=this.getJsDoc(n))}return o}}exports.BaseResolveProcessor=BaseResolveProcessor;