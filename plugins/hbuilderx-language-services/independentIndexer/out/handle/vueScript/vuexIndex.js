"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasVuexRef=exports.createVuexData=void 0;const tsserverlibrary_1=__importDefault(require("typescript/lib/tsserverlibrary")),vscode_languageserver_protocol_1=require("vscode-languageserver-protocol"),core_1=require("../../../../core");function createdVuexIndexValue(e,t,r,a){if(!tsserverlibrary_1.default.isStringLiteral(r))return;const s=r.text,n=e.positionAt(r.pos),i=e.positionAt(r.end),u=vscode_languageserver_protocol_1.Range.create(n,i),o=(0,core_1.getContextLineText)(e,u),c=core_1.targetUtils.indexGetTarget(e,u,t);return{value:s,lineText:o,kind:core_1.IndexItemType.DEF,range:u,context:a,platforms:c}}function hasVuexRef(e,t,r){if(r)return r;const a=tsserverlibrary_1.default.isStringLiteral(e),s=tsserverlibrary_1.default.isImportDeclaration(t);if(!a||!s)return r;return"vuex"===e.text&&(r=!0),r}function createVuexFunctionData(e,t,r,a,s,n){const i=tsserverlibrary_1.default.isIdentifier(r),u=tsserverlibrary_1.default.isCallExpression(a);if(!i||!u)return;const o=r,c=a;if(!tsserverlibrary_1.default.isIdentifier(c.expression))return;const l=c.expression;if(o.escapedText!==s)return;if(l.escapedText!==s)return;if(1!==c.arguments.length)return;const f=c.arguments[0];if(!tsserverlibrary_1.default.isArrayLiteralExpression(f))return;const x=f.elements,p=[];return x.forEach((r=>{const a=createdVuexIndexValue(e,t,r,n);a&&p.push(a)})),p}function createMutationsData(e,t,r,a){return createVuexFunctionData(e,t,r,a,"mapMutations","mutations")}function createActionsData(e,t,r,a){return createVuexFunctionData(e,t,r,a,"mapActions","actions")}function createVuexData(e,t,r,a){const s=createMutationsData(e,t,r,a),n=createActionsData(e,t,r,a),i=[];return s&&i.push(...s),n&&i.push(...n),i}exports.hasVuexRef=hasVuexRef,exports.createVuexData=createVuexData;