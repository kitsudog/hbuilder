"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProcessorsHandler=void 0;const fs=require("fs"),vscode_languageserver_textdocument_1=require("vscode-languageserver-textdocument"),core_1=require("../../../../core");class ProcessorsHandler{constructor(e,r,t){this._documents=e,this._processorManager=r}async createdIndexData(e,r){if(!this._documents)return;if(!this._processorManager)return;const t=this._processorManager.getAllProcessors();if(!t||0===t.length)return;let s=this._documents.get(r);if(!s){const e=(0,core_1.uriToPath)(r);if(!fs.existsSync(e))return;const t=fs.readFileSync(e).toString();s=vscode_languageserver_textdocument_1.TextDocument.create(r,"any",0,t)}const o=[];for(let r=0;r<t.length;r++){const n=t[r];if(!n.isSupportIndexer(e,s))continue;const c=await n.targetCreateIndexData(e,s);c&&o.push(c)}if(0===o.length)return;return(0,core_1.mergeIndexData)(o)}}exports.ProcessorsHandler=ProcessorsHandler;