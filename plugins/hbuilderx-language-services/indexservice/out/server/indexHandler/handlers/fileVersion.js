"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FileVersion=void 0;const fs=require("fs-extra"),core_1=require("../../../../../core");class FileVersion{constructor(){this._gFileVersionCache=new Map,this._projectVersion=0}get gFileVersionCache(){return this._gFileVersionCache}isFileVersionChange(e){const i=(0,core_1.noTsToNormalizedPath)(e);if(!i||!fs.existsSync(i))return!1;const r=fs.statSync(i);if(!this._gFileVersionCache.has(e))return this._gFileVersionCache.set(e,r.mtime.toISOString()),!0;if(this._gFileVersionCache.get(e)!==r.mtime.toISOString())return this._gFileVersionCache.set(e,r.mtime.toISOString()),!0;return!1}setFileVersion(e,i){this._gFileVersionCache.set(e,i)}getFileVersion(e){return this._gFileVersionCache.get(e)}deleteFileVersion(e){return this._gFileVersionCache.delete(e)}cleanGFileVersionCache(){this._gFileVersionCache.clear()}setProjectVersion(e){e&&(this._projectVersion=e)}getProjectVersion(){return this._projectVersion}}exports.FileVersion=FileVersion;