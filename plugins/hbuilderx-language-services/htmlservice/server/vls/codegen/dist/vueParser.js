"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createParser=void 0;const vue=__importStar(require("./vueScanner"));class VueParser{constructor(){this.onStartTagEvent=void 0,this.onEndTagEvent=void 0,this.onInterpolationEvent=void 0,this.onScriptEvent=void 0,this.onStyleEvent=void 0}onStartTag(e){this.onStartTagEvent=e}onEndTag(e){this.onEndTagEvent=e}onInterpolation(e){this.onInterpolationEvent=e}onScript(e){this.onScriptEvent=e}onStyle(e){this.onStyleEvent=e}parse(e){let t,n,a,r=vue.createScanner(e,0),o=r.scan();for(;o!=vue.TokenType.EOS;){switch(o){case vue.TokenType.StartTagOpen:break;case vue.TokenType.StartTag:t={name:s(r),attributes:[],isSelfCloseTag:!1};break;case vue.TokenType.StartTagClose:t&&this.onStartTagEvent&&this.onStartTagEvent(t);break;case vue.TokenType.StartTagSelfClose:t&&this.onStartTagEvent&&(t.isSelfCloseTag=!0,this.onStartTagEvent(t));break;case vue.TokenType.EndTagOpen:break;case vue.TokenType.EndTag:t={name:s(r),attributes:[],isSelfCloseTag:!1};break;case vue.TokenType.EndTagClose:t&&this.onEndTagEvent&&this.onEndTagEvent(t);break;case vue.TokenType.AttributeName:t&&(n={name:s(r)},t.attributes.push(n));break;case vue.TokenType.AttributeValue:if(t&&n){let e=s(r);(e.text.startsWith('"')&&e.text.endsWith('"')||e.text.startsWith("'")&&e.text.endsWith("'"))&&(e.text=e.text.substring(1,e.text.length-1),e.range={start:e.range.start+1,end:e.range.end-1}),n.value=e}break;case vue.TokenType.StartInterpolation:a={text:"",range:{start:r.getTokenOffset()+2,end:-1}};break;case vue.TokenType.EndInterpolation:a&&(a.range.end=r.getTokenOffset(),a.text=e.substring(a.range.start,a.range.end),this.onInterpolationEvent&&this.onInterpolationEvent(a),a=void 0);break;case vue.TokenType.Script:this.onScriptEvent&&this.onScriptEvent(s(r),t.attributes);break;case vue.TokenType.Styles:this.onStyleEvent&&this.onStyleEvent(s(r),t.attributes)}o=r.scan()}function s(e){return{text:e.getTokenText(),range:{start:e.getTokenOffset(),end:e.getTokenEnd()}}}}}function createParser(){return new VueParser}exports.createParser=createParser;