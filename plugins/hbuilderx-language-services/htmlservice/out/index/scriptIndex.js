"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getScriptIndex=void 0;const tsserverlibrary_1=__importDefault(require("typescript/lib/tsserverlibrary")),independentIndexer_1=require("../../../independentIndexer"),vueCheckIndex_1=require("./vueCheckIndex"),scriptIndexProcessor=new independentIndexer_1.ScriptIndexProcessor;async function getScriptIndex(e,r,t,i){const n=r.getText(),s=tsserverlibrary_1.default.createSourceFile("index.ts",n,tsserverlibrary_1.default.ScriptTarget.ESNext,!1,tsserverlibrary_1.default.ScriptKind.TS);let d=!1,c=!1;if(tsserverlibrary_1.default.forEachChildRecursively(s,(function(e,r){d=(0,vueCheckIndex_1.hasVueComponentIndexRef)(e,r,d),c=(0,vueCheckIndex_1.hasVueDirectiveIndexRef)(e,r,c)})),d||c){return await scriptIndexProcessor.createIndexData(e,r,t)}}exports.getScriptIndex=getScriptIndex;