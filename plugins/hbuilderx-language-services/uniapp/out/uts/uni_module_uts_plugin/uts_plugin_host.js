"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UTSPluginHost=void 0;const fs=require("fs"),hx=require("../../../../core"),core_1=require("../../../../core"),utsLanguageServiceInterface_1=require("../utsLanguageServiceInterface"),tsUtils_1=require("../../utils/tsUtils");class UTSPluginHost{constructor(e){this._info=e}log(e){this._info.tsinfo.project.log(e)}getProjectVersion(){return this._info.tsinfo.project.getProjectVersion()}getCompilationSettings(){return{...utsLanguageServiceInterface_1.UtsPluginLanguageService.DefaultUniappXCompilerOptions,noCustomResolve:!1}}getScriptFileNames(){return this._info.tsinfo.languageServiceHost.getScriptFileNames()}getScriptVersion(e){return this._info.tsinfo.languageServiceHost.getScriptVersion(e)}getScriptKind(e){return this._info.tsinfo.languageServiceHost.getScriptKind?this._info.tsinfo.languageServiceHost.getScriptKind(e):core_1.ts.ScriptKind.Deferred}getScriptSnapshot(e){return this._info.tsinfo.languageServiceHost.getScriptSnapshot(e)}getCurrentDirectory(){return this._info.tsinfo.languageServiceHost.getCurrentDirectory()}getDefaultLibFileName(e){return this._info.tsinfo.languageServiceHost.getDefaultLibFileName(e)}readFile(e,t){return this._info.tsinfo.languageServiceHost.readFile(e,t)}fileExists(e){var t;const i=null===(t=this._info.tsinfo.languageServiceHost.fileExists)||void 0===t?void 0:t.bind(this._info.tsinfo.languageServiceHost);return(null!=i?i:fs.existsSync)(e)}useCaseSensitiveFileNames(){return!1}resolveModuleNameLiterals(e,t,i,s,r,o){let n=hx.emptyResolvedModules(e);const l=this._info.project;for(let o=0;o<e.length;++o){const u=e[o],a=(0,tsUtils_1.fixTsNodeText)(u.getText(r));let g=hx.resolveModuleName(this._info.ts,l,a,t,s,{fileExists:this.fileExists.bind(this),readFile:this.readFile.bind(this)},void 0,i);g&&(n[o]={resolvedModule:{...g,extension:core_1.ts.extensionFromPath(g.resolvedFileName)}})}return n}removeFile(e,t,i){}}exports.UTSPluginHost=UTSPluginHost;