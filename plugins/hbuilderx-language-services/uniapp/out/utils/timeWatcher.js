"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimeWatcher=void 0;class RecordType{constructor(t){this._title=t,this._begin=Date.now(),this._end=null,this._children=[]}get id(){return this._begin+""}get parent(){return this._parent}get title(){return this._title}get begin(){return this._begin}get end(){return this._end}get children(){return this._children}push(t){t._parent=this,this._children.push(t)}finish(){this._end=Date.now()}toString(t=0){let e=[];return e.push(`${" ".repeat(t)}[B] [${this.title}] ${TimeWatcher.formatTime(this.begin)}`),this.children.forEach((r=>{e.push(r.toString(t+2))})),e.push(`${" ".repeat(t)}[E] [${this.title}] ${this.end?this.end-this.begin+" ms":"unfinished"}`),e.join("\n")}}class TimeWatcher{constructor(t){this._firstRecord=this._currentRecord=new RecordType(t||"on created")}startCollect(t){if(!TimeWatcher.switch)return;const e=new RecordType(t);this._currentRecord.push(e),this._currentRecord=e}endCollect(){TimeWatcher.switch&&(this._currentRecord.finish(),this._currentRecord=this._currentRecord.parent||this._currentRecord)}toString(){return TimeWatcher.switch?this._firstRecord.toString():""}static formatTime(t){let e=new Date(t);return`${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}:${e.getMilliseconds()}`}}exports.TimeWatcher=TimeWatcher,TimeWatcher.switch=!1;