!function(e,t){for(var n in t)e[n]=t[n];t.__esModule&&Object.defineProperty(e,"__esModule",{value:!0})}(exports,(()=>{var e={285:(e,t,n)=>{var r=n(173),i=r.FileSystem.require(),o=n(622);i.existsSync=i.existsSync||o.existsSync;var s=n(396),a=n(333);/^win/.test(process.platform),e.exports=function(e){var t=void 0,n="";if(e&&"string"==typeof e){if(!i.existsSync(e))throw new Error(r.Errors.INVALID_FILENAME);n=e,t=new a(e,r.Constants.FILE)}else t=e&&Buffer.isBuffer(e)?new a(e,r.Constants.BUFFER):new a(null,r.Constants.NONE);function c(e,t){e=o.resolve(o.normalize(e));for(var n=t.split("/"),r=0,i=n.length;r<i;r++){var s=o.normalize(o.join(e,n.slice(r,i).join(o.sep)));if(0===s.indexOf(e))return s}return o.normalize(o.join(e,o.basename(t)))}function l(e){var n;return e&&t&&("string"==typeof e&&(n=t.getEntry(e)),"object"==typeof e&&void 0!==e.entryName&&void 0!==e.header&&(n=t.getEntry(e.entryName)),n)?n:null}function u(e){return"/"!==(e=e.split("\\").join("/")).charAt(e.length-1)&&(e+="/"),e}return{readFile:function(e,t){var n=l(e);return n&&n.getData(t)||null},readFileAsync:function(e,t){var n=l(e);n?n.getDataAsync(t):t(null,"getEntry failed for:"+e)},readAsText:function(e,t){var n=l(e);if(n){var r=n.getData();if(r&&r.length)return r.toString(t||"utf8")}return""},readAsTextAsync:function(e,t,n){var r=l(e);r?r.getDataAsync((function(e,r){r?t(e,r):e&&e.length?t(e.toString(n||"utf8")):t("")})):t("")},deleteFile:function(e){var n=l(e);n&&t.deleteEntry(n.entryName)},addZipComment:function(e){t.comment=e},getZipComment:function(){return t.comment||""},addZipEntryComment:function(e,t){var n=l(e);n&&(n.comment=t)},getZipEntryComment:function(e){var t=l(e);return t&&t.comment||""},updateFile:function(e,t){var n=l(e);n&&n.setData(t)},addLocalFile:function(e,t,n,o){if(!i.existsSync(e))throw new Error(r.Errors.FILE_NOT_FOUND.replace("%s",e));{t=t?u(t):"";var s=e.split("\\").join("/").split("/").pop();t+=n||s;const r=i.statSync(e);this.addFile(t,i.readFileSync(e),o,r)}},addLocalFolder:function(e,t,n){var s;if(n instanceof RegExp?(s=n,n=function(e){return s.test(e)}):"function"!=typeof n&&(n=function(){return!0}),t=t?u(t):"",e=o.normalize(e),!i.existsSync(e))throw new Error(r.Errors.FILE_NOT_FOUND.replace("%s",e));var a=r.findFiles(e),c=this;a.length&&a.forEach((function(r){var s=o.relative(e,r).split("\\").join("/");n(s)&&(r.charAt(r.length-1)!==o.sep?c.addFile(t+s,i.readFileSync(r),"",i.statSync(r)):c.addFile(t+s+"/",Buffer.alloc(0),"",0))}))},addLocalFolderAsync:function(e,t,n,s){void 0===s?s=function(){return!0}:s instanceof RegExp&&(s=function(e){return function(t){return e.test(t)}}(s)),n?"/"!==(n=n.split("\\").join("/")).charAt(n.length-1)&&(n+="/"):n="","/"!==(e=(e=o.normalize(e)).split("\\").join("/")).charAt(e.length-1)&&(e+="/");var a=this;i.open(e,"r",(function(o,c){if(o&&"ENOENT"===o.code)t(void 0,r.Errors.FILE_NOT_FOUND.replace("%s",e));else if(o)t(void 0,o);else{var l=r.findFiles(e),u=-1,d=function(){if((u+=1)<l.length){var r=l[u].split("\\").join("/").replace(new RegExp(e.replace(/(\(|\))/g,"\\$1"),"i"),"");r=r.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),s(r)?"/"!==r.charAt(r.length-1)?i.readFile(l[u],(function(e,i){e?t(void 0,e):(a.addFile(n+r,i,"",0),d())})):(a.addFile(n+r,Buffer.alloc(0),"",0),d()):d()}else t(!0,void 0)};d()}}))},addFile:function(e,n,r,o){var a=new s;a.entryName=e,a.comment=r||"";var c="object"==typeof o&&o instanceof i.Stats;c&&(a.header.time=o.mtime);var l=a.isDirectory?16:0;if("win32"!==process.platform){var u=a.isDirectory?16384:32768;l=(l|(u|=c?4095&o.mode:"number"==typeof o?4095&o:a.isDirectory?493:420)<<16)>>>0}a.attr=l,a.setData(n),t.setEntry(a)},getEntries:function(){return t?t.entries:[]},getEntry:function(e){return l(e)},getEntryCount:function(){return t.getEntryCount()},forEach:function(e){return t.forEach(e)},extractEntryTo:function(e,n,s,a,u){a=a||!1,s=void 0===s||s;var d=l(e);if(!d)throw new Error(r.Errors.NO_ENTRY);var f=d.entryName,p=c(n,u&&!d.isDirectory?u:s?f:o.basename(f));if(d.isDirectory)return p=o.resolve(p,".."),t.getEntryChildren(d).forEach((function(e){if(!e.isDirectory){var t=e.getData();if(!t)throw new Error(r.Errors.CANT_EXTRACT_FILE);var i=c(n,s?e.entryName:o.basename(e.entryName));r.writeFileTo(i,t,a)}})),!0;var h=d.getData();if(!h)throw new Error(r.Errors.CANT_EXTRACT_FILE);if(i.existsSync(p)&&!a)throw new Error(r.Errors.CANT_OVERRIDE);return r.writeFileTo(p,h,a),!0},test:function(e){if(!t)return!1;for(var n in t.entries)try{if(n.isDirectory)continue;if(!t.entries[n].getData(e))return!1}catch(e){return!1}return!0},extractAllTo:function(e,n,o){if(n=n||!1,!t)throw new Error(r.Errors.NO_ZIP);t.entries.forEach((function(t){var s=c(e,t.entryName.toString());if(t.isDirectory)r.makeDir(s);else{var a=t.getData(o);if(!a)throw new Error(r.Errors.CANT_EXTRACT_FILE);r.writeFileTo(s,a,n);try{i.utimesSync(s,t.header.time,t.header.time)}catch(e){throw new Error(r.Errors.CANT_EXTRACT_FILE)}}}))},extractAllToAsync:function(e,n,s){if(s||(s=function(){}),n=n||!1,t){var a=t.entries,l=a.length;a.forEach((function(t){if(!(l<=0)){var a=o.normalize(t.entryName.toString());if(t.isDirectory)return r.makeDir(c(e,a)),void(0==--l&&s(void 0));t.getDataAsync((function(u,d){if(!(l<=0)){if(!d)return u?void r.writeFileToAsync(c(e,a),u,n,(function(n){try{i.utimesSync(o.resolve(e,a),t.header.time,t.header.time)}catch(e){s(new Error("Unable to set utimes"))}if(!(l<=0))return n?void(0==--l&&s(void 0)):(l=0,void s(new Error("Unable to write")))})):(l=0,void s(new Error(r.Errors.CANT_EXTRACT_FILE)));s(new Error(d))}}))}}))}else s(new Error(r.Errors.NO_ZIP))},writeZip:function(e,i){if(1===arguments.length&&"function"==typeof e&&(i=e,e=""),!e&&n&&(e=n),e){var o=t.compressToBuffer();if(o){var s=r.writeFileTo(e,o,!0);"function"==typeof i&&i(s?null:new Error("failed"),"")}}},toBuffer:function(e,n,r,i){return this.valueOf=2,"function"==typeof e?(t.toAsyncBuffer(e,n,r,i),null):t.compressToBuffer()}}}},907:(e,t,n)=>{var r=n(173),i=r.Constants;e.exports=function(){var e=20,t=10,n=0,o=0,s=0,a=0,c=0,l=0,u=0,d=0,f=0,p=0,h=0,g=0,m=0;switch(process.platform){case"win32":e|=2560;case"darwin":e|=4864;default:e|=768}var y={};function E(e){e=new Date(e),s=(e.getFullYear()-1980&127)<<25|e.getMonth()+1<<21|e.getDate()<<16|e.getHours()<<11|e.getMinutes()<<5|e.getSeconds()>>1}return E(+new Date),{get made(){return e},set made(t){e=t},get version(){return t},set version(e){t=e},get flags(){return n},set flags(e){n=e},get method(){return o},set method(e){switch(e){case i.STORED:this.version=10;case i.DEFLATED:default:this.version=20}o=e},get time(){return new Date(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1)},set time(e){E(e)},get crc(){return a},set crc(e){a=e},get compressedSize(){return c},set compressedSize(e){c=e},get size(){return l},set size(e){l=e},get fileNameLength(){return u},set fileNameLength(e){u=e},get extraLength(){return d},set extraLength(e){d=e},get commentLength(){return f},set commentLength(e){f=e},get diskNumStart(){return p},set diskNumStart(e){p=e},get inAttr(){return h},set inAttr(e){h=e},get attr(){return g},set attr(e){g=e},get offset(){return m},set offset(e){m=e},get encripted(){return 1==(1&n)},get entryHeaderSize(){return i.CENHDR+u+d+f},get realDataOffset(){return m+i.LOCHDR+y.fnameLen+y.extraLen},get dataHeader(){return y},loadDataHeaderFromBinary:function(e){var t=e.slice(m,m+i.LOCHDR);if(t.readUInt32LE(0)!==i.LOCSIG)throw new Error(r.Errors.INVALID_LOC);y={version:t.readUInt16LE(i.LOCVER),flags:t.readUInt16LE(i.LOCFLG),method:t.readUInt16LE(i.LOCHOW),time:t.readUInt32LE(i.LOCTIM),crc:t.readUInt32LE(i.LOCCRC),compressedSize:t.readUInt32LE(i.LOCSIZ),size:t.readUInt32LE(i.LOCLEN),fnameLen:t.readUInt16LE(i.LOCNAM),extraLen:t.readUInt16LE(i.LOCEXT)}},loadFromBinary:function(y){if(y.length!==i.CENHDR||y.readUInt32LE(0)!==i.CENSIG)throw new Error(r.Errors.INVALID_CEN);e=y.readUInt16LE(i.CENVEM),t=y.readUInt16LE(i.CENVER),n=y.readUInt16LE(i.CENFLG),o=y.readUInt16LE(i.CENHOW),s=y.readUInt32LE(i.CENTIM),a=y.readUInt32LE(i.CENCRC),c=y.readUInt32LE(i.CENSIZ),l=y.readUInt32LE(i.CENLEN),u=y.readUInt16LE(i.CENNAM),d=y.readUInt16LE(i.CENEXT),f=y.readUInt16LE(i.CENCOM),p=y.readUInt16LE(i.CENDSK),h=y.readUInt16LE(i.CENATT),g=y.readUInt32LE(i.CENATX),m=y.readUInt32LE(i.CENOFF)},dataHeaderToBinary:function(){var e=Buffer.alloc(i.LOCHDR);return e.writeUInt32LE(i.LOCSIG,0),e.writeUInt16LE(t,i.LOCVER),e.writeUInt16LE(n,i.LOCFLG),e.writeUInt16LE(o,i.LOCHOW),e.writeUInt32LE(s,i.LOCTIM),e.writeUInt32LE(a,i.LOCCRC),e.writeUInt32LE(c,i.LOCSIZ),e.writeUInt32LE(l,i.LOCLEN),e.writeUInt16LE(u,i.LOCNAM),e.writeUInt16LE(d,i.LOCEXT),e},entryHeaderToBinary:function(){var r=Buffer.alloc(i.CENHDR+u+d+f);return r.writeUInt32LE(i.CENSIG,0),r.writeUInt16LE(e,i.CENVEM),r.writeUInt16LE(t,i.CENVER),r.writeUInt16LE(n,i.CENFLG),r.writeUInt16LE(o,i.CENHOW),r.writeUInt32LE(s,i.CENTIM),r.writeUInt32LE(a,i.CENCRC),r.writeUInt32LE(c,i.CENSIZ),r.writeUInt32LE(l,i.CENLEN),r.writeUInt16LE(u,i.CENNAM),r.writeUInt16LE(d,i.CENEXT),r.writeUInt16LE(f,i.CENCOM),r.writeUInt16LE(p,i.CENDSK),r.writeUInt16LE(h,i.CENATT),r.writeUInt32LE(g,i.CENATX),r.writeUInt32LE(m,i.CENOFF),r.fill(0,i.CENHDR),r},toString:function(){return'{\n\t"made" : '+e+',\n\t"version" : '+t+',\n\t"flags" : '+n+',\n\t"method" : '+r.methodToString(o)+',\n\t"time" : '+this.time+',\n\t"crc" : 0x'+a.toString(16).toUpperCase()+',\n\t"compressedSize" : '+c+' bytes,\n\t"size" : '+l+' bytes,\n\t"fileNameLength" : '+u+',\n\t"extraLength" : '+d+' bytes,\n\t"commentLength" : '+f+' bytes,\n\t"diskNumStart" : '+p+',\n\t"inAttr" : '+h+',\n\t"attr" : '+g+',\n\t"offset" : '+m+',\n\t"entryHeaderSize" : '+(i.CENHDR+u+d+f)+" bytes\n}"}}}},854:(e,t,n)=>{t.EntryHeader=n(907),t.MainHeader=n(519)},519:(e,t,n)=>{var r=n(173),i=r.Constants;e.exports=function(){var e=0,t=0,n=0,o=0,s=0;return{get diskEntries(){return e},set diskEntries(n){e=t=n},get totalEntries(){return t},set totalEntries(n){t=e=n},get size(){return n},set size(e){n=e},get offset(){return o},set offset(e){o=e},get commentLength(){return s},set commentLength(e){s=e},get mainHeaderSize(){return i.ENDHDR+s},loadFromBinary:function(a){if((a.length!==i.ENDHDR||a.readUInt32LE(0)!==i.ENDSIG)&&(a.length<i.ZIP64HDR||a.readUInt32LE(0)!==i.ZIP64SIG))throw new Error(r.Errors.INVALID_END);a.readUInt32LE(0)===i.ENDSIG?(e=a.readUInt16LE(i.ENDSUB),t=a.readUInt16LE(i.ENDTOT),n=a.readUInt32LE(i.ENDSIZ),o=a.readUInt32LE(i.ENDOFF),s=a.readUInt16LE(i.ENDCOM)):(e=r.readBigUInt64LE(a,i.ZIP64SUB),t=r.readBigUInt64LE(a,i.ZIP64TOT),n=r.readBigUInt64LE(a,i.ZIP64SIZ),o=r.readBigUInt64LE(a,i.ZIP64OFF),s=0)},toBinary:function(){var r=Buffer.alloc(i.ENDHDR+s);return r.writeUInt32LE(i.ENDSIG,0),r.writeUInt32LE(0,4),r.writeUInt16LE(e,i.ENDSUB),r.writeUInt16LE(t,i.ENDTOT),r.writeUInt32LE(n,i.ENDSIZ),r.writeUInt32LE(o,i.ENDOFF),r.writeUInt16LE(s,i.ENDCOM),r.fill(" ",i.ENDHDR),r},toString:function(){return'{\n\t"diskEntries" : '+e+',\n\t"totalEntries" : '+t+',\n\t"size" : '+n+' bytes,\n\t"offset" : 0x'+o.toString(16).toUpperCase()+',\n\t"commentLength" : 0x'+s+"\n}"}}}},753:(e,t,n)=>{e.exports=function(e){var t=n(761),r={chunkSize:1024*(parseInt(e.length/1024)+1)};return{deflate:function(){return t.deflateRawSync(e,r)},deflateAsync:function(n){var i=t.createDeflateRaw(r),o=[],s=0;i.on("data",(function(e){o.push(e),s+=e.length})),i.on("end",(function(){var e=Buffer.alloc(s),t=0;e.fill(0);for(var r=0;r<o.length;r++){var i=o[r];i.copy(e,t),t+=i.length}n&&n(e)})),i.end(e)}}}},4:(e,t,n)=>{t.Deflater=n(753),t.Inflater=n(269),t.ZipCrypto=n(729)},269:(e,t,n)=>{e.exports=function(e){var t=n(761);return{inflate:function(){return t.inflateRawSync(e)},inflateAsync:function(n){var r=t.createInflateRaw(),i=[],o=0;r.on("data",(function(e){i.push(e),o+=e.length})),r.on("end",(function(){var e=Buffer.alloc(o),t=0;e.fill(0);for(var r=0;r<i.length;r++){var s=i[r];s.copy(e,t),t+=s.length}n&&n(e)})),r.end(e)}}}},729:e=>{const t=new Uint32Array(256).map(((e,t)=>{for(let e=0;e<8;e++)0!=(1&t)?t=t>>>1^3988292384:t>>>=1;return t>>>0}));e.exports={decrypt:function(e,n,r){if(!e||!Buffer.isBuffer(e)||e.length<12)return Buffer.alloc(0);const i=function(e){const n=(e,t)=>Math.imul(e,t)>>>0,r=new Uint32Array([305419896,591751049,878082192]),i=(e,n)=>t[255&(e^n)]^e>>>8,o=e=>{r[0]=i(r[0],e),r[1]+=255&r[0],r[1]=n(r[1],134775813)+1,r[2]=i(r[2],r[1]>>>24)},s=Buffer.isBuffer(e)?e:Buffer.from(e);for(let e=0;e<s.length;e++)o(s[e]);return function(e){if(!Buffer.isBuffer(e))throw"decrypter needs Buffer";const t=Buffer.alloc(e.length);let i=0;for(let s of e){const e=(2|r[2])>>>0;s^=n(e,1^e)>>8&255,t[i++]=s,o(s)}return t}}(r);if(n.crc>>>24!==i(e.slice(0,12))[11])throw"ADM-ZIP: Wrong Password";return i(e.slice(12))}}},991:e=>{e.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,FLG_ENC:0,FLG_COMP1:1,FLG_COMP2:2,FLG_DESC:4,FLG_ENH:8,FLG_STR:16,FLG_LNG:1024,FLG_MSK:4096,FILE:0,BUFFER:1,NONE:2,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}},190:e=>{e.exports={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed",FILE_IN_THE_WAY:"There is a file in the way: %s",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:"File not found: %s",NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found"}},455:(e,t,n)=>{var r=n(147).require(),i=n(622);r.existsSync=r.existsSync||i.existsSync,e.exports=function(e){var t=e||"",n={directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0},o=null;return t&&r.existsSync(t)?(o=r.statSync(t),n.directory=o.isDirectory(),n.mtime=o.mtime,n.atime=o.atime,n.executable=0!=(73&o.mode),n.readonly=0==(128&o.mode),n.hidden="."===i.basename(t)[0]):console.warn("Invalid path: "+t),{get directory(){return n.directory},get readOnly(){return n.readonly},get hidden(){return n.hidden},get mtime(){return n.mtime},get atime(){return n.atime},get executable(){return n.executable},decodeAttributes:function(e){},encodeAttributes:function(e){},toString:function(){return'{\n\t"path" : "'+t+',\n\t"isDirectory" : '+n.directory+',\n\t"isReadOnly" : '+n.readonly+',\n\t"isHidden" : '+n.hidden+',\n\t"isExecutable" : '+n.executable+',\n\t"mTime" : '+n.mtime+'\n\t"aTime" : '+n.atime+"\n}"}}}},147:(e,t,n)=>{t.require=function(){var e=n(747);if(process&&process.versions&&process.versions.electron)try{originalFs=n(503),Object.keys(originalFs).length>0&&(e=originalFs)}catch(e){}return e}},173:(e,t,n)=>{e.exports=n(646),e.exports.FileSystem=n(147),e.exports.Constants=n(991),e.exports.Errors=n(190),e.exports.FileAttr=n(455)},646:(e,t,n)=>{var r=n(147).require(),i=n(622);r.existsSync=r.existsSync||i.existsSync,e.exports=function(){var e=[],t=n(991),o=n(190),s=i.sep;function a(e){var t=e.split(s)[0];e.split(s).forEach((function(e){if(e&&":"!==e.substr(-1,1)){var n;t+=s+e;try{n=r.statSync(t)}catch(e){r.mkdirSync(t)}if(n&&n.isFile())throw o.FILE_IN_THE_WAY.replace("%s",t)}}))}function c(e,t,n){"boolean"==typeof t&&(n=t,t=void 0);var o=[];return r.readdirSync(e).forEach((function(a){var l=i.join(e,a);r.statSync(l).isDirectory()&&n&&(o=o.concat(c(l,t,n))),t&&!t.test(l)||o.push(i.normalize(l)+(r.statSync(l).isDirectory()?s:""))})),o}return{makeDir:function(e){a(e)},crc32:function(t){"string"==typeof t&&(t=Buffer.alloc(t.length,t));var n=Buffer.alloc(4);if(!e.length)for(var r=0;r<256;r++){for(var i=r,o=8;--o>=0;)0!=(1&i)?i=3988292384^i>>>1:i>>>=1;i<0&&(n.writeInt32LE(i,0),i=n.readUInt32LE(0)),e[r]=i}for(var s=0,a=0,c=t.length,l=~s;--c>=0;)l=e[255&(l^t[a++])]^l>>>8;return s=~l,n.writeInt32LE(4294967295&s,0),n.readUInt32LE(0)},methodToString:function(e){switch(e){case t.STORED:return"STORED ("+e+")";case t.DEFLATED:return"DEFLATED ("+e+")";default:return"UNSUPPORTED ("+e+")"}},writeFileTo:function(e,t,n,o){if(r.existsSync(e)){if(!n)return!1;if(r.statSync(e).isDirectory())return!1}var s,c=i.dirname(e);r.existsSync(c)||a(c);try{s=r.openSync(e,"w",438)}catch(t){r.chmodSync(e,438),s=r.openSync(e,"w",438)}if(s)try{r.writeSync(s,t,0,t.length,0)}catch(e){throw e}finally{r.closeSync(s)}return r.chmodSync(e,o||438),!0},writeFileToAsync:function(e,t,n,o,s){"function"==typeof o&&(s=o,o=void 0),r.exists(e,(function(c){if(c&&!n)return s(!1);r.stat(e,(function(n,l){if(c&&l.isDirectory())return s(!1);var u=i.dirname(e);r.exists(u,(function(n){n||a(u),r.open(e,"w",438,(function(n,i){n?r.chmod(e,438,(function(){r.open(e,"w",438,(function(n,i){r.write(i,t,0,t.length,0,(function(){r.close(i,(function(){r.chmod(e,o||438,(function(){s(!0)}))}))}))}))})):i?r.write(i,t,0,t.length,0,(function(){r.close(i,(function(){r.chmod(e,o||438,(function(){s(!0)}))}))})):r.chmod(e,o||438,(function(){s(!0)}))}))}))}))}))},findFiles:function(e){return c(e,!0)},getAttributes:function(e){},setAttributes:function(e){},toBuffer:function(e){return Buffer.isBuffer(e)?e:0===e.length?Buffer.alloc(0):Buffer.from(e,"utf8")},readBigUInt64LE:function(e,t){var n=Buffer.from(e.slice(t,t+8));return n.swap64(),parseInt(`0x${n.toString("hex")}`)},Constants:t,Errors:o}}()},396:(e,t,n)=>{var r=n(173),i=n(854),o=r.Constants,s=n(4);e.exports=function(e){var t=new i.EntryHeader,n=Buffer.alloc(0),a=Buffer.alloc(0),c=!1,l=null,u=Buffer.alloc(0);function d(){return e&&Buffer.isBuffer(e)?(t.loadDataHeaderFromBinary(e),e.slice(t.realDataOffset,t.realDataOffset+t.compressedSize)):Buffer.alloc(0)}function f(e){return 8==(8&t.flags)||r.crc32(e)===t.dataHeader.crc}function p(e,i,o){if(void 0===i&&"string"==typeof e&&(o=e,e=void 0),c)return e&&i&&i(Buffer.alloc(0),r.Errors.DIRECTORY_CONTENT_ERROR),Buffer.alloc(0);var a=d();if(0===a.length)return e&&i&&i(a),a;if(t.encripted){if("string"!=typeof o&&!Buffer.isBuffer(o))throw new Error("ADM-ZIP: Incompatible password parameter");a=s.ZipCrypto.decrypt(a,t,o)}var l=Buffer.alloc(t.size);switch(t.method){case r.Constants.STORED:if(a.copy(l),f(l))return e&&i&&i(l),l;throw e&&i&&i(l,r.Errors.BAD_CRC),new Error(r.Errors.BAD_CRC);case r.Constants.DEFLATED:var u=new s.Inflater(a);if(!e){if(u.inflate(l).copy(l,0),!f(l))throw new Error(r.Errors.BAD_CRC+" "+n.toString());return l}u.inflateAsync((function(e){e.copy(l,0),f(l)?i&&i(l):i&&i(l,r.Errors.BAD_CRC)}));break;default:throw e&&i&&i(Buffer.alloc(0),r.Errors.UNKNOWN_METHOD),new Error(r.Errors.UNKNOWN_METHOD)}}function h(n,i){if((!l||!l.length)&&Buffer.isBuffer(e))return n&&i&&i(d()),d();if(l.length&&!c){var o;switch(t.method){case r.Constants.STORED:return t.compressedSize=t.size,o=Buffer.alloc(l.length),l.copy(o),n&&i&&i(o),o;default:case r.Constants.DEFLATED:var a=new s.Deflater(l);if(!n){var u=a.deflate();return t.compressedSize=u.length,u}a.deflateAsync((function(e){o=Buffer.alloc(e.length),t.compressedSize=e.length,e.copy(o),i&&i(o)})),a=null}}else{if(!n||!i)return Buffer.alloc(0);i(Buffer.alloc(0))}}function g(e,t){return(e.readUInt32LE(t+4)<<4)+e.readUInt32LE(t)}function m(e){var n,r,i,s;e.length>=o.EF_ZIP64_SCOMP&&(n=g(e,o.EF_ZIP64_SUNCOMP),t.size===o.EF_ZIP64_OR_32&&(t.size=n)),e.length>=o.EF_ZIP64_RHO&&(r=g(e,o.EF_ZIP64_SCOMP),t.compressedSize===o.EF_ZIP64_OR_32&&(t.compressedSize=r)),e.length>=o.EF_ZIP64_DSN&&(i=g(e,o.EF_ZIP64_RHO),t.offset===o.EF_ZIP64_OR_32&&(t.offset=i)),e.length>=o.EF_ZIP64_DSN+4&&(s=e.readUInt32LE(o.EF_ZIP64_DSN),t.diskNumStart===o.EF_ZIP64_OR_16&&(t.diskNumStart=s))}return{get entryName(){return n.toString()},get rawEntryName(){return n},set entryName(e){var i=(n=r.toBuffer(e))[n.length-1];c=47===i||92===i,t.fileNameLength=n.length},get extra(){return u},set extra(e){u=e,t.extraLength=e.length,function(e){for(var t,n,r,i=0;i<e.length;)t=e.readUInt16LE(i),i+=2,n=e.readUInt16LE(i),i+=2,r=e.slice(i,i+n),i+=n,o.ID_ZIP64===t&&m(r)}(e)},get comment(){return a.toString()},set comment(e){a=r.toBuffer(e),t.commentLength=a.length},get name(){var e=n.toString();return c?e.substr(e.length-1).split("/").pop():e.split("/").pop()},get isDirectory(){return c},getCompressedData:function(){return h(!1,null)},getCompressedDataAsync:function(e){h(!0,e)},setData:function(e){l=r.toBuffer(e),!c&&l.length?(t.size=l.length,t.method=r.Constants.DEFLATED,t.crc=r.crc32(e),t.changed=!0):t.method=r.Constants.STORED},getData:function(e){return t.changed?l:p(!1,null,e)},getDataAsync:function(e,n){t.changed?e(l):p(!0,e,n)},set attr(e){t.attr=e},get attr(){return t.attr},set header(e){t.loadFromBinary(e)},get header(){return t},packHeader:function(){var e=t.entryHeaderToBinary();return n.copy(e,r.Constants.CENHDR),t.extraLength&&u.copy(e,r.Constants.CENHDR+n.length),t.commentLength&&a.copy(e,r.Constants.CENHDR+n.length+t.extraLength,a.length),e},toString:function(){return'{\n\t"entryName" : "'+n.toString()+'",\n\t"name" : "'+(c?n.toString().replace(/\/$/,"").split("/").pop():n.toString().split("/").pop())+'",\n\t"comment" : "'+a.toString()+'",\n\t"isDirectory" : '+c+',\n\t"header" : '+t.toString().replace(/\t/gm,"\t\t").replace(/}/gm,"\t}")+',\n\t"compressedData" : <'+(e&&e.length+" bytes buffer"||"null")+'>\n\t"data" : <'+(l&&l.length+" bytes buffer"||"null")+">\n}"}}}},333:(e,t,n)=>{var r=n(396),i=n(854),o=n(173);e.exports=function(e,t){var n=[],s={},a=Buffer.alloc(0),c="",l=o.FileSystem.require(),u=null,d=new i.MainHeader,f=!1;function p(){f=!0,s={},n=new Array(d.diskEntries);for(var e=d.offset,t=0;t<n.length;t++){var i=e,a=new r(u);a.header=u.slice(i,i+=o.Constants.CENHDR),a.entryName=u.slice(i,i+=a.header.fileNameLength),a.header.extraLength&&(a.extra=u.slice(i,i+=a.header.extraLength)),a.header.commentLength&&(a.comment=u.slice(i,i+a.header.commentLength)),e+=a.header.entryHeaderSize,n[t]=a,s[a.entryName]=a}}function h(){for(var e=u.length-o.Constants.ENDHDR,t=Math.max(0,e-65535),n=t,r=u.length,i=-1,s=0;e>=n;e--)if(80===u[e])if(u.readUInt32LE(e)!==o.Constants.ENDSIG)if(u.readUInt32LE(e)!==o.Constants.END64SIG){if(u.readUInt32LE(e)==o.Constants.ZIP64SIG){i=e,r=e+o.readBigUInt64LE(u,e+o.Constants.ZIP64SIZE)+o.Constants.ZIP64LEAD;break}}else n=t;else i=e,s=e,r=e+o.Constants.ENDHDR,n=e-o.Constants.END64HDR;if(!~i)throw new Error(o.Errors.INVALID_FORMAT);d.loadFromBinary(u.slice(i,r)),d.commentLength&&(a=u.slice(s+o.Constants.ENDHDR))}return t===o.Constants.FILE?(c=e,u=l.readFileSync(c),h()):t===o.Constants.BUFFER?(u=e,h()):f=!0,{get entries(){return f||p(),n},get comment(){return a.toString()},set comment(e){a=o.toBuffer(e),d.commentLength=a.length},getEntryCount:function(){return f?n.length:d.diskEntries},forEach:function(e){f?n.forEach(e):function(e){const t=d.diskEntries;let n=d.offset;for(let i=0;i<t;i++){let t=n;const i=new r(u);i.header=u.slice(t,t+=o.Constants.CENHDR),i.entryName=u.slice(t,t+=i.header.fileNameLength),n+=i.header.entryHeaderSize,e(i)}}(e)},getEntry:function(e){return f||p(),s[e]||null},setEntry:function(e){f||p(),n.push(e),s[e.entryName]=e,d.totalEntries=n.length},deleteEntry:function(e){f||p();var t=s[e];if(t&&t.isDirectory){var r=this;this.getEntryChildren(t).forEach((function(t){t.entryName!==e&&r.deleteEntry(t.entryName)}))}n.splice(n.indexOf(t),1),delete s[e],d.totalEntries=n.length},getEntryChildren:function(e){if(f||p(),e.isDirectory){var t=[],r=e.entryName,i=r.length;return n.forEach((function(e){e.entryName.substr(0,i)===r&&t.push(e)})),t}return[]},compressToBuffer:function(){f||p(),n.length>1&&n.sort((function(e,t){var n=e.entryName.toLowerCase(),r=t.entryName.toLowerCase();return n<r?-1:n>r?1:0}));var e=0,t=[],r=[],i=0;d.size=0,d.offset=0,n.forEach((function(n){var o=n.getCompressedData();n.header.offset=i;var s=n.header.dataHeaderToBinary(),a=n.rawEntryName.length,c=n.extra.toString(),l=Buffer.alloc(a+c.length);n.rawEntryName.copy(l,0),l.fill(c,a);var u=s.length+l.length+o.length;i+=u,t.push(s),t.push(l),t.push(o);var f=n.packHeader();r.push(f),d.size+=f.length,e+=u+f.length})),e+=d.mainHeaderSize,d.offset=i,i=0;var s=Buffer.alloc(e);t.forEach((function(e){e.copy(s,i),i+=e.length})),r.forEach((function(e){e.copy(s,i),i+=e.length}));var c=d.toBinary();return a&&Buffer.from(a).copy(c,o.Constants.ENDHDR),c.copy(s,i),s},toAsyncBuffer:function(e,t,r,i){f||p(),n.length>1&&n.sort((function(e,t){var n=e.entryName.toLowerCase(),r=t.entryName.toLowerCase();return n>r?-1:n<r?1:0}));var s=0,c=[],l=[],u=0;d.size=0,d.offset=0,function(t){var n=arguments.callee;if(t.length){var f=t.pop(),p=f.entryName+f.extra.toString();r&&r(p),f.getCompressedDataAsync((function(r){i&&i(p),f.header.offset=u;var h,g=f.header.dataHeaderToBinary();try{h=Buffer.alloc(p.length,p)}catch(e){h=new Buffer(p)}var m=g.length+h.length+r.length;u+=m,c.push(g),c.push(h),c.push(r);var y=f.packHeader();if(l.push(y),d.size+=y.length,s+=m+y.length,t.length)n(t);else{s+=d.mainHeaderSize,d.offset=u,u=0;var E=Buffer.alloc(s);c.forEach((function(e){e.copy(E,u),u+=e.length})),l.forEach((function(e){e.copy(E,u),u+=e.length}));var v=d.toBinary();a&&a.copy(v,o.Constants.ENDHDR),v.copy(E,u),e(E)}}))}}(n)}}}},35:function(e){e.exports=function(){"use strict";let e={};const t=new WeakMap;class n{constructor(n,r){r=Object.assign({units:"metric",precision:1},e,r),t.set(this,r);const i={metric:[{from:0,to:1e3,unit:"B",long:"bytes"},{from:1e3,to:1e6,unit:"kB",long:"kilobytes"},{from:1e6,to:1e9,unit:"MB",long:"megabytes"},{from:1e9,to:1e12,unit:"GB",long:"gigabytes"},{from:1e12,to:1e15,unit:"TB",long:"terabytes"},{from:1e15,to:1e18,unit:"PB",long:"petabytes"},{from:1e18,to:1e21,unit:"EB",long:"exabytes"},{from:1e21,to:1e24,unit:"ZB",long:"zettabytes"},{from:1e24,to:1e27,unit:"YB",long:"yottabytes"}],metric_octet:[{from:0,to:1e3,unit:"o",long:"octets"},{from:1e3,to:1e6,unit:"ko",long:"kilooctets"},{from:1e6,to:1e9,unit:"Mo",long:"megaoctets"},{from:1e9,to:1e12,unit:"Go",long:"gigaoctets"},{from:1e12,to:1e15,unit:"To",long:"teraoctets"},{from:1e15,to:1e18,unit:"Po",long:"petaoctets"},{from:1e18,to:1e21,unit:"Eo",long:"exaoctets"},{from:1e21,to:1e24,unit:"Zo",long:"zettaoctets"},{from:1e24,to:1e27,unit:"Yo",long:"yottaoctets"}],iec:[{from:0,to:Math.pow(1024,1),unit:"B",long:"bytes"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"KiB",long:"kibibytes"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"MiB",long:"mebibytes"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"GiB",long:"gibibytes"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"TiB",long:"tebibytes"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"PiB",long:"pebibytes"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"EiB",long:"exbibytes"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"ZiB",long:"zebibytes"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"YiB",long:"yobibytes"}],iec_octet:[{from:0,to:Math.pow(1024,1),unit:"o",long:"octets"},{from:Math.pow(1024,1),to:Math.pow(1024,2),unit:"Kio",long:"kibioctets"},{from:Math.pow(1024,2),to:Math.pow(1024,3),unit:"Mio",long:"mebioctets"},{from:Math.pow(1024,3),to:Math.pow(1024,4),unit:"Gio",long:"gibioctets"},{from:Math.pow(1024,4),to:Math.pow(1024,5),unit:"Tio",long:"tebioctets"},{from:Math.pow(1024,5),to:Math.pow(1024,6),unit:"Pio",long:"pebioctets"},{from:Math.pow(1024,6),to:Math.pow(1024,7),unit:"Eio",long:"exbioctets"},{from:Math.pow(1024,7),to:Math.pow(1024,8),unit:"Zio",long:"zebioctets"},{from:Math.pow(1024,8),to:Math.pow(1024,9),unit:"Yio",long:"yobioctets"}]};Object.assign(i,r.customUnits);const o=n<0?"-":"";n=Math.abs(n);const s=i[r.units];if(!s)throw new Error(`Invalid units specified: ${r.units}`);{const e=s.find((e=>n>=e.from&&n<e.to));if(e){const t=0===e.from?o+n:o+(n/e.from).toFixed(r.precision);this.value=t,this.unit=e.unit,this.long=e.long}else this.value=o+n,this.unit="",this.long=""}}toString(){const e=t.get(this);return e.toStringFn?e.toStringFn.bind(this)():`${this.value} ${this.unit}`}}function r(e,t){return new n(e,t)}return r.defaultOptions=function(t){e=t},r}()},247:function(e,t){var n,r;void 0===(r="function"==typeof(n=function(){var e=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function t(e){var t,n,r=e.replace(/^v/,"").replace(/\+.*$/,""),i=(n="-",-1===(t=r).indexOf(n)?t.length:t.indexOf(n)),o=r.substring(0,i).split(".");return o.push(r.substring(i+1)),o}function n(e){return isNaN(Number(e))?e:Number(e)}function r(t){if("string"!=typeof t)throw new TypeError("Invalid argument expected string");if(!e.test(t))throw new Error("Invalid argument not valid semver ('"+t+"' received)")}function i(e,i){[e,i].forEach(r);for(var o=t(e),s=t(i),a=0;a<Math.max(o.length-1,s.length-1);a++){var c=parseInt(o[a]||0,10),l=parseInt(s[a]||0,10);if(c>l)return 1;if(l>c)return-1}var u=o[o.length-1],d=s[s.length-1];if(u&&d){var f=u.split(".").map(n),p=d.split(".").map(n);for(a=0;a<Math.max(f.length,p.length);a++){if(void 0===f[a]||"string"==typeof p[a]&&"number"==typeof f[a])return-1;if(void 0===p[a]||"string"==typeof f[a]&&"number"==typeof p[a])return 1;if(f[a]>p[a])return 1;if(p[a]>f[a])return-1}}else if(u||d)return u?-1:1;return 0}var o=[">",">=","=","<","<="],s={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return i.validate=function(t){return"string"==typeof t&&e.test(t)},i.compare=function(e,t,n){!function(e){if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===o.indexOf(e))throw new TypeError("Invalid operator, expected one of "+o.join("|"))}(n);var r=i(e,t);return s[n].indexOf(r)>-1},i})?n.apply(t,[]):n)||(e.exports=r)},858:(e,t,n)=>{"use strict";n.r(t),n.d(t,{activate:()=>pt,deactivate:()=>ht});const r=require("hbuilderx");var i=n.n(r),o=n(622),s=n.n(o),a=n(747),c=n.n(a);const l=i().window.createOutputChannel("");function u(e){"string"==typeof e?e="[uni_modules] "+f(e):e.line="[uni_modules] "+f(e.line),l.appendLine(e)}const d={UserNotLogin:"当前功能需要登录HBuilderX",HostNotFoundError:"网络发生错误，请稍后重试！",OperationCanceledError:"网络发生错误，请稍后重试！",NoPermission:"检测到uni_modules插件代码被篡改，有可能存在安全隐患，解决此问题需要重新安装该插件或者HBuilderX。"};function f(e){return d[e]||e}function p(e){e=f(e),i().window.showErrorMessage(e,["确定"])}function h(e,t){e=f(e),i().window.showMessageBox({type:"error",title:"错误提示",text:e,buttons:["确定"]}).then((()=>{t&&t()}))}function g(e,t){"string"==typeof t?t="[插件:"+e+"] "+f(t):t.line="[插件:"+e+"] "+f(t.line),l.appendLine(t)}function m(e,t){if(!c().existsSync(t))return!1;const n=c().readdirSync(e),r=c().readdirSync(t);return!!n.find((e=>r.includes(e)))}const y=require("os");var E=n.n(y);const v=E().tmpdir(),w=s().resolve(v,"uni_modules/upload"),I=s().resolve(v,"uni_modules/download"),S=s().resolve(v,"uni_modules/cache"),C=s().resolve(v,"uni_modules/tmp");function _(){return s().resolve(C,String(Date.now()),"uni_modules")}function b(e,t,n=!0){return function(e,t,n={},r=!0){const o=i().http.request({url:"https://ext.liuyingyong.cn"+t,method:e,header:{token:"${user.checked.token}"},params:n}).then((({data:e})=>{const t=JSON.parse(e);if(t.ret)throw new Error(t.desc);return t.data}));return r?o.catch((e=>{p(e.error||e.message)})):o}("post",e,t,n)}function N(e){return e.length?b("/modules/download-dependencies",{dependencies:e.join(",")},!1).then((e=>{if(e)return e})):Promise.resolve([])}function D(e){return b("/modules/create-sn",{param:e},!1).then((e=>{if(e)return e}))}function L(e,t){void 0===t&&(t=!1);var n=e.length,r=0,i="",o=0,s=16,a=0,c=0,l=0,u=0,d=0;function f(t,n){for(var i=0,o=0;i<t||!n;){var s=e.charCodeAt(r);if(s>=48&&s<=57)o=16*o+s-48;else if(s>=65&&s<=70)o=16*o+s-65+10;else{if(!(s>=97&&s<=102))break;o=16*o+s-97+10}r++,i++}return i<t&&(o=-1),o}function p(){if(i="",d=0,o=r,c=a,u=l,r>=n)return o=n,s=17;var t=e.charCodeAt(r);if(k(t)){do{r++,i+=String.fromCharCode(t),t=e.charCodeAt(r)}while(k(t));return s=15}if(x(t))return r++,i+=String.fromCharCode(t),13===t&&10===e.charCodeAt(r)&&(r++,i+="\n"),a++,l=r,s=14;switch(t){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,i=function(){for(var t="",i=r;;){if(r>=n){t+=e.substring(i,r),d=2;break}var o=e.charCodeAt(r);if(34===o){t+=e.substring(i,r),r++;break}if(92!==o){if(o>=0&&o<=31){if(x(o)){t+=e.substring(i,r),d=2;break}d=6}r++}else{if(t+=e.substring(i,r),++r>=n){d=2;break}switch(e.charCodeAt(r++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var s=f(4,!0);s>=0?t+=String.fromCharCode(s):d=4;break;default:d=5}i=r}}return t}(),s=10;case 47:var p=r-1;if(47===e.charCodeAt(r+1)){for(r+=2;r<n&&!x(e.charCodeAt(r));)r++;return i=e.substring(p,r),s=12}if(42===e.charCodeAt(r+1)){r+=2;for(var g=n-1,m=!1;r<g;){var y=e.charCodeAt(r);if(42===y&&47===e.charCodeAt(r+1)){r+=2,m=!0;break}r++,x(y)&&(13===y&&10===e.charCodeAt(r)&&r++,a++,l=r)}return m||(r++,d=1),i=e.substring(p,r),s=13}return i+=String.fromCharCode(t),r++,s=16;case 45:if(i+=String.fromCharCode(t),++r===n||!A(e.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=function(){var t=r;if(48===e.charCodeAt(r))r++;else for(r++;r<e.length&&A(e.charCodeAt(r));)r++;if(r<e.length&&46===e.charCodeAt(r)){if(!(++r<e.length&&A(e.charCodeAt(r))))return d=3,e.substring(t,r);for(r++;r<e.length&&A(e.charCodeAt(r));)r++}var n=r;if(r<e.length&&(69===e.charCodeAt(r)||101===e.charCodeAt(r)))if((++r<e.length&&43===e.charCodeAt(r)||45===e.charCodeAt(r))&&r++,r<e.length&&A(e.charCodeAt(r))){for(r++;r<e.length&&A(e.charCodeAt(r));)r++;n=r}else d=3;return e.substring(t,n)}(),s=11;default:for(;r<n&&h(t);)r++,t=e.charCodeAt(r);if(o!==r){switch(i=e.substring(o,r)){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(t),r++,s=16}}function h(e){if(k(e)||x(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){r=e,i="",o=0,s=16,d=0},getPosition:function(){return r},scan:t?function(){var e;do{e=p()}while(e>=12&&e<=15);return e}:p,getToken:function(){return s},getTokenValue:function(){return i},getTokenOffset:function(){return o},getTokenLength:function(){return r-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-u},getTokenError:function(){return d}}}function k(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function x(e){return 10===e||13===e||8232===e||8233===e}function A(e){return e>=48&&e<=57}function O(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}function T(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}var F;function B(e,t){if(e){for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if("string"==typeof o){if("object"!==n.type||!Array.isArray(n.children))return;for(var s=!1,a=0,c=n.children;a<c.length;a++){var l=c[a];if(Array.isArray(l.children)&&l.children[0].value===o){n=l.children[1],s=!0;break}}if(!s)return}else{var u=o;if("array"!==n.type||u<0||!Array.isArray(n.children)||u>=n.children.length)return;n=n.children[u]}}return n}}function U(e,t,n){void 0===n&&(n=F.DEFAULT);var r=L(e,!1);function i(e){return e?function(){return e(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}function o(e){return e?function(t){return e(t,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}var s=i(t.onObjectBegin),a=o(t.onObjectProperty),c=i(t.onObjectEnd),l=i(t.onArrayBegin),u=i(t.onArrayEnd),d=o(t.onLiteralValue),f=o(t.onSeparator),p=i(t.onComment),h=o(t.onError),g=n&&n.disallowComments,m=n&&n.allowTrailingComma;function y(){for(;;){var e=r.scan();switch(r.getTokenError()){case 4:E(14);break;case 5:E(15);break;case 3:E(13);break;case 1:g||E(11);break;case 2:E(12);break;case 6:E(16)}switch(e){case 12:case 13:g?E(10):p();break;case 16:E(1);break;case 15:case 14:break;default:return e}}}function E(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),h(e),t.length+n.length>0)for(var i=r.getToken();17!==i;){if(-1!==t.indexOf(i)){y();break}if(-1!==n.indexOf(i))break;i=y()}}function v(e){var t=r.getTokenValue();return e?d(t):a(t),y(),!0}return y(),17===r.getToken()?!!n.allowEmptyContent||(E(4,[],[]),!1):function e(){switch(r.getToken()){case 3:return function(){l(),y();for(var t=!1;4!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(t||E(4,[],[]),f(","),y(),4===r.getToken()&&m)break}else t&&E(6,[],[]);e()||E(4,[],[4,5]),t=!0}return u(),4!==r.getToken()?E(8,[4],[]):y(),!0}();case 1:return function(){s(),y();for(var t=!1;2!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(t||E(4,[],[]),f(","),y(),2===r.getToken()&&m)break}else t&&E(6,[],[]);(10!==r.getToken()?(E(3,[],[2,5]),0):(v(!1),6===r.getToken()?(f(":"),y(),e()||E(4,[],[2,5])):E(5,[],[2,5]),1))||E(4,[],[2,5]),t=!0}return c(),2!==r.getToken()?E(7,[2],[]):y(),!0}();case 10:return v(!0);default:return function(){switch(r.getToken()){case 11:var e=r.getTokenValue(),t=Number(e);isNaN(t)&&(E(2),t=0),d(t);break;case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return y(),!0}()}}()?(17!==r.getToken()&&E(9,[],[]),!0):(E(4,[],[]),!1)}function P(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":return e?Array.isArray(e)?"array":"object":"null";default:return"null"}}function M(e,t,n,r){for(var i,o=t.slice(),s=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=F.DEFAULT);var r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(e){"property"===r.type&&(r.length=e-r.offset,r=r.parent)}function o(e){return r.children.push(e),e}U(e,{onObjectBegin:function(e){r=o({type:"object",offset:e,length:-1,parent:r,children:[]})},onObjectProperty:function(e,t,n){(r=o({type:"property",offset:t,length:-1,parent:r,children:[]})).children.push({type:"string",value:e,offset:t,length:n,parent:r})},onObjectEnd:function(e,t){i(e+t),r.length=e+t-r.offset,r=r.parent,i(e+t)},onArrayBegin:function(e,t){r=o({type:"array",offset:e,length:-1,parent:r,children:[]})},onArrayEnd:function(e,t){r.length=e+t-r.offset,r=r.parent,i(e+t)},onLiteralValue:function(e,t,n){o({type:P(e),offset:t,length:n,parent:r,value:e}),i(t+n)},onSeparator:function(e,t,n){"property"===r.type&&(":"===e?r.colonOffset=t:","===e&&i(t))},onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n);var s=r.children[0];return s&&delete s.parent,s}(e,[]),a=void 0,c=void 0;o.length>0&&(c=o.pop(),void 0===(a=B(s,o))&&void 0!==n);)"string"==typeof c?((i={})[c]=n,n=i):n=[n];if(a){if("object"===a.type&&"string"==typeof c&&Array.isArray(a.children)){var l=B(a,[c]);if(void 0!==l){if(void 0===n){if(!l.parent)throw new Error("Malformed AST");var u=a.children.indexOf(l.parent),d=void 0,f=l.parent.offset+l.parent.length;return u>0?d=(w=a.children[u-1]).offset+w.length:(d=a.offset+1,a.children.length>1&&(f=a.children[1].offset)),R(e,{offset:d,length:f-d,content:""},r)}return R(e,{offset:l.offset,length:l.length,content:JSON.stringify(n)},r)}if(void 0===n)return[];var p=JSON.stringify(c)+": "+JSON.stringify(n),h=void 0;return R(e,h=(I=r.getInsertionIndex?r.getInsertionIndex(a.children.map((function(e){return e.children[0].value}))):a.children.length)>0?{offset:(w=a.children[I-1]).offset+w.length,length:0,content:","+p}:0===a.children.length?{offset:a.offset+1,length:0,content:p}:{offset:a.offset+1,length:0,content:p+","},r)}if("array"===a.type&&"number"==typeof c&&Array.isArray(a.children)){var g=c;if(-1===g)return p=""+JSON.stringify(n),h=void 0,R(e,h=0===a.children.length?{offset:a.offset+1,length:0,content:p}:{offset:(w=a.children[a.children.length-1]).offset+w.length,length:0,content:","+p},r);if(void 0===n&&a.children.length>=0){var m=c,y=a.children[m];if(h=void 0,1===a.children.length)h={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===m){var E=(w=a.children[m-1]).offset+w.length;h={offset:E,length:a.offset+a.length-2-E,content:""}}else h={offset:y.offset,length:a.children[m+1].offset-y.offset,content:""};return R(e,h,r)}if(void 0!==n){if(h=void 0,p=""+JSON.stringify(n),!r.isArrayInsertion&&a.children.length>c){var v=a.children[c];h={offset:v.offset,length:v.length,content:p}}else if(0===a.children.length||0===c)h={offset:a.offset+1,length:0,content:0===a.children.length?p:p+","};else{var w,I=c>a.children.length?a.children.length:c;h={offset:(w=a.children[I-1]).offset+w.length,length:0,content:","+p}}return R(e,h,r)}throw new Error("Can not "+(void 0===n?"remove":r.isArrayInsertion?"insert":"modify")+" Array index "+g+" as length is not sufficient")}throw new Error("Can not add "+("number"!=typeof c?"index":"property")+" to parent of type "+a.type)}if(void 0===n)throw new Error("Can not delete in empty document");return R(e,{offset:s?s.offset:0,length:s?s.length:0,content:JSON.stringify(n)},r)}function R(e,t,n){if(!n.formattingOptions)return[t];var r=H(e,t),i=t.offset,o=t.offset+t.content.length;if(0===t.length||0===t.content.length){for(;i>0&&!T(r,i-1);)i--;for(;o<r.length&&!T(r,o);)o++}for(var s=function(e,t,n){var r,i,o,s,a;if(t){for(s=t.offset,a=s+t.length,o=s;o>0&&!T(e,o-1);)o--;for(var c=a;c<e.length&&!T(e,c);)c++;i=e.substring(o,c),r=function(e,t){for(var n=0,r=0,i=t.tabSize||4;n<e.length;){var o=e.charAt(n);if(" "===o)r++;else{if("\t"!==o)break;r+=i}n++}return Math.floor(r/i)}(i,n)}else i=e,r=0,o=0,s=0,a=e.length;var l,u=function(e,t){for(var n=0;n<t.length;n++){var r=t.charAt(n);if("\r"===r)return n+1<t.length&&"\n"===t.charAt(n+1)?"\r\n":"\r";if("\n"===r)return"\n"}return e&&e.eol||"\n"}(n,e),d=!1,f=0;l=n.insertSpaces?O(" ",n.tabSize||4):"\t";var p=L(i,!1),h=!1;function g(){return u+O(l,r+f)}function m(){var e=p.scan();for(d=!1;15===e||14===e;)d=d||14===e,e=p.scan();return h=16===e||0!==p.getTokenError(),e}var y=[];function E(n,r,i){h||t&&!(r<a&&i>s)||e.substring(r,i)===n||y.push({offset:r,length:i-r,content:n})}var v=m();if(17!==v){var w=p.getTokenOffset()+o;E(O(l,r),o,w)}for(;17!==v;){for(var I=p.getTokenOffset()+p.getTokenLength()+o,S=m(),C="",_=!1;!d&&(12===S||13===S);)E(" ",I,p.getTokenOffset()+o),I=p.getTokenOffset()+p.getTokenLength()+o,C=(_=12===S)?g():"",S=m();if(2===S)1!==v&&(f--,C=g());else if(4===S)3!==v&&(f--,C=g());else{switch(v){case 3:case 1:f++,C=g();break;case 5:case 12:C=g();break;case 13:d?C=g():_||(C=" ");break;case 6:_||(C=" ");break;case 10:if(6===S){_||(C="");break}case 7:case 8:case 9:case 11:case 2:case 4:12===S||13===S?_||(C=" "):5!==S&&17!==S&&(h=!0);break;case 16:h=!0}!d||12!==S&&13!==S||(C=g())}17===S&&(C=n.insertFinalNewline?u:""),E(C,I,p.getTokenOffset()+o),v=S}return y}(r,{offset:i,length:o-i},n.formattingOptions),a=s.length-1;a>=0;a--){var c=s[a];r=H(r,c),i=Math.min(i,c.offset),o=Math.max(o,c.offset+c.length),o+=c.content.length-c.length}return[{offset:i,length:e.length-(r.length-o)-i,content:r.substring(i,o)}]}function H(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}!function(e){e.DEFAULT={allowTrailingComma:!1}}(F||(F={}));function j(e,t,n,r){return M(e,t,n,r)}function z(e,t){for(var n=t.length-1;n>=0;n--)e=H(e,t[n]);return e}const Z={formattingOptions:{tabSize:4,insertSpaces:!0}};function V(e){return function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=F.DEFAULT);var r=null,i=[],o=[];function s(e){Array.isArray(i)?i.push(e):null!==r&&(i[r]=e)}return U(e,{onObjectBegin:function(){var e={};s(e),o.push(i),i=e,r=null},onObjectProperty:function(e){r=e},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var e=[];s(e),o.push(i),i=e,r=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n),i[0]}(e)}function J(e,t,n){return t=t||[],n=n||[],"object"!=typeof e||null===e||Array.isArray(e)?n.push(t):Object.keys(e).forEach((r=>{J(e[r],t.concat(r),n)})),n}let G;function X(){return G||(G=J(V(Q)).reduce(((e,t)=>(["dependencies","encrypt"].includes(t[1])||("category"===t[1]?(e.push([...t,0]),e.push([...t,1])):e.push(t)),e)),[])),G}const $=["id"];function W(e,t,n){for(let r=0;r<t.length;r++){const i=t[r];if(!e[i])return"插件["+(e.id||n)+"]根目录 package.json 中插件 "+i+" 不能为空"}}const q=$,K={UniApp_Vue:function(e,t,n,r){const i=s().basename(e),o=W(t,$,i);if(o)return u({level:"error",line:o});if(!r.isPackageJson&&t.id!==i)return g(t.id,{level:"error",line:"根目录 package.json 中插件 id 必须与插件目录名保持一致"});if(!r.isPackageJson){const n=["pages.json","App.vue","main.js","manifest.json","uni.scss"].find((t=>c().existsSync(s().resolve(e,t))));if(n)return g(t.id,{level:"error",line:"根目录不支持"+n+"文件，请删除该文件后重试，若需要插件使用者修改项目"+n+"，请在插件文档说明要调整的"+n+"内容。"})}return t},Extension:function(e,t,n){const r=W(t,q,s().basename(e));return r?u({level:"error",line:r}):t.engines.HBuilderX?t:g(t.id,{level:"error",line:"根目录 package.json 中插件 engines->HBuilderX 不能为空"})}};function Y(e,t,n){const r=e.fsPath,i=e.workspaceFolder,o=i&&i.nature||"UniApp_Vue",a=s().resolve(r,"package.json");if(!c().existsSync(a))return g(s().basename(r),{level:"error",line:"根目录package.json不存在"});if(!K[o])return u({level:"error",line:"项目类型不正确："+o});let l=V;"HBuilderX"===n&&(l=JSON.parse);try{const n=l(c().readFileSync(a).toString());return K[o](r,n,t,e)}catch(e){const t="根目录package.json格式不正确："+e.message;return g(s().basename(r),{level:"error",line:t})}}const Q='{\n  "id": "",\n  "displayName": "",\n  "version": "1.0.0",\n  "description": "",\n  "keywords": [],\n  "repository": "",\n  "engines": {\n    "HBuilderX": "^3.1.0"\n  },\n  "dcloudext": {\n    "category": [],\n    "sale": {\n      "regular": {\n        "price": "0.00"\n      },\n      "sourcecode": {\n        "price": "0.00"\n      }\n    },\n    "contact": {\n      "qq": ""\n    },\n    "declaration": {\n      "ads": "",\n      "data": "",\n      "permissions": ""\n    },\n    "npmurl": ""\n  },\n  "uni_modules": {\n    "dependencies": [],\n    "encrypt": [],\n    "platforms": {\n      "cloud": {\n        "tcb": "u",\n        "aliyun": "u"\n      },\n      "client": {\n        "Vue": {\n          "vue2": "u",\n          "vue3": "u"\n        },\n        "App": {\n          "app-vue": "u",\n          "app-nvue": "u"\n        },\n        "H5-mobile": {\n          "Safari": "u",\n          "Android Browser": "u",\n          "微信浏览器(Android)": "u",\n          "QQ浏览器(Android)": "u"\n        },\n        "H5-pc": {\n          "Chrome": "u",\n          "IE": "u",\n          "Edge": "u",\n          "Firefox": "u",\n          "Safari": "u"\n        },\n        "小程序": {\n          "微信": "u",\n          "阿里": "u",\n          "百度": "u",\n          "字节跳动": "u",\n          "QQ": "u"\n        },\n        "快应用": {\n          "华为": "u",\n          "联盟": "u"\n        }\n      }\n    }\n  }\n}';function ee(e){return require(s().resolve(i().env.appRoot,"plugins/npm/node_modules/npm/node_modules/",e))}function te(e){return require(s().resolve(i().env.appRoot,"plugins/npm/node_modules/npm/lib",e))}const ne=["package.json","src/pages.json","src/manifest.json","src/App.vue"];function re(e){return!ne.find((t=>!c().existsSync(s().resolve(e,t))))}function ie(e,t){return t?e:s().resolve(e,"../..")}function oe(e,t){if(t)return e;const n=s().resolve(e,"../.."),r=s().resolve(e,"../../..");return re(r)?r:n}function se(e){try{const{S:t}=("uni_helpers",require(s().resolve(i().env.appRoot,"plugins/","uni_helpers")));return t(e)}catch(e){}}var ae=n(285),ce=n.n(ae);function le(e,t,n=20){return String(e).padEnd(n," ")+t}const ue=n(35),de=["package.json","readme.md"];function fe(e,t,n){return g(t.id,"=== 插件信息 ==="),g(t.id,le("id",t.id)),g(t.id,le("version",t.version)),g(t.id,le("displayName",t.displayName)),g(t.id,le("filename",s().basename(e))),g(t.id,le("package size",ue(c().statSync(e).size))),g(t.id,le("total files",n.length)),g(t.id,"=== 文件列表 ==="),n.forEach((e=>{g(t.id,le(e.size,e.path))})),e}async function pe(e,t){const n=t.id+"@"+t.version,r=new(ce()),i=[];de.forEach((t=>{const n=s().resolve(e,t);if(!c().existsSync(n))return;const o=s().dirname(t);r.addLocalFile(n,"."===o?"":o),i.push({size:ue(c().statSync(n).size),path:t})}));const o=s().resolve(w,`${n}.zip`);return r.writeZip(o),fe(o,t,i),o}const he=["unpackage",".hbuilderx"];function ge(e,t,n=!1){return ee("npm-packlist")({path:e,includeEmpty:!0}).then((r=>{const i=new(ce()),o=r.filter((e=>!he.find((t=>e.startsWith(t))))).map((t=>{const n=s().resolve(e,t),r=s().dirname(t);return i.addLocalFile(n,"."===r?"":r),{size:ue(c().statSync(n).size),path:t}}));if(n){const t=s().join(e,"node_modules");c().existsSync(t)&&(i.addLocalFolder(t,"node_modules"),o.push({size:"---",path:"node_modules"}))}const a=s().resolve(w,`${t}.zip`);return i.writeZip(a),[a,o]}))}function me(e,t,n,r){if(r&&n.directories&&n.directories.example){const t=s().resolve(r,n.directories.example);c().existsSync(t)&&(e=t)}return ge(e,t).then((([e,t])=>function(e,t,n){return g(n.id,"=== 示例工程信息 ==="),g(n.id,le("filename",s().basename(e))),g(n.id,le("package size",ue(c().statSync(e).size))),g(n.id,le("total files",t.length)),e}(e,t,n)))}function ye(e,t,n=!1){return ge(e,t.id+"@"+t.version,n).then((([e,n])=>fe(e,t,n)))}const Ee=JSON.stringify([{id:1,name:"HBuilderX",pid:0,children:[{id:11,name:"HBuilderX",pid:1}]}]);function ve(){return JSON.parse(Ee)}const we=JSON.stringify([{id:3,name:"前端页面模板",pid:0,children:[{id:33,name:"uni-app前端项目模板",pid:3}]},{id:7,name:"uniCloud",pid:0,children:[{id:72,name:"云端一体项目模板",pid:7}]}]);function Ie(){return JSON.parse(we)}const Se={category:[{id:2,pid:0,name:"前端组件",children:[{id:21,pid:2,name:"通用组件"},{id:23,pid:2,name:"小程序组件"}]},{id:4,pid:0,name:"JS SDK",children:[{id:41,pid:4,name:"通用 SDK"}]},{id:3,pid:0,name:"uni-app前端模板",children:[{id:31,pid:3,name:"vue 页面模板"}]},{id:7,pid:0,name:"uniCloud",children:[{id:71,pid:7,name:"云函数模板"},{id:73,pid:7,name:"云端一体页面模板"},{id:74,pid:7,name:"Admin插件"},{id:76,pid:7,name:"DB Schema及验证函数"}]}],fe_platforms:[{id:24,pid:0,name:"Vue",children:[{id:25,pid:24,name:"vue2",type:0,desc:""},{id:26,pid:24,name:"vue3",type:0,desc:""}]},{id:1,pid:0,name:"App",children:[{id:2,pid:1,name:"app-vue",type:0,desc:""},{id:3,pid:1,name:"app-nvue",type:0,desc:""}]},{id:4,pid:0,name:"H5-mobile",children:[{id:5,pid:4,name:"Safari",type:0,desc:""},{id:6,pid:4,name:"Android Browser",type:0,desc:""},{id:7,pid:4,name:"微信浏览器(Android)",type:0,desc:""},{id:8,pid:4,name:"QQ浏览器(Android)",type:0,desc:""}]},{id:9,pid:0,name:"H5-pc",children:[{id:10,pid:9,name:"Chrome",type:0,desc:""},{id:11,pid:9,name:"IE",type:0,desc:""},{id:12,pid:9,name:"Edge",type:0,desc:""},{id:13,pid:9,name:"Firefox",type:0,desc:""},{id:14,pid:9,name:"Safari",type:0,desc:""}]},{id:15,pid:0,name:"小程序",children:[{id:16,pid:15,name:"微信",type:0,desc:""},{id:17,pid:15,name:"阿里",type:0,desc:""},{id:18,pid:15,name:"百度",type:0,desc:""},{id:19,pid:15,name:"字节跳动",type:0,desc:""},{id:20,pid:15,name:"QQ",type:0,desc:""}]},{id:21,pid:0,name:"快应用",children:[{id:22,pid:21,name:"华为",type:0,desc:""},{id:23,pid:21,name:"联盟",type:0,desc:""}]}],tips:{plugin_id:"<p>插件 ID 命名规范：<br>1. 格式为：'作者ID-插件英文名称'，例如：'xx-yy'，其中作者ID和插件名称只能包含英文、数字<br>2. 作者ID由插件作者自定义，不能使用'DCloud'、'uni'等关键字<br>3. 插件名称需直观表达插件的作用，例如：tag、button等</p>",update_log:"<p>注意：<br>1. 请填写更新日志，支持 markdown 格式。<br>2. 此处填写的更新日志会展示在插件详情页面，默认展示最近两次的更新记录。<br>3. 更新日志不需要填写日期和版本，页面展示时，会自动读取发布时填写的版本和日期。<br><strong>4. 更新日志内容简要说明本次更新的主要内容即可，不要粘贴插件的说明文档，否则会导致页面展示时与下面的说明文档内容重复。</strong></p>",cover_img:"<p>请上传截图（尺寸保持一致），单张图片不超过1M。尺寸不小于480*800。JPG、PNG格式。</p>",plugin_package:'<p>注意：<br>1. 插件压缩包为标准 zip 格式，不要把 rar 等其他格式改名为 zip，会导致无法正确解压；<br>2. 插件包命名推荐使用"插件ID.zip"。插件包文件名最好使用英文+数字格式。使用中文命名的压缩包可能会导致处理异常。<br>3. 插件包中的文件尽量不要包含中文文件名，如果必须为中文文件名，请在压缩时选择 utf8 编码，否则会导致部分平台解压后文件名乱码。<br><strong>免费插件默认协议为MIT，如果在插件包根目录放置license.md，则以该license.md为准。付费插件许可协议为插件市场标准协议，勿在付费插件包的根目录包含license.md。</strong></p>',plugin_md:'<p>插件使用说明, md（markdown） 格式。<br>注意：<br>1. 文件编码请使用 utf-8 编码，其它编码可能会导致页面乱码。<br>2. 文档中请尽量只使用 markdown 语法，如果混排 html 语法可能会导致排版混乱。<br>3. 如果文档中使用了图片，请将图片上传到图床，在 markdown 中引用图床地址，否则会导致图片无法显示。<br><strong>如插件文档的markdown需要图床，或者有示例的apk缺少免费托管，或者有示例的h5网站需要部署，请开通<a href="https://unicloud.dcloud.net.cn" target="_blank">uniCloud</a>。在“云存储”里免费使用图床和apk下载，在“前端网页托管”里发布网页。</strong></p>',plugin_example:'<p>1. 建议上传插件使用示例工程（完整的 uni-app 工程），方便用户快速上手。<br>2. 压缩包文件名及压缩包中的文件尽量不要包含中文路径或文件名，可能会导致解压异常。<br>3. 如果插件历史版本存在示例工程，但发布新版时并未更新示例，则仍保留历史最新的示例工程。如需删除示例工程可前往 <a target="_blank" href="https://ext.dcloud.net.cn/manage">我发布的插件</a>进行操作。</p>',declaration_permissions:"<p>请如实填写，如不需要任何权限，可填“无”</p>",declaration_collect_data:'<p>请如实填写，如不采集任何数据，可填写“插件不采集任何数据”<br>如果使用的三方SDK需要采集数据，可填写“插件使用的 XX SDK会采集数据，详情可参考：https://other-sdk.com/"</p>',declaration_ads:"<p>请如实填写，如不需要任何权限，可填“无”</p>",platforms:"<p>设置兼容全部平台时，uniCloud目录必须含有-aliyun或-tcb后缀；不要求同时有两个云函数目录。</p>",price:'<p>设置插件销售普通授权版价格，单位为元，如 8.88 元。如果为免费插件，设置普通授权版价格为 0 即可。<br><span>加密云函数配置参考： <a target="_blank" href="https://ask.dcloud.net.cn/article/35408">插件开发指南</a></span></p>',code_price:'<p>注意：<br>1.设置插件源码授权版价格，单位为元。该模式下插件包内必须有加密函数或者公共模块。加密云函数配置参考： <a target="_blank" href="https://ask.dcloud.net.cn/article/35408">插件开发指南</a><br>2.源码授权版价格大于普通授权版价格并且源码授权版价格大于100元时，购买者和插件作者需要签署“e签宝”电子协议，<a target="_blank" href="https://ask.dcloud.net.cn/article/37878">点击查看“e签宝”介绍</a><br>3.当用户购买源码授权版并需要签署电子协议时，“e签宝”会向您尾号 8654 的手机和 fxy***@gmail.com 的邮箱发送通知信息，请注意查收并及时签署电子协议！详细签署流程请参考：<a target="_blank" href="https://ask.dcloud.net.cn/article/37841">电子协议签署流程</a><br></p>',publisher_qq:"<p>插件作者 QQ，方便管理员审核时与作者快速沟通。</p>"},hxVersionList:["3.1.0"]},Ce=s().resolve(E().tmpdir(),"uni_modules.form_meta.json"),_e="uniCloud-tcb",be="uniCloud-aliyun";var Ne=n(247),De=n.n(Ne);function Le(e){try{const{uni_modules:t}=V(c().readFileSync(s().resolve(e,"package.json")).toString());if(t&&t.dependencies&&Array.isArray(t.dependencies))return Array.from(new Set(t.dependencies))}catch(e){}return[]}function ke(e,t){if(!t||!Object.keys(t).length)return;const n=s().resolve(e,"package.json");if(!c().existsSync(n))return;const r=c().readFileSync(n,"utf8");c().writeFileSync(n,function(e,t){return z(e,j(e,["uni_modules","extends"],t,Z))}(r,t))}function xe(e,t,n,r){n.useCache=!1!==n.useCache,n.deps=!1!==n.deps;const o=e.id+"@"+e.version,a=o+".zip",l=s().resolve(n.output,e.id);if(c().existsSync(l))return Promise.resolve();r?g(r,"三方依赖["+o+"]开始下载到临时目录"):g(e.id,"开始下载到临时目录");let u=s().resolve(S,e.type||"");const d=s().resolve(u,a);function p(){return function(e,t){return new Promise(((n,r)=>{if(c().existsSync(t))return n(!1);new(ce())(e).extractAllToAsync(t,!0,(e=>e?r(e):n(!0)))}))}(d,l).then((t=>{if(r?g(r,"三方依赖["+o+"]下载到临时目录完成"):g(e.id,"下载到临时目录完成"),ke(l,n.extends),t&&n.deps)return async function(e,t,n){const r=Le(e);if(r.length){const e=await N(r);for(let r of e)r.downloadUrl&&await xe({id:r.id,version:r.latestVersion,type:r.type},r.downloadUrl,{useCache:n.useCache,output:n.output,deps:n.deps,extends:r.extends||{}},t)}}(l,e.id,n)}))}return n.useCache&&c().existsSync(d)?p():function(e,t,n){const r=s().resolve(n||I,e);return i().http.request({url:t,downloadFile:r}).then((()=>r))}(a,t,u).then((()=>p())).catch((e=>{g(o,{level:"error",line:`下载失败：${f(e.error||e.message)}`})}))}function Ae(e,t){return i().workspace.copyFileWithPrompt({src:i().Uri.file(e),dest:i().Uri.file(t),defaction:"compare",showcomparebutton:!0}).then((e=>e)).catch((e=>{g("uni_modules",{level:"error",line:e.toString()})}))}function Oe({name:e,version:t,size:n}){return e.length,`<table width="100%">\n    <tr>\n        <td>插件名称：${function(e,t=20){const n=e.substring(0,t),r=n.match(/[\u4e00-\u9fa5]/g),i=r?r.length:0,o=2*n.length-i;return e.substr(0,o)+(o<e.length?"...":"")}(e)}</td>\n        <td>插件版本：${t}</td>\n    </tr>\n    <tr>\n        <td>插件大小：${n}</td>\n        <td></td>\n    </tr>\n  </table>`}async function Te({fsPath:e}){let t=s().resolve(e,"uni_modules");if(!c().existsSync(t)&&(t=s().resolve(e,"src","uni_modules"),!c().existsSync(t)))return"";const n=[];return c().readdirSync(t).forEach((e=>{const r=s().resolve(t,e),i=s().resolve(r,"package.json");if(!c().existsSync(i))return;const o=function(e){try{const{id:t,version:n,uni_modules:r}=JSON.parse(c().readFileSync(e,"utf8"));if(!t||!n||!r)return;if(r.extends&&r.extends.sn)return;if(!Array.isArray(r.encrypt)||!r.encrypt.length)return;if(!r.encrypt.filter((e=>!e.startsWith("uniCloud")&&e.endsWith(".js"))).length)return;return{plugin_id:t,version:n}}catch(e){}}(i);o&&n.push(o)})),n.length?D(JSON.stringify({plugins:n})).then((e=>{e.forEach((e=>{const n=s().resolve(t,e.id);try{ke(n,e.extends)}catch(e){}}))})):void 0}async function Fe({deps:e,fsPath:t}){re(t)&&(t=s().resolve(t,"src")),u("开始下载三方依赖："+e.join(","));const n=_();try{const r=await N(e);for(const e of r)e.downloadUrl?await xe({id:e.id,version:e.latestVersion,type:e.type},e.downloadUrl,{output:n,extends:e.extends||{}}):u({level:"warn",line:`三方依赖[${e.id}]不存在`});const i=n+"/",o=s().resolve(t,"uni_modules");m(i,o)&&u("有同名文件，请处理合并"),Ae(i,o).then((e=>{1===e?u({level:"warn",line:"安装插件三方依赖被取消"}):0===e&&u({level:"success",line:"三方依赖安装完成"})}))}catch(e){console.log(e),u({level:"error",line:"三方依赖安装失败："+f(e.error||e.message)})}}function Be(e){return e>9?String(e):"0"+e}function Ue(e,t,n=new Date){return`## ${e}（${n.getFullYear()}-${Be(n.getMonth()+1)}-${Be(n.getDate())}）\n${t}\n`}function Pe(e){const[t,n]=function(e){const t=/##\s+([0-9\.]+).*/g,n=t.exec(e);if(!n)return[];const r={version:n[1].trim(),line:n[0]},i=t.exec(e);return i?[r,{version:i[1].trim(),line:i[0]}]:[r]}(e);if(!t)return{version:"",log:"",loc:{start:0,end:0}};const r=e.indexOf(t.line),i=r+t.line.length,o=n?e.indexOf(n.line):e.length;return{version:t.version,log:e.substring(i,o).trim(),loc:{start:r,end:o}}}function Me(e){let t=e;return".md"!==s().extname(e)&&(t=s().resolve(e,"changelog.md")),c().existsSync(t)?Pe(c().readFileSync(t).toString()):{version:"",log:"",loc:{start:0,end:0}}}function Re(){return{installDeps:Fe,encrypt:Te}}function He(){}const je=require("querystring"),ze=[{id:2,name:"前端组件",children:[{id:21,name:"通用组件",alias:"前端组件-通用组件",files:["components","components/{id}","component.vue"]},{id:23,name:"小程序组件",alias:"前端组件-小程序组件",files:["wxcomponents"]}]},{id:4,name:"JS SDK",children:[{id:41,name:"JS SDK",files:["js_sdk"]}]},{id:3,name:"前端页面模板",children:[{id:31,name:"前端页面模板",files:["pages"]}]},{id:7,name:"uniCloud",children:[{id:71,name:"云函数模板",files:["uniCloud/cloudfunctions","uniCloud/database"]},{id:73,name:"云端一体页面模板",files:["uniCloud/cloudfunctions","uniCloud/database","pages"]},{id:74,name:"Admin插件",alias:"uniCloud Admin插件",files:["uniCloud/cloudfunctions","uniCloud/database","pages","menu.json"]},{id:76,name:"DB Schema及验证函数",files:["uniCloud/database"]}]}].reduce(((e,t)=>(t.children.forEach((n=>{e.push(Object.assign({category:[t.name,n.name]},n))})),e)),[]),Ze="^[a-zA-Z]\\w*(-[a-zA-Z\\w]*)+[a-zA-Z0-9]$",Ve=new RegExp(Ze),Je=/^(uni|dcloud)/i;const Ge=[{pattern:"",errorMsg:"插件ID不能为空"},{pattern:Ze,errorMsg:"插件ID格式不正确，格式为：'作者ID-插件英文名称'，如：xx-yy"},{pattern:"^(?i)(?!uni|dcloud)",errorMsg:"插件ID不能使用`DCloud`、`uni`等关键字"}];function Xe(e){const t=e.fsPath;i().window.showFileWizardDialog({title:"新建uni_modules插件",footer:'<p style="text-align:left">插件名称等更多信息后续可以在插件根目录的package.json中修改，详见：<a style="color:#3aad4f" href="https://uniapp.dcloud.net.cn/uni_modules?id=packagejson">文档</a></p>',template:ze.map((e=>e.alias||e.name)),listTitle:"选择分类",namePlaceholder:"请输入插件ID，格式为：'作者ID-插件英文名称'，如：xx-yy",folderEditable:!1,nameValidators:Ge}).then((e=>{if(!e.file)return;const n=s().basename(e.file);if(!Ve.test(n))return p("插件ID格式不正确，格式为：'作者ID-插件英文名称'，如：xx-yy");if(Je.test(n))return p("插件ID不能使用`DCloud`、`uni`等关键字");const r=s().resolve(t,n);if(c().existsSync(r))return p("目录["+n+"]已存在");let i;const o=[];e.template&&(i=ze.find((t=>t.alias===e.template||t.name===e.template)),i&&o.push(...i.files));try{c().mkdirSync(r)}catch(e){return p(e.message)}const a=function(e,t){return function(n,r=""){try{c().writeFileSync(s().resolve(t,e,n),r)}catch(e){p(e.message)}}}(n,t);if(o.length){const e=ee("mkdirp");try{o.forEach((r=>{"component.vue"===(r=r.replace(/\{id\}/g,n))?a("components/"+n+"/"+n+".vue","<template>\n</template>\n<script>\n<\/script>\n<style>\n</style>\n"):"menu.json"===r?a("menu.json",JSON.stringify([],null,2)):e.sync(s().resolve(t,n,r))}))}catch(e){return p(e.message)}}var l;a("readme.md",`# ${n}`),a("changelog.md"),a("package.json",function(e,t){return function(e,t,n=Q){return n=z(n,j(n,["id"],e,Z)),n=z(n,j(n,["displayName"],e,Z)),n=z(n,j(n,["description"],e,Z)),n=z(n,j(n,["keywords"],[e],Z)),Array.isArray(t)&&2===t.length&&(n=z(n,j(n,["dcloudext","category"],t,Z))),n}(e,t&&t.category)}(n,i)),u({level:"success",line:(l=i&&i.category,(Array.isArray(l)&&2===l.length?l[0]===l[1]?l[0]:l[0]+"-"+l[1]:"插件")+"["+n+"]创建成功")})}))}async function $e(e){if(!Y(e,p))return;const t=e.fsPath,n=s().basename(t),r=Le(t);if(r.length){g(n,"开始下载所有的三方依赖");const e=_();try{const i=await N(r);for(const t of i)t.downloadUrl?await xe({id:t.id,version:t.latestVersion,type:t.type},t.downloadUrl,{output:e,extends:t.extends||{}},n):g(n,{level:"warn",line:`三方依赖[${t.id}]不存在`});g(n,"所有的三方依赖下载完成");const o=e+"/",a=s().resolve(t,"..");m(o,a)&&g(n,"有同名文件，请处理合并"),Ae(o,a).then((e=>{1===e?g(n,{level:"warn",line:"安装插件三方依赖被取消"}):0===e&&g(n,{level:"success",line:"所有的三方依赖安装完成"})}))}catch(e){console.log(e),g(n,{level:"error",line:"三方依赖安装失败："+f(e.error||e.message)})}}else g(n,"三方依赖列表为空")}function We(e){let t=e.fsPath;re(t)&&(t=s().resolve(t,"src"));const n=s().resolve(t,"uni_modules");if(c().existsSync(n))return u({level:"warn",line:"当前项目已存在目录[uni_modules]"});try{c().mkdirSync(n)}catch(e){return u({level:"error",line:e.message})}u({level:"success",line:"目录创建成功"})}function qe(e,{wd:t,ids:n}){const r=function(e){const t=s().resolve(e,"uni_modules.config.json");if(!c().existsSync(t))return{scripts:{}};let n={};try{n=V(c().readFileSync(t).toString())}catch(e){}return n.scripts||(n.scripts={}),n}(t).scripts[e];return r?new Promise((i=>{setTimeout((()=>{te("npm").load((()=>{process.env.UNI_MODULES_ID=n.join(","),u("开始执行"+e+"脚本"),u("> "+r),function(e,t,n,r,i){"function"==typeof r&&(i=r,r=null);const o=te("config/lifecycle")(r);ee("npm-lifecycle")(e,t,n,o).then(i,i)}({_id:"uni_modules",scripts:{[e]:r}},e,t,{scriptsPrependNodePath:!0},(t=>{u(e+"脚本执行结束"),i(!0)}))}))}),50)})):Promise.resolve(!1)}async function Ke(e,t){return qe("preupload",{wd:e,ids:[t]})}function Ye(e,t,n){const r=Y(e,p);if(r)return g(r.id,"开始检查更新"),b("/modules/check-update",{plugin_id:r.id,version:r.version},!1).then((e=>{if(e){if(e.hasNewVersion)return n.push(r.id),g(r.id,"发现新版本["+e.latestVersion+"]"),xe({id:r.id,version:e.latestVersion,type:e.type},e.downloadUrl,{output:t,deps:!1,extends:e.extends||{}}).then((async()=>{const e=Le(s().resolve(t,r.id));if(e.length){g(r.id,"开始下载所有的三方依赖");const n=await N(e);for(let e of n)e.downloadUrl?await xe({id:e.id,version:e.latestVersion,type:e.type},e.downloadUrl,{output:t,extends:e.extends||{}},r.id):g(r.id,{level:"warn",line:`三方依赖[${e.id}]不存在`});g(r.id,"所有的三方依赖下载完成")}}));g(r.id,"本地["+r.version+"]已经是最新版本")}}))}async function Qe(e){let t=!1,n="";const r=_();if(!Array.isArray(e)){const r=e.fsPath;if(r.endsWith("uni_modules")){n=oe(s().resolve(r,"test"),!1);const t=Object.assign({},e),i=c().readdirSync(e.fsPath);e=[];for(const n of i){const i=s().resolve(r,n);c().existsSync(s().resolve(i,"package.json"))&&e.push(Object.assign({},t,{fsPath:i}))}}else r.endsWith("package.json")?(t=!0,e.fsPath=s().dirname(e.fsPath),e.isPackageJson=!0,n=e.fsPath,e=[e]):e=[e]}if(n||(n=oe(e[0].fsPath,!1)),re(n)&&(n=s().resolve(n,"src")),!e.length)return u("未查找到uni_modules插件");const i=[];for(const t of e)try{await Ye(t,r,i)}catch(e){console.log(e),g(s().basename(t.fsPath),{level:"error",line:e.error||e.message});break}if(i.length){const e=(t?s().join(r,i[0]):r)+"/",o=t?n:s().resolve(n,"uni_modules");u("有同名文件，请处理合并"),t&&function(e,t){const n=s().resolve(t,_e),r=s().resolve(t,be),i=c().existsSync(n),o=c().existsSync(r);if(i&&o||!i&&!o)return;const a=s().resolve(e,_e),l=s().resolve(e,be),u=c().existsSync(a),d=c().existsSync(l);u&&d&&!u&&!d||(i?d&&c().renameSync(l,a):o&&u&&c().renameSync(a,l))}(e,o);const a=await Ae(e,o);1===a?u({level:"error",line:"插件更新被取消"}):0===a&&(u({level:"success",line:"插件更新成功"}),await async function(e,t){return qe("postupdate",{wd:e,ids:t})}(n,i))}}class et{constructor(e,t){this._loaded=!1,this._callbacks={loaded:[],submit:[],message:[],restore:[]},this._dialog=t,this._webview=t.webView,this._init(e)}_init(e){this._webview.html=e,this._webview.onDidReceiveMessage((e=>{switch(e.type){case"cancel":this._onCancel();break;case"loaded":this._onLoaded();break;case"submit":this._onSubmit(e.data);break;case"error":this._onError(e.data);break;case"restore":this._callback("restore",e);break;default:this._callback("message",e)}}))}_onLoaded(){this._loaded=!0,this._callback("loaded")}_onCancel(){this._dialog.close()}_onSubmit(e){this._callback("submit",e)}_onError(e){this.showError(e)}_callback(e,t){this._callbacks[e].forEach((e=>e(t)))}_addCallback(e,t){this._callbacks[e].push(t)}show(){return this._dialog.show()}close(){return this._dialog.close()}showError(e){return["OperationCanceledError","HostNotFoundError"].includes(e)&&(e="网络发生错误，请稍后重试！"),this._dialog.displayError(e)}postMessage(e){const t=()=>{const t=e&&e.delay||0;setTimeout((()=>{this._webview.postMessage(e)}),t)};this._loaded?t():this._addCallback("loaded",t)}setButtonStatus(e,t){return this._dialog.setButtonStatus(e,t)}clearButtonStatus(e){return this._dialog.setButtonStatus(e,[])}addEventlistener(e,t){this._addCallback(e,t)}}const tt=require("child_process"),nt="提交",rt=314572800,it=c().readFileSync(s().join(__dirname,"webview/upload/index.html")).toString(),ot={title:"发布到插件市场",description:"向插件市场发布新插件或新版本",dialogButtons:[nt,"取消"],size:{width:730,height:600}};function st(e,t,n){c().writeFileSync(s().resolve(e,"package.json"),function(e,t,n){return function(e,t,n){return X().forEach((r=>{if("HBuilderX"!==n||"uni_modules"!==r[0]&&"sale"!==r[1])try{const n=function(e,t){const n=e.slice();let r,i=t;for(;void 0!==(r=n.shift());)i=i[r];return i}(r,t);e=z(e,j(e,r,n,Z))}catch(e){}})),e}(c().readFileSync(s().resolve(e,"package.json")).toString(),t,n)}(e,t,n))}async function at({dir:e,data:t,extType:n,webview:r,response:o,withNodeModules:a,isPackageJson:l}){if((u=t.pkg.version)===o.pluginInfo.version&&(r.showError("插件市场已存在该版本["+u+"]，发布新版本，请修改版本号"),1))return r.postMessage({type:"Focus",data:"#J_Version"});var u;const d=t.pkg;if(st(e,d,n),function(e,t,n){c().writeFileSync(s().resolve(e,"changelog.md"),function(e,t,n,r){let i=e;return".md"!==s().extname(e)&&(i=s().resolve(e,"changelog.md")),c().existsSync(i)?function(e,t,n,r){const{version:i,loc:o}=Pe(e);return i===t?e.substring(0,o.start)+Ue(t,n,r)+e.substring(o.end,e.length):e=Ue(t,n,r)+e}(c().readFileSync(i).toString(),t,n,r):Ue(t,n,r)}(e,t,n))}(e,d.version,t.update_log),t.plugin_example){const t=se(ie(e,l));if(t)return r.showError(`示例工程不能上传源码版插件[${t}]`)}return await Ke(oe(e,l),d.id),function(e,t,n=!1,r=!1){const i=[ye(e,t,r)];return n&&i.push(me(oe(e,!1),t.id+"@"+t.version+"_example",t,e)),Promise.all(i)}(e,d,t.plugin_example,a).then((async([e,n])=>{if(c().statSync(e).size>rt)return g(d.id,{level:"error",line:"插件压缩包太大，不能超过 300M"});if(n&&c().statSync(n).size>rt)return g(d.id,{level:"error",line:"插件示例工程压缩包太大，不能超过 300M"});g(d.id,"正在上传插件"+s().basename(e));const{category_level1:r,category_level2:o,update_log:a}=t,l={category_level1:r,category_level2:o,update_log:a,plugin_package:i().Uri.file(e)};return n&&(l.plugin_example=i().Uri.file(n)),function(e){return b("/modules/publish",e,!1).then((e=>{if(e)return e}))}(l)})).then((e=>{if(e){const e="上传插件市场成功，插件地址：https://ext.dcloud.net.cn/plugin?name="+d.id;r.close(),g(d.id,{level:"success",line:e})}})).catch((e=>{const t=f(e.error||e.message);g(d.id,{level:"error",line:"上传插件失败："+t}),r.showError(t)}))}function ct(e,t,n,r){const o=t.isPackageJson&&t.workspaceFolder&&"UniApp_Vue"===t.workspaceFolder.nature,a=t.workspaceFolder&&"Extension"===t.workspaceFolder.nature,l=a?"HBuilderX":"uni_modules",u=a;return async function(d){d.show().then((async p=>{var m;p&&2===p.code||(a&&r.dependencies&&Object.keys(r.dependencies).length&&(m=n,new Promise(((e,t)=>{(0,tt.exec)("npm list --production --parseable --depth=99999 --loglevel=error",{cwd:m,maxBuffer:512e4},((n,r)=>{if(n)return t(n);e(r.split(/[\r\n]/).filter((e=>s().isAbsolute(e))))}))}))).then((e=>{})).catch((e=>{const t=e.toString();return g(r.id,{level:"error",line:t}),h(t.includes("Invalid name")?"package.json中的name格式不正确":"当前HBuilderX插件的npm依赖尚未安装，请在根目录执行npm install",(()=>{d.close()}))})),async function(){let p;try{p=await(m=r.id,b("/modules/publish-validate",{plugin_id:m},!1).then((e=>{if(e)return e})))}catch(e){return h(e.error||e.message||"网络错误",(()=>{d.close()}))}var m;const{isExists:y,pluginInfo:E,category:v,tips:w,fe_platforms:I,hxVersionList:S}=p;if("update"===e&&!y)return h("插件["+r.id+"]尚未发布到插件市场",(()=>{d.close()}));function C(){const e={category:v,tips:w,fe_platforms:I,hxVersionList:S};!function(e){try{c().writeFileSync(Ce,JSON.stringify(e))}catch(e){}}(e),o?e.category=Ie():a&&(e.category=ve()),d.postMessage({type:"Update",data:Object.assign({isExists:y,pluginInfo:E||{}},e),options:{updateTime:Date.now()}})}function _(){d.clearButtonStatus(nt)}C(),d.addEventlistener("restore",(function(){C()})),d.addEventlistener("message",(function(e){if("deleteImage"===e.type){const t=e.data.id;(function(e,t){return b("/modules/delete-image",{id:e,plugin_id:t},!1).then((e=>{if(e)return e}))})(t,e.data.pluginId).then((()=>{d.postMessage({type:"DeleteImage",data:{id:t,status:"success"}})})).catch((e=>{const n=f(e.toString());d.showError(n),d.postMessage({type:"DeleteImage",data:{id:t,status:"error",errMsg:n}})}))}else"uploadImage"===e.type&&function({index:e,pluginId:t},n){i().request("window.showFileDialog",{title:"请选择截图",filter:"Images (*.png *.xpm *.jpg)",supportMulti:!1}).then((e=>e[0])).then((r=>{if(!r)return n.postMessage({type:"UploadImage",data:{index:e,status:"cancel"}});n.postMessage({type:"UploadImageStarted",data:{index:e}}),function(e,t,n){return b("/modules/add-image",{plugin_id:n,sort:t,file:i().Uri.file(e)},!1).then((e=>{if(e)return e}))}(r,e,t).then((t=>{n.postMessage({type:"UploadImage",data:{id:t.id,status:"success",url:t.url,index:e}})})).catch((t=>{const r=f(t.toString());n.showError(r),n.postMessage({type:"UploadImage",data:{index:e,status:"error",errMsg:r}})}))}))}(e.data,d)})),d.addEventlistener("submit",(function(r){d.setButtonStatus(nt,["loading","disable"]);const o=Y(t,d.showError);if(!o)return _();const{id:a,displayName:h,version:m,description:y,keywords:E,repository:v,engines:w,dcloudext:I,uni_modules:S}=r.pkg;r.pkg=Object.assign(o,{id:a,displayName:h,version:m,description:y,keywords:E,repository:v,engines:w,dcloudext:I,uni_modules:S}),("upload"===e?at({dir:n,data:r,webview:d,response:p,withNodeModules:u,extType:l,isPackageJson:!!t.isPackageJson}):async function({dir:e,data:t,extType:n,webview:r,isPackageJson:o}){const a=t.pkg;if(st(e,a,n),t.plugin_example){const t=se(ie(e,o));if(t)return r.showError(`示例工程不能上传源码版插件[${t}]`)}return await Ke(oe(e,o),a.id),async function(e,t,n=!1){const r=[pe(e,t)];return n&&r.push(me(oe(e,!1),t.id+"@"+t.version+"_example",t,e)),Promise.all(r)}(e,a,t.plugin_example).then((([e,n])=>{if(c().statSync(e).size>rt)return g(a.id,{level:"error",line:"插件压缩包太大，不能超过 300M"});if(n&&c().statSync(n).size>rt)return g(a.id,{level:"error",line:"插件示例工程压缩包太大，不能超过 300M"});g(a.id,"正在上传插件"+s().basename(e));const{category_level1:r,category_level2:o}=t,l={category_level1:r,category_level2:o,plugin_package:i().Uri.file(e)};return n&&(l.plugin_example=i().Uri.file(n)),function(e){return b("/modules/edit-info",e,!1).then((e=>{if(e)return e}))}(l)})).then((e=>{if(e){const e="修改成功，插件地址：https://ext.dcloud.net.cn/plugin?name="+a.id;r.close(),g(a.id,{level:"success",line:e})}})).catch((e=>{const t=f(e.error||e.message);g(a.id,{level:"error",line:"修改插件信息失败："+t}),r.showError(t)}))}({dir:n,data:r,webview:d,response:p,extType:l,isPackageJson:!!t.isPackageJson})).then((()=>(_(),async function(e,t){return qe("postupload",{wd:e,ids:[t]})}(oe(n,!!t.isPackageJson),a)))).catch((()=>{_()}))}))}())}))}}function lt(e,t,n){const r=t.fsPath,o=Y(t,p,t.workspaceFolder&&"Extension"===t.workspaceFolder.nature?"HBuilderX":"uni_modules");if(!o)return function(e){i().workspace.openTextDocument(s().resolve(e,"package.json"))}(r);(function(e,t){return Promise.resolve(function(e,t){return new et(e,t)}(e,i().window.createWebViewDialog(t,{enableScripts:!0})))})(it.replace("__INIT_MESSAGE__",JSON.stringify(function(e,t,n){const r=t.isPackageJson&&t.workspaceFolder&&"UniApp_Vue"===t.workspaceFolder.nature,i=t.workspaceFolder&&"Extension"===t.workspaceFolder.nature,o=function(e){let t=JSON.parse(JSON.stringify(Se));if(c().existsSync(Ce))try{t=JSON.parse(c().readFileSync(Ce).toString())}catch(e){}return"project"===e?t.category=Ie():"extension"===e&&(t.category=ve()),t}(r?"project":i?"extension":"uni_modules");return{type:"Init",data:Object.assign({type:e,pkg:n,changelog:Me(t.fsPath)},o),options:{}}}(e,t,o))),n).then(ct(e,t,r,o)).catch((e=>{g(o.id,{level:"error",line:e.toString()})}))}async function ut(e){if(Array.isArray(e))return p("您选择了多个目录，仅支持上传单个插件");e.fsPath.endsWith("package.json")&&(e.fsPath=s().dirname(e.fsPath),e.isPackageJson=!0),lt("upload",e,ot)}async function dt(e){if(Array.isArray(e))return u({level:"error",line:"您选择了多个目录，仅支持修改单个插件基本信息"});e.fsPath.endsWith("package.json")&&(e.fsPath=s().dirname(e.fsPath),e.isPackageJson=!0),lt("update",e,Object.assign({},ot,{title:"修改插件基本信息",description:"修改插件市场插件的基本信息，readme.md等。"}))}function ft(e){e.fsPath.endsWith("package.json")&&(e.fsPath=s().dirname(e.fsPath),e.isPackageJson=!0);const t=Y(e,p);t&&i().env.openExternal("https://ext.dcloud.net.cn/plugin?name="+t.id)}function pt(e){const{commands:t}=i(),{subscriptions:n}=e;return function(e){i().window.registerUriHandler({handleUri:function(e){const{plugin:t}=(0,je.parse)(e.query);t&&function(e){const t=e.ide_version;if(t&&1===De()(t,i().env.appVersion))return i().window.showMessageBox({type:"warning",title:"升级提示",text:`导入当前插件需要HBuilderX ${t} 以上版本，请先升级。<br>可通过菜单【帮助】-【检查更新】触发升级流程`,buttons:["知道了"]});i().window.showWorkspaceFolderPick({title:"选择一个uni-app项目导入该插件",description:Oe(e),platforms:e.platforms||[],filterTypes:["UniApp_Vue"],showSpaceName:!0}).then((({path:t,platform:n})=>{if(!t)return;let r=s().basename(t),o="uni_modules";re(t)&&(t=s().resolve(t,"src"),o="src/uni_modules"),e.vue_version&&function(e,t){const n=s().resolve(e,"manifest.json");if(!c().existsSync(n))return;const r=V(c().readFileSync(n,"utf8"));if(!r)return;const o=r.vueVersion||"2";o!=t&&i().window.showMessageBox({type:"warn",title:`将导入插件中声明的VUE(${t})版本与项目中声明的VUE(${o})版本并不相同`,text:"混用不同VUE版本的代码有导致异常的风险",buttons:["确定"]})}(t,e.vue_version);const a=_();(function(e){if(!e.extends)return Promise.resolve(!1);const t=[{plugin_id:e.id,version:e.version}];return D(JSON.stringify({plugins:t})).then((t=>(t.length&&(e.extends=t[0].extends||{}),!1))).catch((e=>!1))})(e).then((()=>{xe({id:e.id,version:e.version,type:e.type},e.download_url,{output:a,extends:e.extends||{}}).then((()=>{const n=a+"/",i=s().resolve(t,"uni_modules");m(n,i)&&g(e.id,"有同名文件，请处理合并"),Ae(n,i).then((t=>{1===t?g(e.id,{level:"warn",line:"导入被取消"}):0===t&&g(e.id,{level:"success",line:"导入["+r+"/"+o+"]成功"})}))}))}))}))}(JSON.parse(t))}},e)}(e),n.push(t.registerCommand("uni_modules.create",Xe)),n.push(t.registerCommand("uni_modules.install",$e)),n.push(t.registerCommand("uni_modules.mkdir",We)),n.push(t.registerCommand("uni_modules.update",Qe)),n.push(t.registerCommand("uni_modules.updateInfo",dt)),n.push(t.registerCommand("uni_modules.upload",ut)),n.push(t.registerCommand("uni_modules.view",ft)),Re&&Re()}function ht(){return He&&void 0}},747:e=>{"use strict";e.exports=require("fs")},503:e=>{"use strict";e.exports=require("original-fs")},622:e=>{"use strict";e.exports=require("path")},761:e=>{"use strict";e.exports=require("zlib")}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}return n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(858)})());