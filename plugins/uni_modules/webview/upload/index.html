<style>button,input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}input:not([type=button]):not([type=checkbox]):not([type=color]):not([type=file]):not([type=hidden]):not([type=image]):not([type=range]):not([type=reset]):not([type=submit]):not([type=radio]),textarea{display:block;width:100%;padding:.375rem .325rem;font-size:.8125rem;font-weight:400;line-height:1.5;color:#212529;background-color:transparent;background-clip:padding-box;border:0 solid #e5e5e5;border-bottom-width:1px}input:not([type=button]):not([type=checkbox]):not([type=color]):not([type=file]):not([type=hidden]):not([type=image]):not([type=range]):not([type=reset]):not([type=submit]):not([type=radio]):focus,textarea:focus{border-color:#3aad4f;outline:0}input:not([type=button]):not([type=checkbox]):not([type=color]):not([type=file]):not([type=hidden]):not([type=image]):not([type=range]):not([type=reset]):not([type=submit]):not([type=radio]):disabled,input:not([type=button]):not([type=checkbox]):not([type=color]):not([type=file]):not([type=hidden]):not([type=image]):not([type=range]):not([type=reset]):not([type=submit]):not([type=radio])[readonly],textarea:disabled{background-color:#f3f3f3;opacity:1;border-bottom-width:0}textarea{min-height:calc(1.5em + .75rem + 2px);border-width:1px}input[type=checkbox],input[type=radio]{width:1em;height:1em;margin-top:.25em;vertical-align:top;background-color:#fff;background-repeat:no-repeat;background-position:center;background-size:contain;border:1px solid rgba(0,0,0,.25);-webkit-appearance:none;appearance:none;color-adjust:exact;transition:background-color .15s ease-in-out,background-position .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){input[type=checkbox],input[type=radio]{transition:none}}input[type=checkbox]:active,input[type=radio]:active{filter:brightness(90%)}input[type=checkbox]:focus,input[type=radio]:focus{outline:0}input[type=checkbox]:checked,input[type=radio]:checked{background-color:#3aad4f;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10l3 3l6-6'/%3e%3c/svg%3e");border-color:#3aad4f}input[type=checkbox]:disabled,input[type=radio]:disabled{pointer-events:none;filter:none;opacity:.5}input[type=checkbox]{border-radius:.25em}input[type=radio]{border-radius:50%}select{display:block;width:100%;padding:.375rem 1.325rem .375rem .325rem;font-size:.8125rem;font-weight:400;line-height:1.5;color:#212529;vertical-align:middle;background-color:transparent;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 1024 1024'%3e%3cpath d='M960 213.3L512 810.7 64 213.3h896z' fill='%233aad4f'%3e%3c/path%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .325rem center;background-size:8px 8px;border:0 solid #e5e5e5;border-bottom-width:1px;border-radius:0;-webkit-appearance:none}select:focus{border-color:#3aad4f;outline:0}select:disabled{background-image:none;background-color:#f3f3f3;border-bottom-width:0}:root{--hx-primary:#3aad4f;--hx-font-sans-serif:"Microsoft Yahei","PingFang SC","Helvetica Neue",helvetica,arial,sans-serif;--hx-font-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--hx-gradient:linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0))}*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--hx-font-sans-serif);font-size:.8125rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0!important}p{margin-top:0;margin-bottom:0}a{color:#3aad4f;text-decoration:underline}a:hover{color:#2e8a3f}label{display:inline-block}textarea{resize:vertical}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{box-shadow:none}::-webkit-scrollbar-thumb{background-color:#e5e5e5;border-radius:0;box-shadow:none}.container{width:100%;padding-right:var(--hx-gutter-x,.625rem);padding-left:var(--hx-gutter-x,.625rem);margin-right:auto;margin-left:auto}.row{--hx-gutter-x:1.25rem;--hx-gutter-y:0;display:flex;flex-wrap:wrap;margin-top:calc(var(--hx-gutter-y) * -1);margin-right:calc(var(--hx-gutter-x)/ -2);margin-left:calc(var(--hx-gutter-x)/ -2)}.row>*{flex-shrink:0;width:100%;max-width:100%;padding-right:calc(var(--hx-gutter-x)/ 2);padding-left:calc(var(--hx-gutter-x)/ 2);margin-top:var(--hx-gutter-y)}.col-2{flex:0 0 auto;width:16.6666666667%}.col-5{flex:0 0 auto;width:41.6666666667%}.col-10{flex:0 0 auto;width:83.3333333333%}.col-form-label{padding-top:calc(.375rem + 1px);padding-bottom:calc(.375rem + 1px);margin-bottom:0;font-size:inherit;font-weight:400;line-height:1.5;color:#2d2d2d}.form-text{margin-top:.625rem;font-size:.875em;color:#919191}.form-check{display:block;min-height:1.21875rem;padding-left:1.5em;margin-bottom:.125rem}.form-check .form-check-input{float:left;margin-left:-1.5em}.form-check-input:disabled{pointer-events:none;filter:none;opacity:.5}.form-check-input:disabled~.form-check-label{opacity:.5}.form-check-inline{display:inline-block;padding-top:calc(.375rem + 1px);padding-bottom:calc(.375rem + 1px);margin-right:1rem;margin-bottom:0}.required::before{display:inline-block;margin-right:.5em;color:#f37777;content:"*"}.form-group{margin-bottom:1rem}.col-form-label{text-align:right}.form-check~.form-text{margin-top:0}.custom-option{position:relative;display:block;width:100%;padding:.375rem 1.5rem;clear:both;font-weight:400;color:#212529;text-align:inherit;white-space:nowrap;background-color:transparent;border:0 solid rgba(211,195,148,.47);border-bottom-width:1px}.custom-option:hover{cursor:pointer;background-color:#fffbea}.custom-option.active{color:#3aad4f}.custom-option.active::before{position:absolute;left:5px;width:16px;height:16px;content:"";background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%233aad4f' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 10l3 3l6-6'/%3e%3c/svg%3e")}.popover-body .custom-option:last-child{border-bottom-width:0}.popover{position:absolute;top:0;left:0;z-index:1060;display:block;max-width:276px;font-family:var(--hx-font-sans-serif);font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;word-spacing:normal;white-space:normal;line-break:auto;font-size:.7109375rem;word-wrap:break-word;background-color:#fff;background-clip:padding-box;border:1px solid #e8e0ca;border-radius:3px;box-shadow:0 0 8px 0 rgba(55,49,29,.15)}.popover-arrow{position:absolute;display:block;width:1rem;height:.5rem;margin:0 3px}.popover-arrow::after,.popover-arrow::before{position:absolute;display:block;content:"";border-color:transparent;border-style:solid}.popover-bottom{margin-top:.5rem}.popover-bottom>.popover-arrow{top:calc(-.5rem - 1px);left:50%;margin-left:-8px}.popover-bottom>.popover-arrow::before{top:0;border-width:0 .5rem .5rem .5rem;border-bottom-color:#e8e0ca}.popover-bottom>.popover-arrow::after{top:1px;border-width:0 .5rem .5rem .5rem;border-bottom-color:#fff}.popover-body{padding:0 .25rem;color:#212529}body,html{overflow-x:hidden}.popover-body{max-height:150px;overflow-y:auto}.table{width:100%;margin-bottom:1rem;color:#212529;vertical-align:top;border-color:#dee2e6;border-collapse:collapse;font-size:.8125rem}.table td{padding:.5rem;border:1px solid #dee2e6}.table span{display:none;font-size:.725rem}.table input[type=text]{display:inline-block!important;width:60px!important;padding:0 .325rem!important;font-size:.625rem!important;border:1px solid #e5e5e5!important;margin-left:.5rem}.table .form-check-input[value='y']:checked~span{display:inline-block}#J_Form{display:none}.form-group[data-group]{display:none}#J_Form:not([data-category='1']):not([data-sub-category='71']) .form-group[data-group=client]{display:block}#J_Form:not([data-category='1']):not([data-sub-category='33']):not([data-sub-category='72']) .form-group[data-group=plugin_package],[data-category='7'] .form-group[data-group=cloud],[data-category='7'][data-sell_type='2'] .form-group[data-group=cloud-sell_type2]{display:flex}.col-2{width:20%}.col-5{width:40%}.col-10{width:80%}.btn-mini{width:80px;height:1.5rem;color:#3aad4f;font-size:.625rem;background:#fff;border:1px solid #094;cursor:pointer;outline:0}.btn-mini:hover{background:#e1f0e1}.file-upload{display:flex;height:210px}#J_FileUploadBtn,.file-upload-item{display:none;width:120px;height:210px;text-align:center;border:1px solid transparent;border-radius:4px;overflow:hidden;position:relative;box-shadow:0 1px 1px rgba(0,0,0,.2);margin-right:4px}.file-upload-item.show{display:flex}.file-upload-item img{width:100%;height:100%}.file-upload-input{display:none}.file-upload-icon{display:inline-block;width:50px;height:50px;background:linear-gradient(#000,#000),linear-gradient(#000,#000);background-position:center;background-size:50% 2px,2px 50%;background-repeat:no-repeat}#J_FileUploadBtn{display:flex;justify-content:center;align-items:center;border:1px dashed #dddee1;border-radius:4px;text-align:center;cursor:pointer;position:relative}#J_FileUploadBtn:hover{border:1px dashed #094}.file-upload-cover{display:none;position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.6);justify-content:center;align-items:center}.file-upload-item:hover .file-upload-cover{display:flex}.file-upload-again,.file-upload-delete,.file-upload-loading{color:#fff;cursor:pointer}.file-upload-delete,.file-upload-loading{display:none}.file-upload-item.last .file-upload-again{display:none}.file-upload-item.last .file-upload-delete{display:block}.file-upload-item.loading .file-upload-loading{display:block}.file-upload .file-upload-item.loading .file-upload-cover{display:flex}.file-upload .file-upload-item.loading .file-upload-again,.file-upload .file-upload-item.loading .file-upload-delete{display:none}</style><form id=J_Form class=container style=width:640px;margin-left:0;margin-top:15px><div class="form-group row"><label class="col-2 col-form-label required">分类</label><div class=col-5><select id=J_Category name=category_level1 class=form-select><option selected=selected>请选择一级分类</option></select></div><div class=col-5><select id=J_SubCategory name=category_level2 class=form-select><option selected=selected>请选择二级分类</option></select></div></div><div class="form-group row"><label for=J_DisplayName class="col-2 col-form-label required">插件显示名称</label><div class=col-10><input type=text class=form-control id=J_DisplayName name=displayName placeholder=插件名称，最多40字符 value=""></div></div><div class="form-group row"><label for=J_Desc class="col-2 col-form-label required">简介</label><div class=col-10><input type=text class=form-control id=J_Desc name=description placeholder=简介（50个汉字以内） value=""></div></div><div class="form-group row"><label for=J_Keywords class="col-2 col-form-label required">标签</label><div class=col-10><input type=text class=form-control id=J_Keywords name=keywords placeholder=标签，多个标签使用空格分隔。 value=""></div></div><div class="form-group row"><label for=J_Id class="col-2 col-form-label">插件 ID</label><div class=col-10><input type=text readonly=readonly class=form-control id=J_Id name=plugin_id value=""><div class=form-text></div></div></div><div class="form-group row"><label for=J_Version class="col-2 col-form-label required">插件版本</label><div class=col-10><input type=text class=form-control id=J_Version name=version value=""><div class=form-text></div></div></div><div data-group=cloud class="form-group row"><label class="col-2 col-form-label required">云端平台兼容性</label><div class=col-10><div class="form-check form-check-inline"><input class=form-check-input type=radio id=J_All name=platforms value=all required checked=checked> <label class=form-check-label for=J_All>全部</label></div><div class="form-check form-check-inline"><input class=form-check-input type=radio id=J_Aliyun name=platforms value=aliyun required> <label class=form-check-label for=J_Aliyun>仅阿里云</label></div><div class="form-check form-check-inline"><input class=form-check-input type=radio id=J_Tcb name=platforms value=tcb required> <label class=form-check-label for=J_Tcb>仅腾讯云</label></div><div class=form-text></div></div></div><div data-group=cloud class="form-group row"><label for=J_Price class="col-2 col-form-label required">普通授权版价格</label><div class=col-10><input type=text class=form-control id=J_Price name=price onkeyup=formatPrice(this) onblur=normalizePrice(this) value=0.00><div class=form-text></div></div></div><div data-group=cloud class="form-group row"><label for=J_SellType class="col-2 col-form-label">源码授权版</label><div class=col-10><div class="form-check form-check-inline"><input class=form-check-input type=checkbox id=J_SellType name=sell_type value=2> <label class=form-check-label for=J_SellType>勾选开启源码授权版</label></div><div class=form-text>源码授权版会向插件购买者开放所有源代码，源码不加密、不混淆</div></div></div><div data-group=cloud-sell_type2 class="form-group row"><label for=J_CodePrice class="col-2 col-form-label">源码授权版价格</label><div class=col-10><input type=text class=form-control id=J_CodePrice name=code_price onkeyup=formatPrice(this) onblur=normalizePrice(this) value=0.00><div class=form-text></div></div></div><div data-group=cloud class="form-group row"><label for=J_QQ class="col-2 col-form-label">QQ</label><div class=col-10><input type=text class=form-control id=J_QQ name=publisher_qq placeholder="插件作者 QQ" value=""><div class=form-text></div></div></div><div class="form-group row"><label for=J_HxVersion class="col-2 col-form-label">HbuilderX/cli最低兼容版本</label><div class=col-10><select id=J_HxVersion class=form-select><option selected=selected>请选择版本号</option></select></div></div><div class="form-group row"><label for=J_NpmUrl class="col-2 col-form-label">npm 地址</label><div class=col-10><input type=text class=form-control id=J_NpmUrl placeholder="npm 地址" value=""></div></div><div class="form-group row"><label for=J_Repository class="col-2 col-form-label">github 地址</label><div class=col-10><input type=text class=form-control id=J_Repository placeholder="github 地址" value=""></div></div><div data-group=plugin_package class="form-group row"><label for=J_Example class="col-2 col-form-label">插件使用示例工程</label><div class=col-10><div class="form-check form-check-inline"><input class=form-check-input type=checkbox id=J_Example name=plugin_example> <label class=form-check-label for=J_Example>上传当前项目</label></div><div class=form-text></div></div></div><div class=form-group><label id=J_UpdateLog_Label for=J_UpdateLog class="col-form-label required">更新日志，自动与插件根目录changelog.md保持同步</label> <textarea id=J_UpdateLog name=update_log class=form-control rows=2></textarea><div class=form-text></div></div><div class=form-group><label class=col-form-label>插件预览截图</label><div id=J_FileUpload class=file-upload><div class=file-upload-item><img><div class=file-upload-cover><div class=file-upload-loading>处理中...</div><div class=file-upload-again>重新上传</div><div class=file-upload-delete>删除</div></div></div><div class=file-upload-item><img><div class=file-upload-cover><div class=file-upload-loading>处理中...</div><div class=file-upload-again>重新上传</div><div class=file-upload-delete>删除</div></div></div><div class=file-upload-item><img><div class=file-upload-cover><div class=file-upload-loading>处理中...</div><div class=file-upload-again>重新上传</div><div class=file-upload-delete>删除</div></div></div><div class=file-upload-item><img><div class=file-upload-cover><div class=file-upload-loading>处理中...</div><div class=file-upload-again>重新上传</div><div class=file-upload-delete>删除</div></div></div><div class=file-upload-item><img><div class=file-upload-cover><div class=file-upload-loading>处理中...</div><div class=file-upload-again>重新上传</div><div class=file-upload-delete>删除</div></div></div><div id=J_FileUploadBtn><i class=file-upload-icon></i></div></div><div class=form-text></div></div><div data-group=client class=form-group><div style=display:flex;justify-content:space-between><label class=col-form-label>前端平台兼容性</label><div style="padding:calc(.275rem + 1px) 0"><button id=J_F_P_B_u type=button class=btn-mini>全部不确定</button> <button id=J_F_P_B_n type=button class=btn-mini>全部不支持</button> <button id=J_F_P_B_y type=button class=btn-mini>全部支持</button></div></div><table class=table cellspacing=0 cellpadding=0><colgroup><col width=100px><col width=150px></colgroup><tbody id=J_F_P></tbody></table></div><div class=form-group><label for=J_DeclarationPermissions class="col-form-label required" style=text-align:left>本插件需要申请的系统权限列表：</label> <textarea id=J_DeclarationPermissions name=declaration_permissions class=form-control rows=2></textarea><div class=form-text></div></div><div class=form-group><label for=J_DeclarationCollectData class="col-form-label required" style=text-align:left>本插件采集的数据、发送的服务器地址、以及数据用途说明：</label> <textarea id=J_DeclarationCollectData name=declaration_collect_data class=form-control rows=2></textarea><div class=form-text></div></div><div class=form-group><label for=J_DeclarationAds class="col-form-label required" style=text-align:left>本插件是否包含广告，如包含需详细说明广告表达方式、展示频率：</label> <textarea id=J_DeclarationAds name=declaration_ads class=form-control rows=2></textarea><div class=form-text></div></div></form><script>!function(){"use strict";function e(e,t){return t||(t=document.documentElement),Array.from(t.querySelectorAll(e))}function t(e,t){return t||(t=document.documentElement),t.querySelector(e)}const n="select";function a(e){const t=e.target,{left:n,top:a,height:o}=t.getBoundingClientRect(),i=document.createElement("div");var c,s;i._$ref=t,i.className="popover popover-bottom",i.style.left=window.pageXOffset+n+"px",i.style.top=window.pageYOffset+a+o+2+"px",i.innerHTML=(c=t.options,s=t.value,`<div class="popover-arrow"></div><div class="popover-body">${Array.from(c).filter((e=>""!==e.value)).map((e=>`<span class="custom-option${s===e.value?" active":""}" data-value="${e.value}">${e.textContent}</span>`)).join("")}</div>`),t.parentNode.insertBefore(i,t.nextSibling)}const o=t("#J_Form"),i=t("#J_Category"),c=t("#J_SubCategory"),s=t("#J_Id"),r=t("#J_DisplayName"),d=t("#J_Desc"),l=t("#J_Keywords"),u=t("#J_SellType"),p=t("#J_Version"),f=t("#J_HxVersion"),v=t("#J_UpdateLog"),g=t("#J_UpdateLog_Label"),m=t("#J_NpmUrl"),y=t("#J_Example"),h=t("#J_Repository"),_=t("#J_F_P"),E=t("#J_Price"),b=t("#J_CodePrice"),k=t("#J_All"),w=t("#J_Tcb"),x=t("#J_Aliyun"),J=t("#J_QQ"),L=t("#J_DeclarationAds"),$=t("#J_DeclarationCollectData"),I=t("#J_DeclarationPermissions"),A=t("#J_FileUpload"),C=e("#J_FileUpload .file-upload-item"),F=t("#J_FileUploadBtn"),P={};const D={};const N=[[new RegExp("^0(\\d+)$"),"$1"],[new RegExp("[^\\d\\.]+$"),""],[new RegExp("\\.(\\d?)\\.+"),".$1"],[new RegExp("^(\\d+\\.\\d{2}).+"),"$1"]];function S(){const n=t(".last",A);n&&n.classList.remove("last");const a=e(".show",A),o=a[a.length-1];o&&o.classList.add("last"),a.length>=5?F.style.display="none":F.style.display="flex"}function M({data:e}){var n;n=e.tips,Object.keys(n).forEach((e=>{const a=t('[name="'+e+'"]');if(a){const o=a.closest(".form-group");if(o){const a=t(".form-text",o);a&&(a.innerHTML=n[e])}}})),function(e){!function(e){j(i,q(e,"请选择一级分类"))}(e);const t=e[0];O(t.id,e,!1),1===e.length&&(i.value=t.id,i.dispatchEvent(new CustomEvent("change")),1===t.children.length&&(c.value=t.children[0].id,c.dispatchEvent(new CustomEvent("change"))))}(e.category),R(e.pkg.version,e.changelog),function(e,t){let n=e;if(t){const a=e.findIndex((e=>e===t));-1!==a&&(n=e.splice(0,a+1))}j(f,q(n.map((e=>({id:e,name:e}))),"请选择版本号"))}(e.hxVersionList,e.category.length>1?"3.0.7":""),function(e){const t=[];e.forEach((e=>{const n=e.children.length;e.children.forEach(((a,o)=>{t.push(`<tr data-type="${e.name}" data-platform="${a.name}">\n${0===o?'<td rowspan="'+n+'">'+e.name+"</td>":""}\n<td class="f_p_name">${a.name}</td>\n<td>\n${X(a.id,"u","不确定")}\n${X(a.id,"n","不支持")}\n${X(a.id,"y","支持")}\n${1!==e.id&&24!==e.id?'<span>&nbsp;&nbsp;&nbsp;&nbsp;最低版本号:<input id="J_F_P_D_'+a.id+'" type="text" value="'+a.desc+'"/></span>':""}\n</td>\n</tr>`)}))})),_.innerHTML=t.join("")}(e.fe_platforms),function(e,n){(function(e){if(Q(r,e.displayName),Q(s,e.id),Q(d,e.description),Q(l,Array.isArray(e.keywords)?e.keywords.join(" "):""),Q(p,e.version),Q(h,e.repository),e.engines&&e.engines.HBuilderX){let t=e.engines.HBuilderX;t=t.replace("^","").replace("~",""),Q(f,t),-1===f.selectedIndex&&Q(f,"")}})(e),function(e,t){const{category:n,screenshots:a,sale:o,contact:s,npmurl:r,declaration:d}=e;if(Array.isArray(n)&&2===n.length){const e=n[0],a=t.find((t=>t.name===e));if(a){i.value=a.id,i.dispatchEvent(new CustomEvent("change"));const e=n[1],t=a.children.find((t=>t.name===e));t&&(c.value=t.id,c.dispatchEvent(new CustomEvent("change")))}}Array.isArray(a)&&a.forEach((e=>{console.log(e)}));if(o){const{regular:e,sourcecode:t}=o;if(e&&Q(E,z(e.price)),t){const e=z(t.price);Q(b,e),Number(e)>0&&(u.checked=!0,u.dispatchEvent(new CustomEvent("change")))}}s&&Q(J,s.qq);r&&Q(m,r);d&&(Q(L,d.ads),Q($,d.data),Q(I,d.permissions))}(e.dcloudext||{},n),function(e){const{platforms:n}=e;if(n){const{cloud:e,client:a}=n;e&&function(e){const{tcb:t,aliyun:n}=e;"y"===t&&"y"!==n?w.checked=!0:"y"===n&&"y"!==t?x.checked=!0:k.checked=!0}(e),a&&function(e){if(Object.keys(e).forEach((n=>{Object.keys(e[n]).forEach((a=>{const o=e[n][a],i="string"!=typeof o?"y":o,c=`[data-type="${n}"][data-platform="${a}"] `,s=t(`${c} input[type="radio"][value="${i}"]`,_);if(!s)return;if(s.checked=!0,"y"!==i)return;if(s.dispatchEvent(new CustomEvent("change")),!o.minVersion)return;const r=t(`${c} input[type="text"]`);r&&(r.value=o.minVersion)}))})),!e.Vue){const e=t('[data-type="Vue"][data-platform="vue2"] input[type="radio"][value="y"]',_);if(!e)return;e.checked=!0}}(a)}}(e.uni_modules||{})}(e.pkg,e.category),e.isExists&&(i.disabled=!0,c.disabled=!0),e.pluginInfo&&e.pluginInfo.images&&function(e){let t=0;e.forEach((e=>{const n=C[e.sort];n&&(t++,t>=4&&(F.style.display="none"),n._id=e.id,n.querySelector("img").src=e.url,n.classList.add("show"))})),S()}(e.pluginInfo.images)}function V(n){!function(n,a,s,r){if(H)return;H=!0,"upload"===n&&(p.addEventListener("input",(function(){R(p.value,r)})),u.addEventListener("change",(function(){u.checked?o.setAttribute("data-sell_type","2"):o.removeAttribute("data-sell_type")})));function d(e,n){const o=C[e];return function(e,t){return hbuilderx.postMessage({type:"uploadImage",data:{index:e,pluginId:t}}),new Promise(((t,n)=>{D[e]=e=>{"error"===e.status?n(e.errMsg):t(e)}}))}(e,a.id).then((e=>{"success"===e.status&&(o._id=e.id,t("img",o).src=e.url),o.classList.remove("loading"),"new"===n&&S()})).catch((()=>{o.classList.remove("loading")}))}function l(e,n){t(".file-upload-delete",e).addEventListener("click",(function(){var n,o;e.classList.add("loading"),(n=e._id,o=a.id,hbuilderx.postMessage({type:"deleteImage",data:{id:n,pluginId:o}}),new Promise(((e,t)=>{P[n]=n=>{"success"===n.status?e(n.id):t(n.errMsg)}}))).then((()=>{delete e._id,e.classList.remove("loading"),e.classList.remove("show"),t("img",e).removeAttribute("src"),S()})).catch((()=>{e.classList.remove("loading")}))})),t(".file-upload-again",e).addEventListener("click",(function(){d(n,"again")}))}function f(n){t("#J_F_P_B_"+n).addEventListener("click",(function(){e('[type=radio][value="'+n+'"]',_).forEach((e=>e.checked=!0))}))}i.addEventListener("change",(function(){const e=i.options[i.selectedIndex].value;o.setAttribute("data-category",e),o.removeAttribute("data-sub-category"),O(e,s)})),c.addEventListener("change",(function(){o.setAttribute("data-sub-category",c.options[c.selectedIndex].value)})),F.addEventListener("click",(function(){d(e(".show",A).length,"new")})),C.forEach(((e,t)=>l(e,t))),f("y"),f("n"),f("u"),window.normalizePrice=function(e){e.value=z(e.value)},window.formatPrice=function(e){const t=e.selectionStart;N.forEach((t=>{e.value=e.value.replace(t[0],t[1])})),e.selectionEnd=t}}(n.data.type,n.data.pkg,n.data.category,n.data.changelog),M(n),"update"===n.data.type&&(i.disabled=!0,c.disabled=!0,p.disabled=!0,u.disabled=!0,v.parentElement.style.display="none"),o.style.display="block"}let T,U,B,H=!1;function R(e,t){g.innerText=`版本号[${e}]的更新日志，自动与插件根目录changelog.md保持同步`,t&&t.version&&(e.trim()===t.version.trim()?v.value=t.log:v.value="")}function j(e,t){e.innerHTML=t}function q(e,t){const n=[t?'<option value="">'+t+"</option>":""];return e&&e.forEach((function(e){n.push('<option value="'+e.id+'">'+e.name+"</option>")})),n.join("")}function O(e,t,n=!0){const a=t.find((function(t){return t.id==e}));j(c,q(a&&a.children,"请选择二级分类")),n&&a&&1===a.children.length&&(c.value=a.children[0].id,c.dispatchEvent(new CustomEvent("change")))}function X(e,t,n){return'<input value="'+t+'" type="radio" name="f_p_'+e+'" id="J_F_P_'+t+"_"+e+'" class="form-check-input"'+("u"===t?" checked ":"")+'/><label class="form-check-label" for="J_F_P_'+t+"_"+e+'">'+n+"</label>"}function Q(e,t){e.value=t||""}function z(e){return parseFloat(e).toFixed(2)||"0.00"}function G(e,n,a,o){function s(e,t=""){e.scrollIntoView(),e.focus(),o({type:"error",data:t})}const g=(n=JSON.parse(JSON.stringify(n))).dcloudext||(n.dcloudext={}),A=n.uni_modules||(n.uni_modules={});if(!i.value)return s(i,"请选择一级分类");if(!c.value)return s(c,"请选择二级分类");const C=i.value,F=c.value;if(g.category=[i.options[i.selectedIndex].text,c.options[c.selectedIndex].text],!r.value)return s(r,"请填写插件名称");if(n.displayName=r.value,!d.value)return s(d,"请填写插件简介");if(n.description=d.value,!l.value)return s(l,"请填写标签");if(n.keywords=l.value.split(" "),!p.value)return s(p,"请填写版本号");n.version=p.value;const P=n.engines||(n.engines={});if(f.value&&(P.HBuilderX="^"+f.value),!t('[type="radio"][value="u"]:checked,[type="radio"][value="y"]:checked',_))return s(_,"前端平台兼容性不能全部为不支持");const D=A.platforms||(A.platforms={});D.client=function(e){const n={};return e.forEach((e=>{n[e.name]=e.children.reduce(((e,n)=>{const a=t(`[type="radio"][name="f_p_${n.id}"]:checked`,_).value;if("y"===a){const o=t("#J_F_P_D_"+n.id);o&&o.value?e[n.name]={minVersion:o.value}:e[n.name]=a}else e[n.name]=a;return e}),{})})),n}(a);const N=v.value;return"upload"!==e||N?(n.repository=h.value,g.npmurl=m.value,k.checked?D.cloud={aliyun:"y",tcb:"y"}:x.checked?D.cloud={aliyun:"y",tcb:"n"}:w.checked&&(D.cloud={aliyun:"n",tcb:"y"}),g.sale={regular:{price:z(E.value)},sourcecode:{price:u.checked?z(b.value):"0.00"}},g.contact={qq:J.value},I.value?$.value?L.value?(g.declaration={ads:L.value,data:$.value,permissions:I.value},o({type:"error",data:""}),o({type:"submit",data:{pkg:n,update_log:N,category_level1:C,category_level2:F,plugin_example:y.checked}})):s(L,"请填写本插件是否包含广告，如包含需详细说明广告表达方式、展示频率"):s($,"请填写本插件采集的数据、发送的服务器地址、以及数据用途说明"):s(I,"请填写本插件需要申请的系统权限列表")):s(v,"请填写更新日志")}window.addEventListener("click",(t=>{const o=t.target;if(!o)return;const i=e(n),c=e("select ~ .popover");for(const e of i)if(e.contains(o)){let n=!1;if(c.forEach((t=>{t._$ref===e&&(n=!0),t.parentNode.removeChild(t)})),n)return;return a(t)}for(const t of c){if(t.contains(o)){const n=e("select ~ .popover .custom-option",t).find((e=>e.contains(o)));if(n){const e=t._$ref;e.value=n.getAttribute("data-value"),e.dispatchEvent(new CustomEvent("change"))}}t.parentNode.removeChild(t)}})),window.addEventListener("mousedown",(t=>{const a=t.target;if(a)for(const o of e(n))if(o.contains(a)){t.preventDefault();break}}));let K=!1;function Y(e){switch(e.type){case"Init":U=e.data.pkg,T=e.data.type,V(e);break;case"Update":e.data.pkg=U,B=e.data.fe_platforms,function(e){M(e)}(e),K=!0;break;case"DeleteImage":!function(e){const t=P[e.id];t&&(delete P[e.id],t(e))}(e.data);break;case"UploadImage":!function(e){const t=D[e.index];t&&(delete D[e.index],t(e))}(e.data);break;case"UploadImageStarted":!function({index:e}){const t=C[e].classList;t.add("show"),t.add("loading"),S()}(e.data);break;case"Focus":!function(e){const n=t(e);n&&(n.scrollIntoView(),n.focus())}(e.data);break;case"DialogButtonEvent":!function(e,t){"取消"===e?W({type:"cancel"}):"提交"===e&&(K?G(T,t,B,W):W({type:"error",data:"数据加载中，请稍候重试！"}))}(e.button,U)}}function W(e){hbuilderx.postMessage(e)}!function(e){if(e)"undefined"!=typeof hbuilderx?e():window.addEventListener("hbuilderxReady",e)}((()=>{const e=__INIT_MESSAGE__;V(e),U=e.data.pkg,T=e.data.type,hbuilderx.onDidReceiveMessage(Y),setTimeout((()=>{W({type:"loaded"})}),100)}))}();</script>