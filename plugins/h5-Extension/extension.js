/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={817:(e,n,t)=>{const i=t(283),o=t(325),l=t(460),a=t(942).loadMessageBundle(t(17).join(__dirname,"360.js"));async function r(e){let n=a(0,null),t=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.360",name:e.name,clientId:e.clientId,customId:e.customId}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}e.exports={_360Publish:async function(e){let n=a(7,null,"360"),t=a(8,null,"360"),l=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let t=e.clientId;return null==e.name||null==e.name?void i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"}):void r({workspaceFolder:l,name:e.name,customId:"",clientId:t})}let s=l.id,u=l.name;if(s){let e=o.readPublishConfig(s);e&&e._360NameInput&&(u=e._360NameInput)}var c;i.window.showFormDialog({validate:async function(e){return e.nameInput?!o.getInvalidInputName().includes(e.nameInput)||(this.showError(t),!1):(this.showError(n),!1)},onChanged:function(e,n,t){},...(c={nameInput:u},{submitButtonText:a(3,null),cancelButtonText:a(4,null),title:a(5,null),hideSubTitile:!0,width:550,height:200,formItems:[{type:"input",name:"nameInput",placeholder:a(6,null),value:c.nameInput?c.nameInput:""}]})}).then((function(n){s&&o.writePublishConfig(s,{_360NameInput:n.nameInput}),r({workspaceFolder:l,name:n.nameInput,customId:e.args.customId})}))}}},329:(e,n,t)=>{const i=t(283),o=t(325),l=t(460),a=t(942).loadMessageBundle(t(17).join(__dirname,"alipay.js"));var r=t(147);async function s(e){let n=a(0,null),t=a(1,null),o=a(2,null);const r="minidev-ci";let s=a(3,null,r),u=i.window.createOutputChannel("HBuilder"),c=a(4,null),p=a(5,null);if(e&&e.upload){let n=await i.extensions.existsPlugin(r);if(0!=n.code)return void(e.clientId?i.cliconsole.log({clientId:e.clientId,msg:n.msg,status:"Error"}):u.appendLine(n.msg));if(!n.exists)return void(e.clientId?(i.cliconsole.log({clientId:e.clientId,msg:s,status:"Error"}),i.extensions.installPlugin(r)):i.window.showMessageBox({type:"warning",title:"",text:s,buttons:[c,p]}).then((e=>{console.log(e),e==c&&i.extensions.installPlugin(r)})))}e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Info"});let d=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.alipay",name:e.name,appid:e.appid,clientId:e.clientId,customId:e.customId,subPackage:e.subPackage,upload:e.upload});if(d&&0==d.code){if(e&&e.upload){let n=i.extensions.getExtension(r);return void(n&&await n.upload({appid:e.appid,buildClientPath:d.buildClientPath,privatekey:e.privatekey,version:e.version,description:e.description,clientId:e.clientId}))}if(!d.buildServerPath&&!d.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"})}else u.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}function u(e){let n=a(6,null),t=a(7,null),i=a(8,null),o=a(9,null),l=a(10,null),r=a(11,null),s=a(12,null),u=`${a(13,null)} <a href="https://uniapp.dcloud.net.cn/hybrid">${a(14,null)}</a>`,c=a(15,null),p=`${a(16,null)} <a href="https://hx.dcloud.net.cn/cli/publish-mp-alipay?id=uploadPrivateKey">${l}</a>`,d=a(17,null),h=a(18,null),m=a(19,null);return{customButtons:[{text:n},{text:i},{text:t,role:"accept"}],title:o,hideSubTitile:!0,width:550,height:200,focusName:"appidInput",formItems:[{type:"input",name:"nameInput",placeholder:r,value:e.nameInput?e.nameInput:""},{type:"input",name:"appidInput",placeholder:s,value:e.appidInput?e.appidInput:""},{type:"checkBox",name:"subPackageCheckBox",label:u,value:!!e.subPackageCheckBox&&e.subPackageCheckBox},{type:"input",name:"subPackageInput",placeholder:c,isHidden:1!=e.subPackageCheckBox,value:e.subPackageInput?e.subPackageInput:""},{type:"checkBox",name:"uploadCheckBox",label:p,value:!!e.uploadAlipayCheckBox&&e.uploadAlipayCheckBox},{type:"input",name:"alipayVersionInput",placeholder:d,isHidden:!e.uploadAlipayCheckBox||1!=e.uploadAlipayCheckBox,value:e.alipayVersionInput},{type:"fileSelectInput",name:"fileSelectInput",placeholder:h,isHidden:!e.uploadAlipayCheckBox||1!=e.uploadAlipayCheckBox,value:e.fileSelectInput?e.fileSelectInput:""},{type:"input",name:"alipayDescInput",placeholder:m,isHidden:!e.uploadAlipayCheckBox||1!=e.uploadAlipayCheckBox,value:e.alipayDescInput}].map((e=>{if(e&&!e.isHidden)return e}))}}e.exports={aliPublish:async function(e){let n=a(20,null,a(21,null)),t=a(22,null,a(23,null)),l=a(24,null,a(25,null)),c=a(26,null),p=a(27,null),d=a(28,null),h=a(29,null),m=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let l=e.args.clientId;if(null==e.args.name||null==e.args.name)return void i.cliconsole.log({clientId:l,msg:n,status:"Error"});let a=e.args.appid;if(null==a||null==a){let e=o.getAppInfo(m,"mp-alipay");if(e&&e.appid&&(a=e.appid),null==a)return void i.cliconsole.log({clientId:l,msg:t,status:"Error"})}if(e.args.upload){if(!e.args.version)return void i.cliconsole.log({clientId:l,msg:p,status:"Error"});if(!e.args.privatekey)return void i.cliconsole.log({clientId:l,msg:d,status:"Error"});if(!r.existsSync(e.args.privatekey))return void i.cliconsole.log({clientId:l,msg:h,status:"Error"})}return void s({workspaceFolder:m,name:e.name,appid:a,subPackage:e.subPackage,customId:"",clientId:l,upload:e.args.upload,version:e.args.version,description:e.args.description,privatekey:e.args.privatekey})}let f,I,g,w,b=m.id,v=m.name,k=o.getAppInfo(m,"mp-alipay");if(k&&k.appid&&(f=k.appid),b){let e=o.readPublishConfig(b);e&&(e.alipayNameInput&&(v=e.alipayNameInput),!f&&e.alipayAppidInput&&(f=e.alipayAppidInput),!I&&e.alipayVersion&&(I=e.alipayVersion),!g&&e.alipayPrivatekey&&(g=e.alipayPrivatekey),!w&&e.alipayVersionDesc&&(w=e.alipayVersionDesc))}i.window.showFormDialog({validate:async function(e){if(!e.nameInput)return this.showError(n),!1;if(o.getInvalidInputName().includes(e.nameInput))return this.showError(l),!1;if(!e.appidInput)return this.showError(t),!1;if(e.subPackageCheckBox&&!e.subPackageInput)return this.showError(c),!1;if(e.uploadCheckBox){if(!e.alipayVersionInput)return this.showError(p),!1;if(!e.fileSelectInput)return this.showError(d),!1;if(!r.existsSync(e.fileSelectInput))return this.showError(h),!1}return!0},onChanged:function(e,n,t){if(1==t.uploadCheckBox&&(t.uploadAlipayCheckBox=!0),"subPackageCheckBox"==e){let e=u(t);return this.updateForm(e),!0}if("uploadCheckBox"==e){t.alipayVersionInput||(t.alipayVersionInput=I),t.fileSelectInput||(t.fileSelectInput=g),t.alipayDescInput||(t.alipayDescInput=w);let e=u(t);this.updateForm(e)}return!0},...u({nameInput:v,appidInput:f,subPackageCheckBox:!1,alipayVersionInput:I,fileSelectInput:g,alipayDescInput:w})}).then((function(n){if(0===n.buttonIndex)return void i.window.showManifestEditPart({projectId:b,optionType:"mp-alipay.appid"});if(1===n.buttonIndex)return;const t=n.result;if(b){let e={alipayNameInput:t.nameInput,alipayAppidInput:t.appidInput};t.uploadCheckBox&&(e.alipayVersion=t.alipayVersionInput,e.alipayPrivatekey=t.fileSelectInput,e.alipayVersionDesc=t.alipayDescInput),o.writePublishConfig(b,e)}s({workspaceFolder:m,name:t.nameInput,appid:t.appidInput,subPackage:t.subPackageInput,customId:e.args.customId,clientId:e.args.clientId,upload:t.uploadCheckBox,version:t.alipayVersionInput,description:t.alipayDescInput,privatekey:t.fileSelectInput})}))}}},508:(e,n,t)=>{const i=t(283),o=t(325),l=t(460),a=t(942).loadMessageBundle(t(17).join(__dirname,"baidu.js"));async function r(e){let n=a(0,null),t=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.baidu",name:e.name,appid:e.appid,clientId:e.clientId,customId:e.customId,subPackage:e.subPackage}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}function s(e){let n=a(3,null),t=a(4,null),i=a(5,null),o=a(6,null),l=a(7,null),r=a(8,null),s=`${a(9,null)} <a href="https://uniapp.dcloud.net.cn/hybrid">${a(10,null)}</a>`,u=a(11,null);return{customButtons:[{text:n},{text:i},{text:t,role:"accept"}],title:o,hideSubTitile:!0,width:550,height:200,focusName:"appidInput",formItems:[{type:"input",name:"nameInput",placeholder:l,value:e.nameInput?e.nameInput:""},{type:"input",name:"appidInput",placeholder:r,value:e.appidInput?e.appidInput:""},{type:"checkBox",name:"subPackageCheckBox",label:s,value:!!e.subPackageCheckBox&&e.subPackageCheckBox},{type:"input",name:"subPackageInput",placeholder:u,isHidden:1!=e.subPackageCheckBox,value:e.subPackageInput?e.subPackageInput:""}].map((e=>{if(e&&!e.isHidden)return e}))}}e.exports={bdPublish:async function(e){let n=a(12,null,a(13,null)),t=a(14,null,a(15,null)),l=a(16,null,a(17,null)),u=a(18,null),c=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let l=e.clientId;if(null==e.name||null==e.name)return void i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"});let a=e.appid;if(null==a||null==a){let n=o.getAppInfo(c,"mp-baidu");if(n&&n.appid&&(a=n.appid),null==a)return void i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"})}return void r({workspaceFolder:c,name:e.name,appid:a,subPackage:e.subPackage,customId:"",clientId:l})}let p,d=c.id,h=c.name,m=o.getAppInfo(c,"mp-baidu");if(console.log("baiduInfo",m),m&&m.appid&&(p=m.appid),d){let e=o.readPublishConfig(d);e&&(e.baiduNameInput&&(h=e.baiduNameInput),!p&&e.baiduAppidInput&&(p=e.baiduAppidInput))}i.window.showFormDialog({validate:async function(e){return e.nameInput?o.getInvalidInputName().includes(e.nameInput)?(this.showError(l),!1):e.appidInput?!(e.subPackageCheckBox&&!e.subPackageInput&&(this.showError(u),1)):(this.showError(t),!1):(this.showError(n),!1)},onChanged:function(e,n,t){if("subPackageCheckBox"==e){let e=s(t);this.updateForm(e)}},...s({nameInput:h,appidInput:p,subPackageCheckBox:!1})}).then((function(n){if(0===n.buttonIndex)return void i.window.showManifestEditPart({projectId:d,optionType:"mp-baidu.appid"});if(1===n.buttonIndex)return;const t=n.result;d&&o.writePublishConfig(d,{baiduNameInput:t.nameInput,baiduAppidInput:t.appidInput}),r({workspaceFolder:c,name:t.nameInput,appid:t.appidInput,subPackage:t.subPackageInput,customId:e.args.customId})}))}}},275:(e,n,t)=>{const i=t(283),o=t(325),l=t(460),a=t(942).loadMessageBundle(t(17).join(__dirname,"bytedance.js"));async function r(e){let n=a(0,null),t=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.bytedance",name:e.name,appid:e.appid,clientId:e.clientId,customId:e.customId,subPackage:e.subPackage}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}function s(e){let n=a(3,null),t=a(4,null),i=a(5,null),o=a(6,null),l=a(7,null),r=a(8,null),s=`${a(9,null)} <a href="https://uniapp.dcloud.net.cn/hybrid">${a(10,null)}</a>`,u=a(11,null);return{customButtons:[{text:n},{text:i},{text:t,role:"accept"}],title:o,hideSubTitile:!0,width:550,height:200,focusName:"appidInput",formItems:[{type:"input",name:"nameInput",placeholder:l,value:e.nameInput?e.nameInput:""},{type:"input",name:"appidInput",placeholder:r,value:e.appidInput?e.appidInput:""},{type:"checkBox",name:"subPackageCheckBox",label:s,value:!!e.subPackageCheckBox&&e.subPackageCheckBox},{type:"input",name:"subPackageInput",placeholder:u,isHidden:1!=e.subPackageCheckBox,value:e.subPackageInput?e.subPackageInput:""}].map((e=>{if(e&&!e.isHidden)return e}))}}e.exports={btPublish:async function(e){let n=a(12,null,a(13,null)),t=a(14,null,a(15,null)),l=a(16,null,a(17,null)),u=a(18,null),c=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let l=e.clientId;if(null==e.name||null==e.name)return void i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"});let a=e.appid;if(null==a||null==a){let n=o.getAppInfo(c,"mp-toutiao");if(n&&n.appid&&(a=n.appid),null==a)return void i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"})}return void r({workspaceFolder:c,name:e.name,appid:a,subPackage:e.subPackage,customId:"",clientId:l})}let p,d=c.id,h=c.name,m=o.getAppInfo(c,"mp-toutiao");if(m&&m.appid&&(p=m.appid),d){let e=o.readPublishConfig(d);e&&(e.bytedanceNameInput&&(h=e.bytedanceNameInput),!p&&e.bytedanceAppidInput&&(p=e.bytedanceAppidInput))}i.window.showFormDialog({validate:async function(e){return e.nameInput?o.getInvalidInputName().includes(e.nameInput)?(this.showError(l),!1):e.appidInput?!(e.subPackageCheckBox&&!e.subPackageInput&&(this.showError(u),1)):(this.showError(t),!1):(this.showError(n),!1)},onChanged:function(e,n,t){if("subPackageCheckBox"==e){let e=s(t);this.updateForm(e)}},...s({nameInput:h,appidInput:p,subPackageCheckBox:!1})}).then((function(n){if(0===n.buttonIndex)return void i.window.showManifestEditPart({projectId:d,optionType:"mp-toutiao.appid"});if(1===n.buttonIndex)return;const t=n.result;d&&o.writePublishConfig(d,{bytedanceNameInput:t.nameInput,bytedanceAppidInput:t.appidInput}),r({workspaceFolder:c,name:t.nameInput,appid:t.appidInput,subPackage:t.subPackageInput,customId:e.args.customId})}))}}},460:(e,n,t)=>{var i=t(283);e.exports={compile:function(e){return new Promise(((n,t)=>{i.request("MainHostPublish.compile",e).then((e=>{n(e)}),t)}))},uniappExtensionCompile:async function(e){let n=i.extensions.getExtension("uniapp-extension");return await n.uniappExtensionCompile(e)}}},24:(e,n,t)=>{var i=t(283);const o=t(930),l=t(301),a=t(192),r=t(508),s=t(329),u=t(275),c=t(829),p=t(817),d=t(864),h=t(97),m=t(8),f=t(369);e.exports={activate:function(e){i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.weapp",(e=>{o.weAppPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.h5",(n=>{l.h5Publish(n,e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.jingdong",(e=>{a.jdPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.baidu",(e=>{r.bdPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.alipay",(e=>{s.aliPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.bytedance",(e=>{u.btPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.qq",(e=>{c.qqPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.360",(e=>{p._360Publish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.kuaishou",(e=>{d.ksPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.huawei",(e=>{h.hwPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.quickappunion",(e=>{m.qauPublish(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.nApp.export.wgt",(e=>{f.exportWgt(e)})),i.workspace.registerWorkspaceFolderLauncher("uniapp.publish.nApp.export.resource",(e=>{f.exportResource(e)}))},deactivate:function(){}}},301:(e,n,t)=>{var i=t(283),o=(t(147),t(37),t(17)),l=t(460),a=t(325);const r=t(942).loadMessageBundle(t(17).join(__dirname,"h5.js")),s=r(0,null),u=r(1,null),c=r(2,null),p=r(3,null),d=r(4,null),h=r(5,null),m=r(6,null),f=r(7,null);function I(e,n,t,i){let o=r(8,null),l=`<a href="https://hx.dcloud.net.cn/cli/publish-h5">${r(9,null)}</a>`,a=`${s} <a href='https://uniad.dcloud.net.cn'>uniAD</a> ${u}，<a href='https://uniad.dcloud.net.cn/login'>${c}</a> | <a href='https://uniapp.dcloud.io/component/ad.html'>${p}</a>`,d=r(10,null),h=r(11,null),m=r(12,null),f=r(13,null),I=`${r(14,null)} <a href='https://uniapp.dcloud.net.cn/ssr?id=distribute'>${r(15,null)}</a>`;const g=r(16,null);let w=`${r(17,null)} <a href="https://uniapp.dcloud.io/uniCloud/hosting.html">${g}</a>`;const b=`${r(18,null)} <a href="https://uniapp.dcloud.io/uni-stat-v2.html#create-sourcemap">${g}</a>`;return{title:o,hideSubTitile:!0,width:600,height:e.webHostingCheckBox?480:200,footer:a,cornerWidget:{type:"label",name:"cornerTip",text:l},formItems:[{type:"input",name:"websiteTitle",label:d,placeholder:h,value:e.websiteTitle?e.websiteTitle:""},{type:"input",name:"websiteDomain",label:m,placeholder:f,value:e.websiteDomain?e.websiteDomain:""},{type:"checkBox",name:"uploadSourceMap",label:b,value:!!e.uploadSourceMap&&e.uploadSourceMap,isHidden:i},{type:"checkBox",name:"ssrCheckBox",label:I,value:e.ssrCheckBox,isHidden:!n||i},{type:"checkBox",name:"webHostingCheckBox",label:w,value:e.webHostingCheckBox},{type:"vue:SelectSpaceWidget",name:"selectSpaceList",isHidden:!e.webHostingCheckBox,projectId:t.id,selectedSpaceId:void 0!==e.selectedSpaceId?e.selectedSpaceId:""}].map((e=>{if(e&&!e.isHidden)return e}))}}function g(e){let n=r(19,null),t=[];for(var i=0;i<e.length;i++){var o=[{label:e[i].domain}];t.push({columns:o})}return{title:n,width:480,height:320,formItems:[{type:"list",title:"",name:"domainList",columnStretches:[1,2],items:t}]}}function w(e){if(e&&e.spaces)return e.spaces.find((e=>e.selected))}async function b(e){let n=r(20,null),t=r(21,null),o=r(22,null),a=r(23,null),m=r(24,null),f=`${r(25,null)}:https://uniapp.dcloud.net.cn/uniCloud/http`,I=r(26,null),g=r(27,null);const w=`${s}[uniAD](https://uniad.dcloud.net.cn/)${u}，[${c}](https://uniad.dcloud.net.cn/login) | [${p}](https://uniapp.dcloud.io/component/ad.html)`;let b=r(28,null);const v=r(29,null,"unicloud"),k=d,y=h;e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Info"});let x=await l.uniappExtensionCompile({workspaceFolder:e.workspaceFolder,issuessr:e.ssr,domain:e.domain,type:"h5",customId:e.customId,websiteTitle:e.webTitle,websiteDomain:e.webDomain,clientId:e.clientId,uploadSourceMap:e.uploadSourceMap,session:e.session}),C=i.window.createOutputChannel("HBuilder");if(x&&0==x.code){if(!x.buildServerPath&&!x.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));if(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Info"}),e.webHosting){e.ssr?(C.appendLine(a),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:a,status:"Info"})):(C.appendLine(m),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:m,status:"Info"}));const n=e.selectSpaceList,t=n.provider,o=x.buildClientPath;let l=x.buildServerPath;const r=async function(n){if(e.ssr){"/"!=l.endsWith&&(l+="/");var t=e.funcitonPath+"/server";0==await i.workspace.copyFileWithPrompt({src:i.Uri.file(l),dest:i.Uri.file(t),rootPromptTips:b,filePromptTips:b,defaction:"replace",showcomparebutton:!1,filter:function(e){return 0},errorHandler:function(e){return 0}})&&(C.appendLine(f),C.appendLine(I),e.clientId&&(i.cliconsole.log({clientId:e.clientId,msg:f,status:"Info"}),i.cliconsole.log({clientId:e.clientId,msg:I,status:"Info"})),await i.unicloud.uploadCloudFuntion(e.workspaceFolder,e.funcitonPath),C.appendLine(g),e.clientId&&(i.cliconsole.log({clientId:e.clientId,msg:g,status:"Info"}),i.cliconsole.log({clientId:e.clientId,msg:w,status:"Error"})))}else C.appendLine(g),e.clientId&&(i.cliconsole.log({clientId:e.clientId,msg:g,status:"Info"}),i.cliconsole.log({clientId:e.clientId,msg:w,status:"Error"}))};if(t){const t="unicloud";let l=await i.extensions.existsPlugin(t);if(0!=l.code)return void(e.clientId?i.cliconsole.log({clientId:e.clientId,msg:l.msg,status:"Error"}):C.appendLine(l.msg));if(!l.exists)return void(e.clientId?(i.cliconsole.log({clientId:e.clientId,msg:v,status:"Error"}),i.extensions.installPlugin(t)):i.window.showMessageBox({type:"warning",title:"",text:v,buttons:[k,y]}).then((e=>{console.log(e),e==k&&i.extensions.installPlugin(t)})));{let l=i.extensions.getExtension(t);if(l){let t={space:n,workspaceFolder:e.workspaceFolder,uploadDirPath:o};e.isCli&&(t.cliconsole={clientId:e.clientId}),l["uniCloud.WebHost.Upload"](t).then((async()=>{await r(e.workspaceFolder)}))}else C.appendLine(v),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:v,status:"Error"})}}}else i.cliconsole.log({clientId:e.clientId,msg:w,status:"Error"})}else C.appendLine(o),e.clientId&&(i.cliconsole.log({clientId:e.clientId,msg:o,status:"Info"}),i.cliconsole.log({clientId:e.clientId,msg:w,status:"Error"}))}e.exports={h5Publish:async function(e,n){i.vue.defineComponent("SelectSpaceWidget",o.resolve(n.extensionPath,"./static/select-service-space.vue"));let t=r(30,null),l=f,s=r(31,null),u=r(32,null),c=r(33,null),p=d,v=h,k=r(34,null),y=r(35,null),x=m,C=f,P=r(36,null),E=r(37,null),B=m,S=f,j=r(38,null),F=r(39,null),N=r(40,null);const q=r(41,null);let O,M=e.workspaceFolder,D=e.args,T=D.clientId;if(D&&D.isCli){if(a.getInvalidInputName().includes(D.webTitle))return void i.cliconsole.log({clientId:T,msg:u,status:"Error"});if(D.ssrPublish){var W=await i.unicloud.unimodulesExistsModule(M,"uni-ssr");if(O=W.funcitonPath,0==W.exist)return void i.cliconsole.log({clientId:T,msg:c,status:"Error"})}let n,t;if(D.webHosting){let e=await i.http.request({url:"https://ide.liuyingyong.cn/serverless/space/list",method:"post",serviceOptions:{serviceRequest:!0,body:{provider:D.provider,appid:M.appid}}});if(!e.service||1001!=e.service.code){let n;return n=200==e.httpStatusCode?e.service.description:e.error,void i.cliconsole.log({clientId:T,msg:n,status:"Error"})}if(n=function(e,n){for(let t in e){let i=e[t];if(i.id==n)return{spaceId:n,spaceType:"aliyun"===i.provider?1:2,spaceName:i.name,apiEndpoint:i.apiEndpoint,clientSecret:i.clientSecret,isOpenHostingService:i.haveHostingService,isOwner:i.isOwner}}return{spaceId:"",spaceType:1,spaceName:"",apiEndpoint:"",clientSecret:"",isOpenHostingService:!1,isOwner:!0}}(e.service.body.spaces,D.spaceId),0==n.isOpenHostingService)return void i.cliconsole.log({clientId:T,msg:y,status:"Error"});if(D.ssrPublish){let e=await i.unicloud.getExistsUnicloudAndBindSpace({workspaceFolder:M});if(0!=e.code)return void i.cliconsole.log({clientId:T,msg:N,status:"Error"});{if(!e.unicloud)return void i.cliconsole.log({clientId:T,msg:F,status:"Error"});let n=e.spaceId;if(""==n||null==n||null==n)return void i.cliconsole.log({clientId:T,msg:N,status:"Error"})}let n,o=await i.http.request({url:"https://ide.liuyingyong.cn/serverless/host/domain-list",method:"post",serviceOptions:{serviceRequest:!0,body:{provider:D.provider,spaceId:D.spaceId,appid:M.appid}}});if(!o.service||1001!=o.service.code)return void(200==o.httpStatusCode?i.cliconsole.log({clientId:T,msg:o.service.description,status:"Error"}):i.cliconsole.log({clientId:T,msg:o.error,status:"Error"}));if(n=o.service.body.domains,!(n.length>0))return void i.cliconsole.log({clientId:T,msg:E,status:"Error"});t=n[0].domain}}return await b({workspaceFolder:e.workspaceFolder,ssr:D.ssrPublish,domain:t,customId:D.customId,webTitle:D.webTitle,webDomain:D.webDomain,webHosting:D.webHosting,clientId:D.clientId,funcitonPath:O,selectSpaceList:n,uploadSourceMap:D.sourceMap,session:e,isCli:!0}),void i.cliconsole.log({clientId:e.args.clientId,msg:"",status:"Error"})}let H=3==M.vueVersion,A=!1;try{let e=i.extensions.getExtension("uniapp-extension");A=await e.isUniAppx(M.uri.fsPath)}catch(e){}let L,_,$,V,U=e.args.customId,R=!1,Q=!1;if(M.id){let e=a.readPublishConfig(M.id);e&&(e.websiteTitle&&(_=e.websiteTitle),e.websiteDomain&&($=e.websiteDomain),void 0!==e.webHostingCheckBox&&(R=e.webHostingCheckBox),e.selectedSpaceId&&(V=e.selectedSpaceId),void 0!==e.h5UploadSourceMap&&(Q=e.h5UploadSourceMap))}let J=i.window.showFormDialog({submitButtonText:t,cancelButtonText:l,onOpened(){void 0!==M.appid&&""!==M.appid||this.showError(q)},validate:async function(e){if(void 0===M.appid||""===M.appid)return this.showError(q),!1;if(!e.websiteTitle)return this.showError(s),!1;if(a.getInvalidInputName().includes(e.websiteTitle))return this.showError(u),!1;if(e.ssrCheckBox&&e.webHostingCheckBox){var n=await i.unicloud.unimodulesExistsModule(M,"uni-ssr");if(O=n.funcitonPath,0==n.exist){if(await i.window.showMessageBox({type:"Info",title:c,text:"",buttons:[p,v]})==p){var t=i.extensions.getExtension("uni_modules");t?t.installDeps({fsPath:M.uri.fsPath,deps:["uni-ssr"]}):console.error("can't resolve extension:",extensionId)}return this.showError(""),!1}var o=await i.unicloud.getProjectBindSpace(M);if(0!=o.code)return this.showError(N),!1;{L=o.space;let n=L.spaceId;if(e.webHostingCheckBox&&(""==n||null==n||null==n))return this.showError(N),!1}}e.selectSpaceList1;let l,r=w(e.selectSpaceList);return r&&(l=r.spaceId),!e.webHostingCheckBox||""!=l&&null!=l&&null!=l?e.webHostingCheckBox&&0==r.openedHosting?(this.showError(y),!1):(this.showError(""),!0):(this.showError(k),!1)},onChanged:function(e,n,t){return t.selectSpaceList||(t.selectedSpaceId=V),"webHostingCheckBox"==e&&this.updateForm(I(t,H,M,A)),!0},...I({websiteTitle:_||M.name,websiteDomain:$||"",ssrCheckBox:!1,webHostingCheckBox:R,selectedSpaceId:V,uploadSourceMap:Q},H,M,A)});J.then((async n=>{if(M.id){let e={};n.websiteTitle&&(e.websiteTitle=n.websiteTitle),void 0!==n.websiteDomain&&(e.websiteDomain=n.websiteDomain),void 0!==n.webHostingCheckBox&&(e.webHostingCheckBox=n.webHostingCheckBox);let t=w(n.selectSpaceList);t&&t.spaceId&&(e.selectedSpaceId=t.spaceId),void 0!==n.uploadSourceMap&&(e.h5UploadSourceMap=n.uploadSourceMap),a.writePublishConfig(M.id,e)}let t=!1;1==n.ssrCheckBox&&(t=!0);let o,l=!1;n.webHostingCheckBox&&(l=!0);try{o=await i.unicloud.getExistsUnicloudAndBindSpace({workspaceFolder:M})}catch(e){}if(o&&0==o.code&&1==o.unicloud&&!o.spaceId){let e=x,n=C,t=[];t.push(e),t.push(n);let o=P;if(await i.window.showMessageBox({type:"question",title:"",text:o,buttons:t})!=e)return}let r,s=i.window.createOutputChannel("HBuilder"),u=w(n.selectSpaceList);if(t&&l&&u){let e,n=u.provider,t=await i.http.request({url:"https://ide.liuyingyong.cn/serverless/host/domain-list",method:"post",serviceOptions:{serviceRequest:!0,body:{provider:n,spaceId:u.spaceId,appid:M.appid}}});if(!t.service||1001!=t.service.code)return void(200==t.httpStatusCode?s.appendLine(t.service.description):s.appendLine(t.error));if(e=t.service.body.domains,1==e.length)r=e[0].domain;else{if(e.length<1)return void s.appendLine({line:E,level:"warning"});{let n=await i.window.showFormDialog({submitButtonText:B,cancelButtonText:S,validate:function(e){return!0},onChanged:function(e,n,t){},...g(e)});if(n.domainList<0)return void s.appendLine(j);r=e[n.domainList].domain}}}b({workspaceFolder:M,ssr:t,domain:r,customId:U,webTitle:n.websiteTitle,webDomain:n.websiteDomain,webHosting:l,clientId:"",funcitonPath:O,selectSpaceList:u,uploadSourceMap:n.uploadSourceMap,session:e,isCli:!1})})).catch((e=>{}))}}},809:e=>{e.exports=function e(n,t,i){function o(a,r){if(!t[a]){if(!n[a]){if(l)return l(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=t[a]={exports:{}};n[a][0].call(u.exports,(function(e){return o(n[a][1][e]||e)}),u,u.exports,e,n,t,i)}return t[a].exports}for(var l=void 0,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,n,t){"use strict";function i(e,n,t){var i;return e&&(i={b:e}),n&&((i=i||{}).a=n),t&&((i=i||{}).x=t),i}function o(e,n){if(null!==e&&"object"==typeof e){var t,a,r,s,u=c.getComment(e);if(u&&c.removeComment(e),"[object Array]"===Object.prototype.toString.apply(e)){for(s={a:{}},t=0,a=e.length;t<a;t++)l(s.a,t,u.a[t],o(e[t]))&&(r=!0);!r&&u.e&&(s.e=i(u.e[0],u.e[1]),r=!0)}else{s={s:{}};var p,d=Object.keys(e);for(u&&u.o?(p=[],u.o.concat(d).forEach((function(n){Object.prototype.hasOwnProperty.call(e,n)&&p.indexOf(n)<0&&p.push(n)}))):p=d,s.o=p,t=0,a=p.length;t<a;t++){var h=p[t];l(s.s,h,u.c[h],o(e[h]))&&(r=!0)}!r&&u.e&&(s.e=i(u.e[0],u.e[1]),r=!0)}return n&&u&&u.r&&(s.r=i(u.r[0],u.r[1])),r?s:void 0}}function l(e,n,t,o){var l=i(t?t[0]:void 0,t?t[1]:void 0,o);return l&&(e[n]=l),l}function a(e,n){var t=i(n.b,n.a);return t.path=e,t}function r(e,n,t){if(e){var i,o;if(e.a)for(i=0,o=e.a.length;i<o;i++){var l=t.slice().concat([i]),s=e.a[i];s&&(n.push(a(l,s)),r(s.x,n,l))}else e.o&&e.o.forEach((function(i){var o=t.slice().concat([i]),l=e.s[i];l&&(n.push(a(o,l)),r(l.x,n,o))}));e.e&&n.push(a(t,e.e))}}function s(e,n,t,i){if(e){if(null===n||"object"!=typeof n)return void r(e,t,i);var o,l=c.createComment(n);if(0===i.length&&e.r&&(l.r=[e.r.b,e.r.a]),"[object Array]"===Object.prototype.toString.apply(n)){l.a=[];var u=e.a||{};for(var p in u)if(u.hasOwnProperty(p)){o=parseInt(p);var d=e.a[p];if(d){var h=i.slice().concat([o]);o<n.length?(l.a[o]=[d.b,d.a],s(d.x,n[o],t,h)):(t.push(a(h,d)),r(d.x,t,h))}}0===o&&e.e&&(l.e=[e.e.b,e.e.a])}else l.c={},l.o=[],(e.o||[]).forEach((function(o){var u=i.slice().concat([o]),c=e.s[o];Object.prototype.hasOwnProperty.call(n,o)?(l.o.push(o),c&&(l.c[o]=[c.b,c.a],s(c.x,n[o],t,u))):c&&(t.push(a(u,c)),r(c.x,t,u))})),e.e&&(l.e=[e.e.b,e.e.a])}}function u(e,n,t){var i=c.createComment(e,c.getComment(e));return i.r||(i.r=["",""]),(n||""===n)&&(i.r[t]=c.forceComment(n)),i.r[t]||""}var c=e("./hjson-common");n.exports={extract:function(e){return o(e,!0)},merge:function(e,n){var t=[];if(s(e,n,t,[]),t.length>0){var i=u(n,null,1);i+="\n# Orphaned comments:\n",t.forEach((function(e){i+=("# "+e.path.join("/")+": "+function(){var e="";return[].forEach.call(arguments,(function(n){n&&""!==n.trim()&&(e&&(e+="; "),e+=n.trim())})),e}(e.b,e.a,e.e)).replace("\n","\\n ")+"\n"})),u(n,i,1)}},header:function(e,n){return u(e,n,0)},footer:function(e,n){return u(e,n,1)}}},{"./hjson-common":2}],2:[function(e,n,t){"use strict";var i=e("os");n.exports={EOL:i.EOL||"\n",tryParseNumber:function(e,n){function t(){return o=e.charAt(s),s++,o}var i,o,l="",a=0,r=!0,s=0;for(t(),"-"===o&&(l="-",t());o>="0"&&o<="9";)r&&("0"==o?a++:r=!1),l+=o,t();if(r&&a--,"."===o)for(l+=".";t()&&o>="0"&&o<="9";)l+=o;if("e"===o||"E"===o)for(l+=o,t(),"-"!==o&&"+"!==o||(l+=o,t());o>="0"&&o<="9";)l+=o,t();for(;o&&o<=" ";)t();return n&&(","!==o&&"}"!==o&&"]"!==o&&"#"!==o&&("/"!==o||"/"!==e[s]&&"*"!==e[s])||(o=0)),i=+l,o||a||!isFinite(i)?void 0:i},createComment:function(e,n){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=n||{}},removeComment:function(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})},getComment:function(e){return e.__COMMENTS__},forceComment:function(e){if(!e)return"";var n,t,i,o,l=e.split("\n");for(i=0;i<l.length;i++)for(o=(n=l[i]).length,t=0;t<o;t++){var a=n[t];if("#"===a)break;if("/"===a&&("/"===n[t+1]||"*"===n[t+1])){"*"===n[t+1]&&(i=l.length);break}if(a>" "){l[i]="# "+n;break}}return l.join("\n")}}},{os:8}],3:[function(e,n,t){"use strict";function i(e,n){if(e)for(var t=0;t<e.length;t++){var i=e[t](n);if(void 0!==i)return i}}function o(){}function l(e){return"{"===e||"}"===e||"["===e||"]"===e||","===e}function a(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if("number"==typeof e)return 1/e==-1/0?"-0":e===1/0?"Inf":e===-1/0?"-Inf":isNaN(e)?"NaN":void 0}}}function r(e){var n=e&&e.out;return{name:"hex",parse:function(e){if(/^0x[0-9A-Fa-f]+$/.test(e))return parseInt(e,16)},stringify:function(e){if(n&&Number.isInteger(e))return"0x"+e.toString(16)}}}function s(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var n=Date.parse(e);if(!isNaN(n))return new Date(n)}},stringify:function(e){if("[object Date]"===Object.prototype.toString.call(e)){var n=e.toISOString();return-1!==n.indexOf("T00:00:00.000Z",n.length-14)?n.substr(0,10):n}}}}a.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0",r.description="parse hexadecimal numbers prefixed with 0x",s.description="support ISO dates",n.exports={loadDsf:function(e,n){function t(e){return"[object Function]"==={}.toString.call(e)}if("[object Array]"!==Object.prototype.toString.apply(e)){if(e)throw new Error("dsf option must contain an array!");return o}if(0===e.length)return o;var a=[];return e.forEach((function(e){if(!e.name||!t(e.parse)||!t(e.stringify))throw new Error("extension does not match the DSF interface");a.push((function(){try{if("parse"==n)return e.parse.apply(null,arguments);if("stringify"==n){var t=e.stringify.apply(null,arguments);if(void 0!==t&&("string"!=typeof t||0===t.length||'"'===t[0]||[].some.call(t,(function(e){return l(e)}))))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+t);return t}throw new Error("Invalid type")}catch(n){throw new Error("DSF-"+e.name+" failed; "+n.message)}}))})),i.bind(null,a)},std:{math:a,hex:r,date:s}}},{}],4:[function(e,n,t){"use strict";n.exports=function(n,t){function i(){b=0,v=" "}function o(e){return"{"===e||"}"===e||"["===e||"]"===e||","===e||":"===e}function l(e){var n,t=0,i=1;for(n=b-1;n>0&&"\n"!==w[n];n--,t++);for(;n>0;n--)"\n"===w[n]&&i++;throw new Error(e+" at line "+i+","+t+" >>>"+w.substr(b-t,20)+" ...")}function a(){return v=w.charAt(b),b++,v}function r(e){return w.charAt(b+e)}function s(e){for(var n="",t=v;a();){if(v===t)return a(),e&&"'"===t&&"'"===v&&0===n.length?(a(),u()):n;if("\\"===v)if(a(),"u"===v){for(var i=0,o=0;o<4;o++){a();var r,s=v.charCodeAt(0);v>="0"&&v<="9"?r=s-48:v>="a"&&v<="f"?r=s-97+10:v>="A"&&v<="F"?r=s-65+10:l("Bad \\u char "+v),i=16*i+r}n+=String.fromCharCode(i)}else{if("string"!=typeof P[v])break;n+=P[v]}else"\n"===v||"\r"===v?l("Bad string containing newline"):n+=v}l("Bad string")}function u(){function e(){for(var e=i;v&&v<=" "&&"\n"!==v&&e-- >0;)a()}for(var n="",t=0,i=0;;){var o=r(-i-5);if(!o||"\n"===o)break;i++}for(;v&&v<=" "&&"\n"!==v;)a();for("\n"===v&&(a(),e());;){if(v){if("'"===v){if(t++,a(),3===t)return"\n"===n.slice(-1)&&(n=n.slice(0,-1)),n;continue}for(;t>0;)n+="'",t--}else l("Bad multiline string");"\n"===v?(n+="\n",a(),e()):("\r"!==v&&(n+=v),a())}}function c(){if('"'===v||"'"===v)return s(!1);for(var e="",n=b,t=-1;;){if(":"===v)return e?t>=0&&t!==e.length&&(b=n+t,l("Found whitespace in your key name (use quotes to include)")):l("Found ':' but no key name (for an empty key name use quotes)"),e;v<=" "?v?t<0&&(t=e.length):l("Found EOF while looking for a key name (check your syntax)"):o(v)?l("Found '"+v+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):e+=v,a()}}function p(){for(;v;){for(;v&&v<=" ";)a();if("#"===v||"/"===v&&"/"===r(0))for(;v&&"\n"!==v;)a();else{if("/"!==v||"*"!==r(0))break;for(a(),a();v&&("*"!==v||"/"!==r(0));)a();v&&(a(),a())}}}function d(e,n){var t;for(e--,t=b-2;t>e&&w[t]<=" "&&"\n"!==w[t];t--);"\n"===w[t]&&t--,"\r"===w[t]&&t--;var i=w.substr(e,t-e+1);for(t=0;t<i.length;t++)if(i[t]>" "){var o=i.indexOf("\n");if(o>=0){var l=[i.substr(0,o),i.substr(o+1)];return n&&0===l[0].trim().length&&l.shift(),l}return[i]}return[]}function h(e){function n(e,t){var i,o,l,a;switch(typeof e){case"string":e.indexOf(t)>=0&&(a=e);break;case"object":if("[object Array]"===Object.prototype.toString.apply(e))for(i=0,l=e.length;i<l;i++)a=n(e[i],t)||a;else for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(a=n(e[o],t)||a)}return a}function t(t){var i=n(e,t);return i?"found '"+t+"' in a string value, your mistake could be with:\n  > "+i+"\n  (unquoted strings contain everything up to the next line!)":""}return t("}")||t("]")}function m(){var e,n,t,i=[];try{if(k&&(e=x.createComment(i,{a:[]})),a(),n=b,p(),e&&(t=d(n,!0).join("\n")),"]"===v)return a(),e&&(e.e=[t]),i;for(;v;){if(i.push(I()),n=b,p(),","===v&&(a(),n=b,p()),e){var o=d(n);e.a.push([t||"",o[0]||""]),t=o[1]}if("]"===v)return a(),e&&(e.a[e.a.length-1][1]+=t||""),i;p()}l("End of input while parsing an array (missing ']')")}catch(e){throw e.hint=e.hint||h(i),e}}function f(e){var n,t,i,o="",r={};try{if(k&&(n=x.createComment(r,{c:{},o:[]})),e?t=1:(a(),t=b),p(),n&&(i=d(t,!0).join("\n")),"}"===v&&!e)return n&&(n.e=[i]),a(),r;for(;v;){if(o=c(),p(),":"!==v&&l("Expected ':' instead of '"+v+"'"),a(),r[o]=I(),t=b,p(),","===v&&(a(),t=b,p()),n){var s=d(t);n.c[o]=[i||"",s[0]||""],i=s[1],n.o.push(o)}if("}"===v&&!e)return a(),n&&(n.c[o][1]+=i||""),r;p()}if(e)return r;l("End of input while parsing an object (missing '}')")}catch(e){throw e.hint=e.hint||h(r),e}}function I(){switch(p(),v){case"{":return f();case"[":return m();case"'":case'"':return s(!0);default:return function(){var e=v;for(o(v)&&l("Found a punctuator character '"+v+"' when expecting a quoteless string (check your syntax)");;){a();var n="\r"===v||"\n"===v||""===v;if(n||","===v||"}"===v||"]"===v||"#"===v||"/"===v&&("/"===r(0)||"*"===r(0))){var t=e[0];switch(t){case"f":if("false"===e.trim())return!1;break;case"n":if("null"===e.trim())return null;break;case"t":if("true"===e.trim())return!0;break;default:if("-"===t||t>="0"&&t<="9"){var i=x.tryParseNumber(e);if(void 0!==i)return i}}if(n){e=e.trim();var s=y(e);return void 0!==s?s:e}}e+=v}}()}}function g(e,n){var t=b;if(p(),v&&l("Syntax error, found trailing characters"),k){var i=n.join("\n"),o=d(t).join("\n");(o||i)&&(x.createComment(e,x.getComment(e)).r=[i,o])}return e}var w,b,v,k,y,x=e("./hjson-common"),C=e("./hjson-dsf"),P={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};if("string"!=typeof n)throw new Error("source is not a string");var E=null,B=!0;return t&&"object"==typeof t&&(k=t.keepWsc,E=t.dsf,B=!1!==t.legacyRoot),y=C.loadDsf(E,"parse"),w=n,i(),B?function(){p();var e=k?d(1):null;switch(v){case"{":return g(f(),e);case"[":return g(m(),e)}try{return g(f(!0),e)}catch(n){i();try{return g(I(),e)}catch(e){throw n}}}():function(){p();var e=k?d(1):null;switch(v){case"{":return g(f(),e);case"[":return g(m(),e);default:return g(I(),e)}}()}},{"./hjson-common":2,"./hjson-dsf":3}],5:[function(e,n,t){"use strict";n.exports=function(n,t){function i(e,n){return M+=e[0].length+e[1].length-e[2]-e[3],e[0]+n+e[1]}function o(e){return e.replace(B,(function(e){var n=N[e];return"string"==typeof n?i(k.esc,n):i(k.uni,("0000"+e.charCodeAt(0).toString(16)).slice(-4))}))}function l(e,n,t,l){return e?(S.lastIndex=0,F.lastIndex=0,f||t||S.test(e)||void 0!==r.tryParseNumber(e,!0)||F.test(e)?(B.lastIndex=0,j.lastIndex=0,B.test(e)?j.test(e)||l||!g?i(k.qstr,o(e)):function(e,n){var t,o=e.replace(/\r/g,"").split("\n");if(n+=p,1===o.length)return i(k.mstr,o[0]);var l=c+n+k.mstr[0];for(t=0;t<o.length;t++)l+=c,o[t]&&(l+=n+o[t]);return l+c+n+k.mstr[1]}(e,n):i(k.qstr,e)):i(k.str,e)):i(k.qstr,"")}function a(e){return e?m||q.test(e)?(B.lastIndex=0,i(k.qkey,B.test(e)?o(e):e)):i(k.key,e):'""'}var r=e("./hjson-common"),s=e("./hjson-dsf"),u={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},c=r.EOL,p="  ",d=!1,h=!1,m=!1,f=!1,I=0,g=1,w="",b=null,v=!1,k=u;if(t&&"object"==typeof t){t.quotes="always"===t.quotes?"strings":t.quotes,"\n"!==t.eol&&"\r\n"!==t.eol||(c=t.eol),d=t.keepWsc,I=t.condense||0,h=t.bracesSameLine,m="all"===t.quotes||"keys"===t.quotes,f="all"===t.quotes||"strings"===t.quotes||!0===t.separator,g=f||"off"==t.multiline?0:"no-tabs"==t.multiline?2:1,w=!0===t.separator?k.com[0]:"",b=t.dsf,v=t.sortProps,"number"==typeof t.space?p=new Array(t.space+1).join(" "):"string"==typeof t.space&&(p=t.space),!0===t.colors&&(k={obj:["[37m{[0m","[37m}[0m"],arr:["[37m[[0m","[37m][0m"],key:["[33m","[0m"],qkey:['[33m"','"[0m'],col:["[37m:[0m",""],com:["[37m,[0m",""],str:["[37;1m","[0m"],qstr:['[37;1m"','"[0m'],mstr:["[37;1m'''","'''[0m"],num:["[36;1m","[0m"],lit:["[36m","[0m"],dsf:["[37m","[0m"],esc:["[31m\\","[0m"],uni:["[31m\\u","[0m"],rem:["[35m","[0m"]});var y,x=Object.keys(u);for(y=x.length-1;y>=0;y--){var C=x[y];k[C].push(u[C][0].length,u[C][1].length)}}var P,E="-­؀-؄܏឴឵‌-‏\u2028- ⁠-⁯\ufeff￰-￿",B=new RegExp('[\\\\\\"\0-'+E+"]","g"),S=new RegExp("^\\s|^\"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-"+E+"]","g"),j=new RegExp("'''|^[\\s]+$|[\0-"+(2===g?"\t":"\b")+"\v\f-"+E+"]","g"),F=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),N={"\b":"b","\t":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},q=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",M=0;P=s.loadDsf(b,"stringify");var D="",T=d?T=(r.getComment(n)||{}).r:null;return T&&T[0]&&(D=T[0]+"\n"),D+=function e(n,t,o,s){function u(e){return e&&"\n"===e["\r"===e[0]?1:0]}function m(e){return e&&!u(e)}function b(e,n,t){if(!e)return"";var o,l=(e=r.forceComment(e)).length;for(o=0;o<l&&e[o]<=" ";o++);return t&&o>0&&(e=e.substr(o)),o<l?n+i(k.rem,e):e}var y=P(n);if(void 0!==y)return i(k.dsf,y);switch(typeof n){case"string":return l(n,O,t,s);case"number":return isFinite(n)?i(k.num,String(n)):i(k.lit,"null");case"boolean":return i(k.lit,String(n));case"object":if(!n)return i(k.lit,"null");var x;d&&(x=r.getComment(n));var C,E,B,S,j,F,N,q,D,T,W="[object Array]"===Object.prototype.toString.apply(n),H=O,A=c+H,L=c+(O+=p),_=o||h?"":A,$=[],V=I?[]:null,U=f,R=g,Q=w?"":k.com[0],J=0;if(W){for(E=0,B=n.length;E<B;E++){if(C=E<B-1,x?(q=m((N=x.a[E]||[])[1]),$.push(b(N[0],"\n")+L),V&&(N[0]||N[1]||q)&&(V=null)):$.push(L),M=0,j=n[E],$.push(e(j,!!x&&q,!0)+(C?w:"")),V){switch(typeof j){case"string":M=0,f=!0,g=0,V.push(e(j,!1,!0)+(C?k.com[0]:"")),f=U,g=R;break;case"object":if(j){V=null;break}default:V.push($[$.length-1]+(C?Q:""))}C&&(M+=k.com[0].length-k.com[2]),J+=M}x&&N[1]&&$.push(b(N[1],q?" ":"\n",q))}0===B?x&&x.e&&$.push(b(x.e[0],"\n")+A):$.push(A),0===$.length?D=i(k.arr,""):(D=_+i(k.arr,$.join("")),V&&(T=V.join(" ")).length-J<=I&&(D=i(k.arr,T)))}else{var K=x?x.o.slice():[],Z=[];for(S in n)Object.prototype.hasOwnProperty.call(n,S)&&K.indexOf(S)<0&&Z.push(S);v&&Z.sort();var z=K.concat(Z);for(E=0,B=z.length;E<B;E++)if(C=E<B-1,S=z[E],x?(q=m((N=x.c[S]||[])[1]),$.push(b(N[0],"\n")+L),V&&(N[0]||N[1]||q)&&(V=null)):$.push(L),M=0,F=e(j=n[S],x&&q),$.push(a(S)+k.col[0]+(u(F)?"":" ")+F+(C?w:"")),x&&N[1]&&$.push(b(N[1],q?" ":"\n",q)),V){switch(typeof j){case"string":M=0,f=!0,g=0,F=e(j,!1),f=U,g=R,V.push(a(S)+k.col[0]+" "+F+(C?k.com[0]:""));break;case"object":if(j){V=null;break}default:V.push($[$.length-1]+(C?Q:""))}M+=k.col[0].length-k.col[2],C&&(M+=k.com[0].length-k.com[2]),J+=M}0===B?x&&x.e&&$.push(b(x.e[0],"\n")+A):$.push(A),0===$.length?D=i(k.obj,""):(D=_+i(k.obj,$.join("")),V&&(T=V.join(" ")).length-J<=I&&(D=i(k.obj,T)))}return O=H,D}}(n,null,!0,!0),T&&(D+=T[1]||""),D}},{"./hjson-common":2,"./hjson-dsf":3}],6:[function(e,n,t){n.exports="3.2.1"},{}],7:[function(e,n,t){"use strict";var i=e("./hjson-common"),o=e("./hjson-version"),l=e("./hjson-parse"),a=e("./hjson-stringify"),r=e("./hjson-comments"),s=e("./hjson-dsf");n.exports={parse:l,stringify:a,endOfLine:function(){return i.EOL},setEndOfLine:function(e){"\n"!==e&&"\r\n"!==e||(i.EOL=e)},version:o,rt:{parse:function(e,n){return(n=n||{}).keepWsc=!0,l(e,n)},stringify:function(e,n){return(n=n||{}).keepWsc=!0,a(e,n)}},comments:r,dsf:s.std}},{"./hjson-comments":1,"./hjson-common":2,"./hjson-dsf":3,"./hjson-parse":4,"./hjson-stringify":5,"./hjson-version":6}],8:[function(e,n,t){},{}]},{},[7])(7)},97:(e,n,t)=>{const i=t(283),o=t(325),l=t(460),a=t(942).loadMessageBundle(t(17).join(__dirname,"huawei.js"));async function r(e){let n=a(0,null),t=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.huawei",name:e.name,clientId:e.clientId,customId:e.customId}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}e.exports={hwPublish:async function(e){let n=a(7,null,a(8,null)),t=a(9,null,a(10,null)),l=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let t=e.clientId;return null==e.name||null==e.name?void i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"}):void r({workspaceFolder:l,name:e.name,customId:"",clientId:t})}let s=l.id,u=l.name;if(s){let e=o.readPublishConfig(s);e&&e.huaweiNameInput&&(u=e.huaweiNameInput)}var c;i.window.showFormDialog({validate:async function(e){return e.nameInput?!o.getInvalidInputName().includes(e.nameInput)||(this.showError(t),!1):(this.showError(n),!1)},onChanged:function(e,n,t){},...(c={nameInput:u},{submitButtonText:a(3,null),cancelButtonText:a(4,null),title:a(5,null),hideSubTitile:!0,width:550,height:200,formItems:[{type:"input",name:"nameInput",placeholder:a(6,null),value:c.nameInput?c.nameInput:""}]})}).then((function(n){s&&o.writePublishConfig(s,{huaweiNameInput:n.nameInput}),r({workspaceFolder:l,name:n.nameInput,customId:e.args.customId})}))}}},192:(e,n,t)=>{const i=t(283),o=t(325),l=t(460),a=t(942).loadMessageBundle(t(17).join(__dirname,"jingdong.js"));async function r(e){let n=a(0,null),t=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.jingdong",name:e.name,appid:e.appid,clientId:e.clientId,customId:e.customId}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}function s(e){let n=a(3,null),t=a(4,null),i=a(5,null),o=a(6,null),l=a(7,null),r=a(8,null);return{customButtons:[{text:n},{text:i},{text:t,role:"accept"}],title:o,hideSubTitile:!0,width:550,height:270,focusName:"appidInput",formItems:[{type:"input",name:"nameInput",placeholder:l,value:e.nameInput?e.nameInput:""},{type:"input",name:"appidInput",placeholder:r,value:e.appidInput?e.appidInput:""}]}}e.exports={jdPublish:async function(e){let n=a(9,null,a(10,null)),t=a(11,null,a(12,null)),l=a(13,null,a(14,null)),u=e.workspaceFolder;if(e.args&&e.args.isCli){let n=e.args,a=n.clientId;return o.getInvalidInputName().includes(n.name)?void i.cliconsole.log({clientId:a,msg:t,status:"Error"}):n.appid?void r({workspaceFolder:u,name:n.name,appid:n.appid,clientId:a,customId:""}):void i.cliconsole.log({clientId:a,msg:l,status:"Error"})}let c,p=u.id,d=u.name,h=o.getAppInfo(u,"mp-jd");if(console.log("jingdongInfo@@",h),h&&h.appid&&(c=h.appid),p){let e=o.readPublishConfig(p);console.log("projectIdData@@",e),e&&(e.jdNameInput&&(d=e.jdNameInput),!c&&e.jdAppidInput&&(c=e.jdAppidInput))}i.window.showFormDialog({validate:async function(e){return e.nameInput?o.getInvalidInputName().includes(e.nameInput)?(this.showError(t),!1):!!e.appidInput||(this.showError(l),!1):(this.showError(n),!1)},onChanged:function(e,n,t){},...s({nameInput:d,appidInput:c})}).then((function(n){if(0===n.buttonIndex)return void i.window.showManifestEditPart({projectId:p,optionType:"mp-jd.appid"});if(1===n.buttonIndex)return;const t=n.result;p&&o.writePublishConfig(p,{jdNameInput:t.nameInput,jdAppidInput:t.appidInput}),r({workspaceFolder:u,name:t.nameInput,appid:t.appidInput,customId:e.args.customId})}))}}},864:(e,n,t)=>{const i=t(283),o=t(325),l=t(460),a=t(942).loadMessageBundle(t(17).join(__dirname,"kuaishou.js"));async function r(e){let n=a(0,null),t=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.kuaishou",name:e.name,clientId:e.clientId,customId:e.customId}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}e.exports={ksPublish:async function(e){let n=a(7,null,a(8,null)),t=a(9,null,a(10,null)),l=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let t=e.clientId;return null==e.name||null==e.name?void i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"}):void r({workspaceFolder:l,name:e.name,customId:"",clientId:t})}let s=l.id,u=l.name;if(s){let e=o.readPublishConfig(s);e&&e.kuaishouNameInput&&(u=e.kuaishouNameInput)}var c;i.window.showFormDialog({validate:async function(e){return e.nameInput?!o.getInvalidInputName().includes(e.nameInput)||(this.showError(t),!1):(this.showError(n),!1)},onChanged:function(e,n,t){},...(c={nameInput:u},{submitButtonText:a(3,null),cancelButtonText:a(4,null),title:a(5,null),hideSubTitile:!0,width:550,height:200,formItems:[{type:"input",name:"nameInput",placeholder:a(6,null),value:c.nameInput?c.nameInput:""}]})}).then((function(n){s&&o.writePublishConfig(s,{kuaishouNameInput:n.nameInput}),r({workspaceFolder:l,name:n.nameInput,customId:e.args.customId})}))}}},369:(e,n,t)=>{const i=t(283),o=t(17),l=t(460),a=t(325),r=t(147),s=t(37),u=t(942).loadMessageBundle(t(17).join(__dirname,"native_app.js"));function c(e){const{clientId:n}=e;l.compile(e).then((function(){n&&i.cliconsole.log({clientId:n,msg:"",status:"Error"})}),(function(){n&&i.cliconsole.log({clientId:n,msg:"",status:"Error"})}))}function p(e){const{appId:n,pathInput:t,confuse:i,sourcemap:o}=e,l=u(0,null),a=u(1,null),r=u(2,null,`${void 0===n?"":n}`),s=(u(3,null),u(4,null)),c=`${u(5,null)}<a href="https://uniapp.dcloud.io/tutorial/app-sec-confusion">[${u(6,null)}]</a>`,p=u(7,null);return{title:l,formItems:[{type:"label",name:"label1",text:a},{type:"label",name:"label2",text:r},{type:"fileSelectInput",name:"pathInput",mode:"folder",appendSuffix:`/${n}.wgt`,placeholder:s,value:t},{type:"checkBox",name:"sourcemap",label:`${u(8,null)} <a href="https://uniapp.dcloud.io/uni-stat-v2.html#create-sourcemap">${p}</a>`,value:void 0!==o&&o},{type:"checkBox",name:"confuse",label:c,value:void 0!==i&&i}]}}e.exports={exportWgt:function(e){const{args:n,workspaceFolder:t}=e,l=u(9,null),d=u(10,null),h=u(11,null),m=u(12,null),f=u(13,null),I=u(14,null);if(!0===n.isCli){const e=n.name,l=n.path,a=n.clientId;return""===l?void i.cliconsole.log({clientId:a,msg:d,status:"Error"}):void c({type:"export.wgt",workspaceFolder:t,path:o.join(l,e),confuse:n.confuse,uploadSourceMap:n.sourceMap,clientId:a})}let g={appId:t.appid,pathInput:o.join(t.uri.fsPath,"unpackage/release",t.appid+".wgt"),confuse:!1,sourcemap:!1};const w=a.readPublishConfig(t.id);w&&(void 0!==w.wgtConfuse&&(g.confuse=w.wgtConfuse),void 0!==w.wgtSourcemap&&(g.sourcemap=w.wgtSourcemap)),i.window.showFormDialog({width:420,height:300,submitButtonText:f,cancelButtonText:I,...p(g),onOpened(){void 0!==t.appid&&""!==t.appid||this.showError(l)},onChanged(e,n,t){},validate(e){const{pathInput:n}=e;if(""===n)return this.showError(d),!1;if(n.split("/").length<=1&&n.split("\\").length<=1)return this.showError(h),!1;if(n.endsWith("/")||n.endsWith("\\"))return this.showError(m),!1;{let e=n.split("/");e.length<=1&&(e=n.split("\\")),e.length=e.length-1;const i=o.join(t.uri.fsPath,"unpackage/release"),l="Windows_NT"===s.type()?"\\":"/";let a=e.join(l);if(a!=i&&!r.existsSync(a))return this.showError(h),!1}return!0}}).then((function(e){const{pathInput:n,confuse:i,sourcemap:o}=e;a.writePublishConfig(t.id,{wgtConfuse:i,wgtSourcemap:o}),c({type:"export.wgt",workspaceFolder:t,path:n,confuse:i,uploadSourceMap:o})}))},exportResource:function(e){const{args:n,workspaceFolder:t}=e;let i="";i=n.clientId,c({type:"export.resource",workspaceFolder:t,clientId:i})}}},829:(e,n,t)=>{const i=t(283),o=t(325),l=t(460),a=t(942).loadMessageBundle(t(17).join(__dirname,"qq.js"));async function r(e){let n=a(0,null),t=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.qq",name:e.name,appid:e.appid,clientId:e.clientId,customId:e.customId,subPackage:e.subPackage}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}function s(e){let n=a(3,null),t=a(4,null),i=a(5,null),o=a(6,null),l=a(7,null),r=a(8,null),s=`${a(9,null)} <a href="https://uniapp.dcloud.net.cn/hybrid">${a(10,null)}</a>`,u=a(11,null);return{customButtons:[{text:n},{text:i},{text:t,role:"accept"}],title:o,hideSubTitile:!0,width:550,height:200,focusName:"appidInput",formItems:[{type:"input",name:"nameInput",placeholder:l,value:e.nameInput?e.nameInput:""},{type:"input",name:"appidInput",placeholder:r,value:e.appidInput?e.appidInput:""},{type:"checkBox",name:"subPackageCheckBox",label:s,value:!!e.subPackageCheckBox&&e.subPackageCheckBox},{type:"input",name:"subPackageInput",placeholder:u,isHidden:1!=e.subPackageCheckBox,value:e.subPackageInput?e.subPackageInput:""}].map((e=>{if(e&&!e.isHidden)return e}))}}e.exports={qqPublish:async function(e){let n=a(12,null,"QQ"),t=a(13,null,"QQ"),l=a(14,null,"QQ"),u=a(15,null),c=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let l=e.clientId;if(null==e.name||null==e.name)return void i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"});let a=e.appid;if(null==a||null==a){let n=o.getAppInfo(c,"mp-qq");if(n&&n.appid&&(a=n.appid),null==a)return void i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"})}return void r({workspaceFolder:c,name:e.name,appid:a,subPackage:e.subPackage,customId:"",clientId:l})}let p,d=c.id,h=c.name,m=o.getAppInfo(c,"mp-qq");if(m&&m.appid&&(p=m.appid),d){let e=o.readPublishConfig(d);e&&(e.qqNameInput&&(h=e.qqNameInput),!p&&e.qqAppidInput&&(p=e.qqAppidInput))}i.window.showFormDialog({validate:async function(e){return e.nameInput?o.getInvalidInputName().includes(e.nameInput)?(this.showError(l),!1):e.appidInput?!(e.subPackageCheckBox&&!e.subPackageInput&&(this.showError(u),1)):(this.showError(t),!1):(this.showError(n),!1)},onChanged:function(e,n,t){if("subPackageCheckBox"==e){let e=s(t);this.updateForm(e)}},...s({nameInput:h,appidInput:p,subPackageCheckBox:!1})}).then((function(n){if(0===n.buttonIndex)return void i.window.showManifestEditPart({projectId:d,optionType:"mp-qq.appid"});if(1===n.buttonIndex)return;const t=n.result;d&&o.writePublishConfig(d,{qqNameInput:t.nameInput,qqAppidInput:t.appidInput}),r({workspaceFolder:c,name:t.nameInput,appid:t.appidInput,subPackage:t.subPackageInput,customId:e.args.customId})}))}}},8:(e,n,t)=>{const i=t(283),o=t(325),l=t(460),a=t(942).loadMessageBundle(t(17).join(__dirname,"quickappunion.js"));async function r(e){let n=a(0,null),t=a(1,null),o=a(2,null);e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Info"});let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.quickappunion",name:e.name,clientId:e.clientId,customId:e.customId}),s=i.window.createOutputChannel("HBuilder");if(r&&0==r.code){if(!r.buildServerPath&&!r.buildClientPath)return void(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"}));e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:t,status:"Error"})}else s.appendLine(o),e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:o,status:"Error"})}e.exports={qauPublish:async function(e){let n=a(7,null,a(8,null)),t=a(9,null,a(10,null)),l=e.workspaceFolder;if(e.args&&e.args.isCli){e.args;let t=e.clientId;return null==e.name||null==e.name?void i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"}):void r({workspaceFolder:l,name:e.name,customId:"",clientId:t})}let s=l.id,u=l.name;if(s){let e=o.readPublishConfig(s);e&&e.quickappNameInput&&(u=e.quickappNameInput)}var c;i.window.showFormDialog({validate:async function(e){return e.nameInput?!o.getInvalidInputName().includes(e.nameInput)||(this.showError(t),!1):(this.showError(n),!1)},onChanged:function(e,n,t){},...(c={nameInput:u},{submitButtonText:a(3,null),cancelButtonText:a(4,null),title:a(5,null),hideSubTitile:!0,width:550,height:200,formItems:[{type:"input",name:"nameInput",placeholder:a(6,null),value:c.nameInput?c.nameInput:""}]})}).then((function(n){s&&o.writePublishConfig(s,{quickappNameInput:n.nameInput}),r({workspaceFolder:l,name:n.nameInput,customId:e.args.customId})}))}}},325:(e,n,t)=>{var i=t(147),o=t(37),l=t(809);e.exports={readPublishConfig:function(e){let n;try{let t=o.tmpdir();t+="/publish_uni.json";let l=o.tmpdir();if(l+="/publish_uni.json",e&&i.existsSync(l)){let t,o=i.readFileSync(l);try{t=JSON.parse(o)}catch(e){}t&&(n=t[""+e])}}catch(e){}return n},writePublishConfig:function(e,n){try{let l=o.tmpdir();if(e&&i.existsSync(l)){let o;if(l+="/publish_uni.json",e&&i.existsSync(l)){let e=i.readFileSync(l);try{o=JSON.parse(e)}catch(e){}}o&&"object"==typeof o||(o={id:""});let a=o[e];if(a||(a={}),n)for(var t in n)a[""+t]=n[t];o[""+e]=a;let r=JSON.stringify(o,null,"\t");r&&i.writeFileSync(l,r)}}catch(e){}},getAppInfo:function(e,n){let t,o=e.uri.fsPath;if(o+="/manifest.json",o&&i.existsSync(o)){let e=i.readFileSync(o,"utf8"),a=l.parse(e);a&&a[n]&&(t=a[n])}return t},getInvalidInputName:function(){return["test","测试","abc","asd","sdf"]}}},930:(e,n,t)=>{var i=t(283),o=t(147);t(37);const l=t(460);var a=t(809),r=t(325);const s=t(942).loadMessageBundle(t(17).join(__dirname,"weapp.js"));function u(e){let n=s(0,null),t=s(1,null),i=s(2,null);const o=s(3,null);let l=`${s(4,null)} <a href="https://uniapp.dcloud.net.cn/hybrid">${o}</a>`,a=s(5,null),r=`${s(6,null)} <a href="https://hx.dcloud.net.cn/cli/publish-mp-weixin?id=uploadPrivateKey">${o}</a>`,u=s(7,null),c=s(8,null),p=s(9,null);const d=s(10,null);let h=`${s(11,null)} <a href='https://uniad.dcloud.net.cn'>uniAD</a> ${s(12,null)}，<a href='https://ask.dcloud.net.cn/article/39928'>${s(13,null)}</a> | <a href='https://uniapp.dcloud.io/component/ad.html'>${s(14,null)}</a>`,m=`<a href="https://hx.dcloud.net.cn/cli/publish-mp-weixin">${s(15,null)}</a>`;const f=`${s(16,null)} <a href="https://uniapp.dcloud.io/uni-stat-v2.html#create-sourcemap">${o}</a>`;return{title:n,hideSubTitile:!0,width:600,height:200,footer:h,cornerWidget:{type:"label",name:"cornerTip",text:m},formItems:[{type:"input",name:"nameInput",placeholder:t,value:e.nameInput?e.nameInput:""},{type:"input",name:"appidInput",placeholder:i,value:e.appidInput},{type:"checkBox",name:"uploadSourceMap",label:f,value:!!e.uploadSourceMap&&e.uploadSourceMap},{type:"checkBox",name:"behaviorCheckBox",label:l,value:!!e.behaviorCheckBox&&e.behaviorCheckBox},{type:"input",name:"subPackgeInput",placeholder:a,isHidden:!e.behaviorCheckBox||1!=e.behaviorCheckBox,value:e.subPackgeInput},{type:"checkBox",name:"uploadWeappCheckBox",label:r,value:!!e.uploadWeappCheckBox&&e.uploadWeappCheckBox},{type:"input",name:"weappVersionInput",placeholder:u,isHidden:!e.uploadWeappCheckBox||1!=e.uploadWeappCheckBox,value:e.weappVersionInput},{type:"fileSelectInput",name:"fileSelectInput",placeholder:c,isHidden:!e.uploadWeappCheckBox||1!=e.uploadWeappCheckBox,value:e.fileSelectInput?e.fileSelectInput:""},{type:"input",name:"weappDescInput",placeholder:p,isHidden:!e.uploadWeappCheckBox||1!=e.uploadWeappCheckBox,value:e.weappDescInput},{type:"input",name:"weappRobotInput",placeholder:d,isHidden:!e.uploadWeappCheckBox||1!=e.uploadWeappCheckBox,value:(e.weappRobotInput||1)+""}].map((e=>{if(e&&!e.isHidden)return e}))}}async function c(e){let n=s(17,null,"weapp-miniprogram-ci"),t=s(18,null),a=s(19,null);if(e&&e.uploadWeapp){let o=i.window.createOutputChannel("HBuilder"),l=await i.extensions.existsPlugin("weapp-miniprogram-ci");if(0!=l.code)return void(e.clientId?i.cliconsole.log({clientId:e.clientId,msg:l.msg,status:"Error"}):o.appendLine(l.msg));if(!l.exists)return void(e.clientId?(i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"}),i.extensions.installPlugin("weapp-miniprogram-ci")):i.window.showMessageBox({type:"warning",title:"",text:n,buttons:[t,a]}).then((e=>{console.log(e),e==t&&i.extensions.installPlugin("weapp-miniprogram-ci")})))}let r=await l.compile({workspaceFolder:e.workspaceFolder,type:"publish.weapp",name:e.name,appid:e.appid,customId:e.customId,subPackge:e.subPackge,clientId:e.clientId,uploadWeapp:e.uploadWeapp,uploadSourceMap:e.uploadSourceMap});if(r&&0==r.code&&e&&e.uploadWeapp){let t=r.buildClientPath,l=e.privatekey,a=e.version,s=e.description;if(t&&o.existsSync(t)){let o=i.extensions.getExtension("weapp-miniprogram-ci");o?await o.upload({appid:e.appid,buildClientPath:t,privatekey:l,version:a,description:s,clientId:e.clientId,robot:e.robot||1}):(e.clientId&&i.cliconsole.log({clientId:e.clientId,msg:n,status:"Error"}),outputChannel.appendLine(n))}}}function p(e,n){let t,i=e.uri.fsPath;if(i+="/manifest.json",i&&o.existsSync(i)){let e=o.readFileSync(i,"utf8"),l=a.parse(e);l&&l[n]&&(t=l[n])}return t}e.exports={weAppPublish:async function(e){let n=!1;e&&e.args&&e.args.isCli&&(n=e.args.isCli);let t=s(20,null),l=s(21,null),a=s(22,null),d=s(23,null,s(24,null)),h=s(25,null,s(26,null)),m=s(27,null,s(28,null)),f=s(29,null),I=s(30,null),g=s(31,null),w=s(32,null),b=s(33,null),v=s(34,null),k=s(35,null);const y=s(36,null);let x=e.workspaceFolder;if(1==n){if(console.log("name -----",e.args.name),r.getInvalidInputName().includes(e.args.name))return void i.cliconsole.log({clientId:e.args.clientId,msg:h,status:"Error"});if(e.args.upload&&!e.args.version){let n=p(x,"versionName");if(!n)return void await i.cliconsole.log({clientId:e.args.clientId,msg:I,status:"Error"});e.args.version=n}if(e.args.upload&&!e.args.description)return void await i.cliconsole.log({clientId:e.args.clientId,msg:b,status:"Error"});if(!e.args.appid){let n=p(x,"mp-weixin");if(!n||!n.appid)return void await i.cliconsole.log({clientId:e.args.clientId,msg:m,status:"Error"});e.args.appid=n.appid}return await c({workspaceFolder:x,name:e.args.name,appid:e.args.appid,subPackge:e.args.subPackge,uploadWeapp:e.args.upload,clientId:e.args.clientId,version:e.args.version,description:e.args.description,privatekey:e.args.privatekey,uploadSourceMap:e.args.sourceMap,robot:e.args.robot}),void await i.cliconsole.log({clientId:e.args.clientId,msg:"",status:"Error"})}let C,P,E,B=x.id,S=!1,j=p(x,"versionName"),F=1,N=p(x,"name"),q=p(x,"mp-weixin");q&&(E=q.appid);let O=!1;if(B){let e=r.readPublishConfig(B);e&&e.weappName&&(N=e.weappName),e&&e.weappAppid&&(E=e.weappAppid),e&&void 0!==e.uploadWeapp&&(S=e.uploadWeapp),e&&e.weappUploadVersion&&(j=e.weappUploadVersion),e&&e.weappPrivatekey&&(P=e.weappPrivatekey),e&&e.weappUploadDescription&&(C=e.weappUploadDescription),e&&e.weappUploadRobot&&(F=e.weappUploadRobot),e&&void 0!==e.weappUploadSourceMap&&(O=e.weappUploadSourceMap)}i.window.showFormDialog({customButtons:[{text:t},{text:l,role:"accept"}],onOpened(){void 0!==x.appid&&""!==x.appid||this.showError(y)},validate:async function(e){if(void 0===x.appid||""===x.appid)return this.showError(y),!1;if(!e.nameInput)return this.showError(d),!1;if(r.getInvalidInputName().includes(e.nameInput))return this.showError(h),!1;if(!e.appidInput)return this.showError(m),!1;if(e.behaviorCheckBox&&!e.subPackgeInput)return this.showError(f),!1;if(e.uploadWeappCheckBox&&!e.weappVersionInput)return this.showError(I),!1;if(e.uploadWeappCheckBox&&!e.fileSelectInput)return this.showError(g),!1;if(e.uploadWeappCheckBox&&!o.existsSync(e.fileSelectInput))return this.showError(w),!1;if(e.uploadWeappCheckBox&&!e.weappDescInput)return this.showError(b),!1;if(e.uploadWeappCheckBox&&e.weappRobotInput){const n=Number(e.weappRobotInput);if(!n)return this.showError(v),!1;if(n<1||n>30)return this.showError(k),!1}return this.showError(""),!0},onChanged:function(e,n,t){if("behaviorCheckBox"==e||"uploadWeappCheckBox"==e){"uploadWeappCheckBox"!=e||t.weappVersionInput||(t.weappVersionInput=j),"uploadWeappCheckBox"!=e||t.fileSelectInput||(t.fileSelectInput=P),"uploadWeappCheckBox"!=e||t.weappDescInput||(t.weappDescInput=C),"behaviorCheckBox"==e&&1==t.behaviorCheckBox&&(t.uploadWeappCheckBox=!1),"uploadWeappCheckBox"==e&&1==t.uploadWeappCheckBox&&(t.behaviorCheckBox=!1);let n=u(t);this.updateForm(n)}return!0},...u({nameInput:N,appidInput:E,uploadWeappCheckBox:S,weappVersionInput:j,weappDescInput:C,fileSelectInput:P,weappRobotInput:F,uploadSourceMap:O})}).then((async n=>{if(0===n.buttonIndex)return void i.window.showManifestEditPart({projectId:B,optionType:"mp-weixin.appid"});const t=n.result;let o=t.nameInput,l=t.appidInput,u=t.behaviorCheckBox,p=t.uploadWeappCheckBox;j=t.weappVersionInput,C=t.weappDescInput,P=t.fileSelectInput,F=Number(t.weappRobotInput)||F,O=t.uploadSourceMap;let d=await i.unicloud.getExistsUnicloudAndBindSpace({workspaceFolder:x});if(d&&0==d.code&&1==d.unicloud&&!d.spaceId){let e=s(37,null),n=[];n.push(e),n.push(a);let t=s(38,null);if(await i.window.showMessageBox({type:"question",title:"",text:t,buttons:n})!=e)return}let h,m={weappName:o,weappAppid:l,uploadWeapp:p,weappUploadSourceMap:O};p&&(m.weappUploadVersion=j,m.weappPrivatekey=P,m.weappUploadDescription=C,m.weappUploadRobot=F),r.writePublishConfig(B,m),u&&(h=t.subPackgeInput),await c({workspaceFolder:x,type:"publish.weapp",name:o,appid:l,customId:e.args.customId,subPackge:h,uploadWeapp:p,version:j,description:C,robot:F,privatekey:P,uploadSourceMap:O})})).catch((e=>{}))}}},283:e=>{"use strict";e.exports=require("hbuilderx")},942:e=>{"use strict";e.exports=require("hxnls")},147:e=>{"use strict";e.exports=require("fs")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")}},n={},t=function t(i){var o=n[i];if(void 0!==o)return o.exports;var l=n[i]={exports:{}};return e[i](l,l.exports,t),l.exports}(24);module.exports=t})();