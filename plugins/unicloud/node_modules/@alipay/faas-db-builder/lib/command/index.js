"use strict";var __spreadArray=this&&this.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,a;n<o;n++){if(a||!(n in e)){if(!a)a=Array.prototype.slice.call(e,0,n);a[n]=e[n]}}return r.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(exports,"__esModule",{value:true});exports.Command=exports.AggregateCommandFactory=void 0;var constant_1=require("../common/constant");var aggregate_1=require("./aggregate");var AggregatePipeline_1=require("./AggregatePipeline");var all_1=require("./query/all");var logic_1=require("./query/logic");var elemMatch_1=require("./query/elemMatch");var eq_1=require("./query/eq");var exists_1=require("./query/exists");var expr_1=require("./query/expr");var gt_1=require("./query/gt");var gte_1=require("./query/gte");var in_1=require("./query/in");var lt_1=require("./query/lt");var lte_1=require("./query/lte");var mod_1=require("./query/mod");var neq_1=require("./query/neq");var nin_1=require("./query/nin");var QueryChain_1=require("./query/QueryChain");var size_1=require("./query/size");var addToSet_1=require("./update/addToSet");var inc_1=require("./update/inc");var max_1=require("./update/max");var min_1=require("./update/min");var mul_1=require("./update/mul");var pop_1=require("./update/pop");var pull_1=require("./update/pull");var pullAll_1=require("./update/pullAll");var push_1=require("./update/push");var remove_1=require("./update/remove");var rename_1=require("./update/rename");var set_1=require("./update/set");var geo_1=require("./query/geo");var unshift_1=require("./update/unshift");var shift_1=require("./update/shift");var AggregateCommandFactory=function(){function r(){}r.prototype.pipeline=function(){return new AggregatePipeline_1.AggregatePipeline};r.prototype.avg=function(e){return new aggregate_1.AvgAggregateCommand(e)};r.prototype.count=function(){return new aggregate_1.CountAggregateCommand};r.prototype.max=function(e){return new aggregate_1.MaxAggregateCommand(e)};r.prototype.min=function(e){return new aggregate_1.MinAggregateCommand(e)};r.prototype.sum=function(e){return new aggregate_1.SumAggregateCommand(e)};r.prototype.and=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var o=Array.isArray(e)?e:__spreadArray([e],t,true);return new aggregate_1.AndAggregateCommand(o)};r.prototype.or=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var o=Array.isArray(e)?e:__spreadArray([e],t,true);return new aggregate_1.OrAggregateCommand(o)};r.prototype.not=function(e){return new aggregate_1.NotAggregateCommand(e)};r.prototype.cmp=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.CMPAggregateCommand(n)};r.prototype.eq=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.EqAggregateCommand(n)};r.prototype.neq=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.NeqAggregateCommand(n)};r.prototype.lt=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.LtAggregateCommand(n)};r.prototype.lte=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.LteAggregateCommand(n)};r.prototype.gt=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.GtAggregateCommand(n)};r.prototype.gte=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.GteAggregateCommand(n)};r.prototype.addToSet=function(e){return new aggregate_1.AddToSetAggregateCommand(e)};r.prototype.arrayElemAt=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.ArrayElemAtAggregateCommand(n)};r.prototype.indexOfArray=function(e,t,n,o){var a=Array.isArray(e)?e:[e,t,n,o].filter(function(u){return u!==void 0});return new aggregate_1.IndexOfArrayAggregateCommand(a)};r.prototype.isArray=function(e){return new aggregate_1.IsArrayAggregateCommand(e)};r.prototype.size=function(e){return new aggregate_1.SizeAggregateCommand(e)};r.prototype.in=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.InAggregateCommand(n)};r.prototype.slice=function(e,t,n){var o=Array.isArray(e)?e:[e,t,n].filter(function(a){return a!==void 0});return new aggregate_1.SliceAggregateCommand(o)};r.prototype.map=function(e){return new aggregate_1.MapAggregateCommand(e)};r.prototype.ifNull=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.IfNullAggregateCommand(n)};r.prototype.cond=function(e){return new aggregate_1.CondAggregateCommand(e)};r.prototype.switch=function(e){return new aggregate_1.SwitchAggregateCommand(e)};r.prototype.concat=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var o=Array.isArray(e)?e:__spreadArray([e],t,true);return new aggregate_1.ConcatAggregateCommand(o)};r.prototype.dateToString=function(e){return new aggregate_1.DateToStringAggregateCommand(e)};r.prototype.toLower=function(e){return new aggregate_1.ToLowerAggregateCommand(e)};r.prototype.toUpper=function(e){return new aggregate_1.ToUpperAggregateCommand(e)};r.prototype.split=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.SplitAggregateCommand(n)};r.prototype.substr=function(e,t,n){var o=Array.isArray(e)?e:[e,t,n];return new aggregate_1.SubstrAggregateCommand(o)};r.prototype.substrBytes=function(e,t,n){var o=Array.isArray(e)?e:[e,t,n];return new aggregate_1.SubstrBytesAggregateCommand(o)};r.prototype.first=function(e){return new aggregate_1.FirstAggregateCommand(e)};r.prototype.last=function(e){return new aggregate_1.LastAggregateCommand(e)};r.prototype.push=function(e){return new aggregate_1.PushAggregateCommand(e)};r.prototype.let=function(e){return new aggregate_1.LetAggregateCommand(e)};r.prototype.add=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var o=Array.isArray(e)?e:__spreadArray([e],t,true);return new aggregate_1.AddAggregateCommand(o)};r.prototype.subtract=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.SubtractAggregateCommand(n)};r.prototype.multiply=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var o=Array.isArray(e)?e:__spreadArray([e],t,true);return new aggregate_1.MultiplyAggregateCommand(o)};r.prototype.divide=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.DivideAggregateCommand(n)};r.prototype.abs=function(e){return new aggregate_1.AbsAggregateCommand(e)};r.prototype.ceil=function(e){return new aggregate_1.CeilAggregateCommand(e)};r.prototype.exp=function(e){return new aggregate_1.ExpAggregateCommand(e)};r.prototype.floor=function(e){return new aggregate_1.FloorAggregateCommand(e)};r.prototype.ln=function(e){return new aggregate_1.LnAggregateCommand(e)};r.prototype.log=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.LogAggregateCommand(n)};r.prototype.log10=function(e){return new aggregate_1.Log10AggregateCommand(e)};r.prototype.mod=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.ModAggregateCommand(n)};r.prototype.pow=function(e,t){var n=Array.isArray(e)?e:[e,t];return new aggregate_1.PowAggregateCommand(n)};r.prototype.sqrt=function(e){return new aggregate_1.SqrtAggregateCommand(e)};r.prototype.trunc=function(e){return new aggregate_1.TruncAggregateCommand(e)};r.prototype.mergeObjects=function(e){return new aggregate_1.MergeObjectsAggregateCommand(e)};r.prototype.month=function(e){return new aggregate_1.MonthAggregateCommand(e)};r.prototype.year=function(e){return new aggregate_1.YearAggregateCommand(e)};r.prototype.week=function(e){return new aggregate_1.WeekAggregateCommand(e)};r.prototype.isoWeek=function(e){return new aggregate_1.ISOWeekAggregateCommand(e)};r.prototype.arrayToObject=function(e){return new aggregate_1.ArrayToObjectAggregateCommand(e)};r.prototype.concatArrays=function(e){return new aggregate_1.ConcatArraysAggregateCommand(e)};r.prototype.filter=function(e){return new aggregate_1.FilterAggregateCommand(e)};r.prototype.objectToArray=function(e){return new aggregate_1.ObjectToArrayAggregateCommand(e)};r.prototype.range=function(e,t,n){var o=Array.isArray(e)?e:typeof n!=="undefined"?[e,t,n]:[e,t];return new aggregate_1.RangeAggregateCommand(o)};r.prototype.reduce=function(e){return new aggregate_1.ReduceAggregateCommand(e)};r.prototype.reverseArray=function(e){return new aggregate_1.ReverseArrayAggregateCommand(e)};r.prototype.zip=function(e){return new aggregate_1.ZipAggregateCommand(e)};r.prototype.dateFromString=function(e){return new aggregate_1.DateFromStringAggregateCommand(e)};r.prototype.indexOfBytes=function(e){return new aggregate_1.IndexOfBytesAggregateCommand(e)};r.prototype.indexOfCP=function(e){return new aggregate_1.IndexOfCPAggregateCommand(e)};r.prototype.strLenBytes=function(e){return new aggregate_1.StrLenBytesAggregateCommand(e)};r.prototype.strLenCP=function(e){return new aggregate_1.StrLenCPAggregateCommand(e)};r.prototype.strcasecmp=function(e){return new aggregate_1.StrcasecmpAggregateCommand(e)};r.prototype.substrCP=function(e){return new aggregate_1.SubstrCPAggregateCommand(e)};r.prototype.stdDevPop=function(e){return new aggregate_1.StdDevPopAggregateCommand(e)};r.prototype.stdDevSamp=function(e){return new aggregate_1.StdDevSampAggregateCommand(e)};r.prototype.allElementsTrue=function(e){return new aggregate_1.AllElementsTrueAggregateCommand(e)};r.prototype.anyElementTrue=function(e){return new aggregate_1.AnyElementTrueAggregateCommand(e)};r.prototype.setDifference=function(e){return new aggregate_1.SetDifferenceAggregateCommand(e)};r.prototype.setEquals=function(e){return new aggregate_1.SetEqualsAggregateCommand(e)};r.prototype.setIntersection=function(e){return new aggregate_1.SetIntersectionAggregateCommand(e)};r.prototype.setIsSubset=function(e){return new aggregate_1.SetIsSubsetAggregateCommand(e)};r.prototype.setUnion=function(e){return new aggregate_1.SetUnionAggregateCommand(e)};r.prototype.literal=function(e){return new aggregate_1.LiteralAggregateCommand(e)};r.prototype.dateFromParts=function(e){return new aggregate_1.DateFromPartsAggregateCommand(e)};r.prototype.dayOfMonth=function(e){return new aggregate_1.DayOfMonthAggregateCommand(e)};r.prototype.dayOfWeek=function(e){return new aggregate_1.DayOfWeekAggregateCommand(e)};r.prototype.dayOfYear=function(e){return new aggregate_1.DayOfYearAggregateCommand(e)};r.prototype.hour=function(e){return new aggregate_1.HourAggregateCommand(e)};r.prototype.isoDayOfWeek=function(e){return new aggregate_1.ISODayOfWeekAggregateCommand(e)};r.prototype.isoWeekYear=function(e){return new aggregate_1.ISOWeekYearAggregateCommand(e)};r.prototype.millisecond=function(e){return new aggregate_1.MillisecondAggregateCommand(e)};r.prototype.minute=function(e){return new aggregate_1.MinuteAggregateCommand(e)};r.prototype.second=function(e){return new aggregate_1.SecondAggregateCommand(e)};return r}();exports.AggregateCommandFactory=AggregateCommandFactory;var Command=function(){function r(){this.aggregate=new AggregateCommandFactory;this.Sort=constant_1.Sort}r.prototype.addToSet=function(e){return new addToSet_1.AddToSetCommand(e)};r.prototype.inc=function(e){return new inc_1.IncCommand(e)};r.prototype.max=function(e){return new max_1.MaxCommand(e)};r.prototype.min=function(e){return new min_1.MinCommand(e)};r.prototype.mul=function(e){return new mul_1.MulCommand(e)};r.prototype.pop=function(e){return new pop_1.PopCommand(e)};r.prototype.pull=function(e){return new pull_1.PullCommand(e)};r.prototype.pullAll=function(e){return new pullAll_1.PullAllCommand(e)};r.prototype.push=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}return new(push_1.PushCommand.bind.apply(push_1.PushCommand,__spreadArray([void 0,e],t,false)))};r.prototype.remove=function(){return new remove_1.RemoveCommand};r.prototype.rename=function(e){return new rename_1.RenameCommand(e)};r.prototype.set=function(e){return new set_1.SetCommand(e)};r.prototype.expr=function(e){return new expr_1.ExprCommand(e)};r.prototype.geoWithin=function(e){return new geo_1.GeoWithinCommand(e)};r.prototype.geoNear=function(e){return new geo_1.GeoNearCommand(e)};r.prototype.geoIntersects=function(e){return new geo_1.GeoIntersectsCommand(e)};r.prototype.unshift=function(e){return new unshift_1.UnShiftCommand(e)};r.prototype.shift=function(){return new shift_1.ShiftCommand};r.prototype.and=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}e=Array.isArray(e[0])?e[0]:e;var n=new logic_1.AndCommand(e.map(QueryChain_1.QueryChain.unchain));return new QueryChain_1.QueryChain(n)};r.prototype.or=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}e=Array.isArray(e[0])?e[0]:e;var n=new logic_1.OrCommand(e.map(QueryChain_1.QueryChain.unchain));return new QueryChain_1.QueryChain(n)};r.prototype.not=function(e){var t=new logic_1.NotCommand(QueryChain_1.QueryChain.unchain(e));return new QueryChain_1.QueryChain(t)};r.prototype.nor=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}e=Array.isArray(e[0])?e[0]:e;var n=new logic_1.NorCommand(e.map(QueryChain_1.QueryChain.unchain));return new QueryChain_1.QueryChain(n)};r.prototype.eq=function(e){return new QueryChain_1.QueryChain(new eq_1.EqCommand(e))};r.prototype.neq=function(e){return new QueryChain_1.QueryChain(new neq_1.NeqCommand(e))};r.prototype.lt=function(e){return new QueryChain_1.QueryChain(new lt_1.LtCommand(e))};r.prototype.lte=function(e){return new QueryChain_1.QueryChain(new lte_1.LteCommand(e))};r.prototype.gt=function(e){return new QueryChain_1.QueryChain(new gt_1.GtCommand(e))};r.prototype.gte=function(e){return new QueryChain_1.QueryChain(new gte_1.GteCommand(e))};r.prototype.in=function(e){return new QueryChain_1.QueryChain(new in_1.InCommand(e))};r.prototype.nin=function(e){return new QueryChain_1.QueryChain(new nin_1.NinCommand(e))};r.prototype.exists=function(e){return new QueryChain_1.QueryChain(new exists_1.ExistsCommand(e))};r.prototype.mod=function(e,t){return new QueryChain_1.QueryChain(new mod_1.ModCommand(e,t))};r.prototype.all=function(e){return new QueryChain_1.QueryChain(new all_1.AllCommand(e))};r.prototype.elemMatch=function(e){return new QueryChain_1.QueryChain(new elemMatch_1.ElemMatchCommand(QueryChain_1.QueryChain.unchain(e)))};r.prototype.size=function(e){return new QueryChain_1.QueryChain(new size_1.SizeCommand(e))};return r}();exports.Command=Command;