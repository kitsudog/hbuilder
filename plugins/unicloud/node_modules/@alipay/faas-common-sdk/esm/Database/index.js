var l=function(){l=Object.assign||function(i){for(var a,n=1,o=arguments.length;n<o;n++){a=arguments[n];for(var r in a)if(Object.prototype.hasOwnProperty.call(a,r))i[r]=a[r]}return i};return l.apply(this,arguments)};var d=function(i,a,n,o){function r(t){return t instanceof n?t:new n(function(c){c(t)})}return new(n||(n=Promise))(function(t,c){function s(u){try{e(o.next(u))}catch(h){c(h)}}function f(u){try{e(o["throw"](u))}catch(h){c(h)}}function e(u){u.done?t(u.value):r(u.value).then(s,f)}e((o=o.apply(i,a||[])).next())})};var m=function(i,a){var n={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},o,r,t,c;return c={next:s(0),"throw":s(1),"return":s(2)},typeof Symbol==="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(e){return function(u){return f([e,u])}}function f(e){if(o)throw new TypeError("Generator is already executing.");while(c&&(c=0,e[0]&&(n=0)),n)try{if(o=1,r&&(t=e[0]&2?r["return"]:e[0]?r["throw"]||((t=r["return"])&&t.call(r),0):r.next)&&!(t=t.call(r,e[1])).done)return t;if(r=0,t)e=[e[0]&2,t.value];switch(e[0]){case 0:case 1:t=e;break;case 4:n.label++;return{value:e[1],done:false};case 5:n.label++;r=e[1];e=[0];continue;case 7:e=n.ops.pop();n.trys.pop();continue;default:if(!(t=n.trys,t=t.length>0&&t[t.length-1])&&(e[0]===6||e[0]===2)){n=0;continue}if(e[0]===3&&(!t||e[1]>t[0]&&e[1]<t[3])){n.label=e[1];break}if(e[0]===6&&n.label<t[1]){n.label=t[1];t=e;break}if(t&&n.label<t[2]){n.label=t[2];n.ops.push(e);break}if(t[2])n.ops.pop();n.trys.pop();continue}e=a.call(i,n)}catch(u){e=[6,u];r=0}finally{o=t=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:true}}};import{Command as y}from"@alipay/faas-db-builder";import{FaasError as p}from"../error";import{Collection as w}from"./Collection";var b=function(){function i(a){this.httpclient=a}i.prototype.request=function(a){return d(this,arguments,void 0,function(n){var o=n.method,r=n.path,t=n.data,c=n.headers;return m(this,function(s){switch(s.label){case 0:return[4,this.httpclient.request({method:o,path:r,data:t,headers:l({"x-alipay-cloud-mode":"mongo","x-data-api-type":"mongo","x-expire-timestamp":"".concat(Date.now()+6e4)},c)})];case 1:return[2,s.sent()]}})})};return i}();var v=function(){function i(a){this.command=new y;this.options=l(l({},a),{httpclient:new b(a.httpclient)})}i.prototype.collection=function(a){if(!a){throw p.INVALID_PARAM_ERR("collectionName","\u4E0D\u80FD\u4E3A\u7A7A")}return new w(a,this.options)};return i}();export{v as Database};